(self.webpackChunkangular_edu_lib=self.webpackChunkangular_edu_lib||[]).push([[179],{8255:Je=>{function Ee(F){return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+F+"'");throw v.code="MODULE_NOT_FOUND",v})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Je.exports=Ee},3018:(Je,Ee,F)=>{"use strict";F.d(Ee,{deG:()=>qf,tb:()=>xa,AFp:()=>$g,ip1:()=>m0,CZH:()=>jc,hGG:()=>wx,z2F:()=>Sf,sBO:()=>yC,Sil:()=>_d,_Vd:()=>wu,EJc:()=>_0,SBq:()=>Fo,qLn:()=>lu,vpe:()=>Sa,gxx:()=>Al,tBr:()=>oc,XFs:()=>De,OlP:()=>Qt,zs3:()=>vn,ZZ4:()=>cg,aQg:()=>lg,soG:()=>L_,YKP:()=>hg,v3s:()=>Vi,h0i:()=>os,PXZ:()=>ix,R0b:()=>Dr,FiY:()=>ws,Lbi:()=>Bc,g9A:()=>Gg,Qsj:()=>Rc,FYo:()=>af,JOm:()=>x,Tiy:()=>Nc,q3G:()=>cn,tp0:()=>da,EAV:()=>ux,Rgc:()=>Da,dDg:()=>yD,DyG:()=>rc,q4F:()=>Mc,GfV:()=>od,s_b:()=>lf,ifc:()=>yt,eFA:()=>S0,G48:()=>ex,X6Q:()=>D0,_c5:()=>K_,VLi:()=>Tf,c2e:()=>Cu,zSh:()=>xl,wAp:()=>tt,vHH:()=>fe,EiD:()=>ml,mCW:()=>lc,qzn:()=>ha,JVY:()=>Am,pB0:()=>Rm,eBb:()=>qs,L6k:()=>lv,LAX:()=>xm,cg1:()=>yu,Tjo:()=>GR,kL8:()=>Ql,yhl:()=>Sm,dqk:()=>$,sIi:()=>Hp,CqO:()=>rt,QGY:()=>Jp,F4k:()=>Xe,RDi:()=>fs,AaK:()=>Z,z3N:()=>Ws,TTD:()=>Ru,xp6:()=>gb,uIk:()=>Ea,Suo:()=>S_,Xpm:()=>lo,lG2:()=>Td,Yz7:()=>Et,cJS:()=>Tr,oAB:()=>Ho,Yjl:()=>Ms,Y36:()=>Yp,_UZ:()=>zl,qZA:()=>wr,TgZ:()=>Oy,n5z:()=>Do,Ikx:()=>Yh,LFG:()=>Sn,$8M:()=>Hs,NdJ:()=>AE,CRH:()=>A_,ALo:()=>b_,lcZ:()=>I_,Q6J:()=>TE,iGM:()=>e0,LSH:()=>fa,kYT:()=>fo,YNc:()=>Uh,_uU:()=>rg,Oqu:()=>Gh});var v=F(9765),X=F(5319),k=F(7574),ce=F(6682),te=F(2441);var ae=F(1307);function ee(){return new v.xQ}function V(r){for(let i in r)if(r[i]===V)return i;throw Error("Could not find renamed property on target object.")}function Z(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Z).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function oe(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const we=V({__forward_ref__:V});function he(r){return r.__forward_ref__=he,r.toString=function(){return Z(this())},r}function K(r){return me(r)?r():r}function me(r){return"function"==typeof r&&r.hasOwnProperty(we)&&r.__forward_ref__===he}class fe extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Oe(r){return"string"==typeof r?r:null==r?"":String(r)}function Tt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Oe(r)}function _t(r,i){const o=i?` in ${i}`:"";throw new fe("201",`No provider for ${Tt(r)} found${o}`)}function on(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function Et(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Tr(r){return{providers:r.providers||[],imports:r.imports||[]}}function pr(r){return Ce(r,Mt)||Ce(r,uo)}function Ce(r,i){return r.hasOwnProperty(i)?r[i]:null}function wi(r){return r&&(r.hasOwnProperty($r)||r.hasOwnProperty(et))?r[$r]:null}const Mt=V({\u0275prov:V}),$r=V({\u0275inj:V}),uo=V({ngInjectableDef:V}),et=V({ngInjectorDef:V});var De=(()=>((De=De||{})[De.Default=0]="Default",De[De.Host=1]="Host",De[De.Self=2]="Self",De[De.SkipSelf=4]="SkipSelf",De[De.Optional=8]="Optional",De))();let Ut;function dn(r){const i=Ut;return Ut=r,i}function Lt(r,i,o){const u=pr(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&De.Optional?null:void 0!==i?i:void _t(Z(r),"Injector")}function We(r){return{toString:r}.toString()}var Sr=(()=>((Sr=Sr||{})[Sr.OnPush=0]="OnPush",Sr[Sr.Default=1]="Default",Sr))(),yt=(()=>((yt=yt||{})[yt.Emulated=0]="Emulated",yt[yt.None=2]="None",yt[yt.ShadowDom=3]="ShadowDom",yt))();const gr="undefined"!=typeof globalThis&&globalThis,Su="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$=gr||"undefined"!=typeof global&&global||Su||G,Ue={},Ve=[],Wt=V({\u0275cmp:V}),jn=V({\u0275dir:V}),an=V({\u0275pipe:V}),Ar=V({\u0275mod:V}),At=V({\u0275loc:V}),rn=V({\u0275fac:V}),ji=V({__NG_ELEMENT_ID__:V});let qc=0;function lo(r){return We(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Sr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Ve,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||yt.Emulated,id:"c",styles:r.styles||Ve,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,g=r.pipes;return u.id+=qc++,u.inputs=Go(r.inputs,o),u.outputs=Go(r.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ho):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(Zc):null,u})}function ho(r){return Bn(r)||function(r){return r[jn]||null}(r)}function Zc(r){return function(r){return r[an]||null}(r)}const ii={};function Ho(r){return We(()=>{const i={type:r.type,bootstrap:r.bootstrap||Ve,declarations:r.declarations||Ve,imports:r.imports||Ve,exports:r.exports||Ve,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ii[r.id]=r.type),i})}function fo(r,i){return We(()=>{const o=tr(r,!0);o.declarations=i.declarations||Ve,o.imports=i.imports||Ve,o.exports=i.exports||Ve})}function Go(r,i){if(null==r)return Ue;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,i&&(i[c]=d)}return o}const Td=lo;function Ms(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Bn(r){return r[Wt]||null}function tr(r,i){const o=r[Ar]||null;if(!o&&!0===i)throw new Error(`Type ${Z(r)} does not have '\u0275mod' property.`);return o}function Hi(r){return Array.isArray(r)&&"object"==typeof r[1]}function fn(r){return Array.isArray(r)&&!0===r[1]}function Ls(r){return 0!=(8&r.flags)}function Oa(r){return 2==(2&r.flags)}function Ko(r){return 1==(1&r.flags)}function oi(r){return null!==r.template}function xu(r){return 0!=(512&r[2])}function pn(r,i){return r.hasOwnProperty(rn)?r[rn]:null}class Gi{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ru(){return Fa}function Fa(r){return r.type.prototype.ngOnChanges&&(r.setInput=Vf),Fd}function Fd(){const r=Va(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Ue)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Vf(r,i,o,u){const c=Va(r)||function(r,i){return r[Xc]=i}(r,{previous:Ue,current:null}),d=c.current||(c.current={}),g=c.previous,y=this.declaredInputs[o],w=g[y];d[y]=new Gi(w&&w.currentValue,i,g===Ue),r[u]=i}Ru.ngInherit=!0;const Xc="__ngSimpleChanges__";function Va(r){return r[Xc]||null}let ja;function fs(r){ja=r}function Yt(r){return!!r.listen}const Ba={createRenderer:(r,i)=>void 0!==ja?ja:"undefined"!=typeof document?document:void 0};function wt(r){for(;Array.isArray(r);)r=r[0];return r}function xr(r,i){return wt(i[r.index])}function Wi(r,i){return r.data[i]}function nr(r,i){const o=i[r];return Hi(o)?o:o[0]}function Mu(r){return 4==(4&r[2])}function Xo(r){return 128==(128&r[2])}function ps(r,i){return null==i?null:r[i]}function Ha(r){r[18]=0}function Pu(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const nt={lFrame:$u(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ou(){return nt.bindingsEnabled}function be(){return nt.lFrame.lView}function vt(){return nt.lFrame.tView}function gn(){let r=Lu();for(;null!==r&&64===r.type;)r=r.parent;return r}function Lu(){return nt.lFrame.currentTNode}function ai(r,i){const o=nt.lFrame;o.currentTNode=r,o.isParent=i}function Ga(){return nt.lFrame.isParent}function ys(){return nt.isInCheckNoChangesMode}function qi(r){nt.isInCheckNoChangesMode=r}function js(){return nt.lFrame.bindingIndex++}function Uu(r,i){const o=nt.lFrame;o.bindingIndex=o.bindingRootIndex=r,ju(i)}function ju(r){nt.lFrame.currentDirectiveIndex=r}function Hd(){return nt.lFrame.currentQueryIndex}function Bu(r){nt.lFrame.currentQueryIndex=r}function jf(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Gd(r,i,o){if(o&De.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&De.Host||(c=jf(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=nt.lFrame=zd();return u.currentTNode=i,u.lView=r,!0}function _s(r){const i=zd(),o=r[1];nt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function zd(){const r=nt.lFrame,i=null===r?null:r.child;return null===i?$u(r):i}function $u(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function za(){const r=nt.lFrame;return nt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const cm=za;function Hu(){const r=za();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Rr(){return nt.lFrame.selectedIndex}function Gr(r){nt.lFrame.selectedIndex=r}function un(){const r=nt.lFrame;return Wi(r.tView,r.selectedIndex)}function Gu(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:S}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=S&&(r.destroyHooks||(r.destroyHooks=[])).push(o,S)}}function Ka(r,i,o){wo(r,i,3,o)}function Za(r,i,o,u){(3&r[2])===o&&wo(r,i,o,u)}function zu(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function wo(r,i,o,u){const d=null!=u?u:-1,g=i.length-1;let y=0;for(let w=void 0!==u?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(y=i[w],null!=u&&y>=u)break}else i[w]<0&&(r[18]+=65536),(y<d||-1==d)&&(Wu(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function Wu(r,i,o,u){const c=o[u]<0,d=o[u+1],y=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class Ya{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Qa(r,i,o){const u=Yt(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const g=o[c++],y=o[c++],w=o[c++];u?r.setAttribute(i,y,w,g):i.setAttributeNS(g,y,w)}else{const g=d,y=o[++c];Ku(g)?u&&r.setProperty(i,g,y):u?r.setAttribute(i,g,y):i.setAttribute(g,y),c++}}return c}function qu(r){return 3===r||4===r||6===r}function Ku(r){return 64===r.charCodeAt(0)}function Ci(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||Zu(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function Zu(r,i,o,u,c){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const y=r[d++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=d-1;break}}}for(;d<r.length;){const y=r[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function Yu(r){return-1!==r}function Ja(r){return 32767&r}function Xa(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let Qu=!0;function Io(r){const i=Qu;return Qu=r,i}let mn=0;function ci(r,i){const o=sr(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,yr(u.data,r),yr(i,null),yr(u.blueprint,null));const c=Ju(r,i),d=r.injectorIndex;if(Yu(c)){const g=Ja(c),y=Xa(c,i),w=y[1].data;for(let C=0;C<8;C++)i[d+C]=y[g+C]|w[g+C]}return i[d+8]=c,d}function yr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function sr(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function Ju(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const d=c[1],g=d.type;if(u=2===g?d.declTNode:1===g?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function _r(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(ji)&&(u=o[ji]),null==u&&(u=o[ji]=mn++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Zd(r,i,o){if(o&De.Optional)return r;_t(i,"NodeInjector")}function Co(r,i,o,u){if(o&De.Optional&&void 0===u&&(u=null),0==(o&(De.Self|De.Host))){const c=r[9],d=dn(void 0);try{return c?c.get(i,u,o&De.Optional):Lt(i,u,o&De.Optional)}finally{dn(d)}}return Zd(u,i,o)}function Ki(r,i,o,u=De.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(ji)?r[ji]:void 0;return"number"==typeof i?i>=0?255&i:nl:i}(o);if("function"==typeof d){if(!Gd(i,r,u))return u&De.Host?Zd(c,o,u):Co(i,o,u,c);try{const g=d(u);if(null!=g||u&De.Optional)return g;_t(o)}finally{cm()}}else if("number"==typeof d){let g=null,y=sr(r,i),w=-1,C=u&De.Host?i[16][6]:null;for((-1===y||u&De.SkipSelf)&&(w=-1===y?Ju(r,i):i[y+8],-1!==w&&ec(u,!1)?(g=i[1],y=Ja(w),i=Xa(w,i)):y=-1);-1!==y;){const S=i[1];if(vs(d,y,S.data)){const N=rl(y,i,o,g,u,C);if(N!==Cn)return N}w=i[y+8],-1!==w&&ec(u,i[1].data[y+8]===C)&&vs(d,y,i)?(g=S,y=Ja(w),i=Xa(w,i)):y=-1}}}return Co(i,o,u,c)}const Cn={};function nl(){return new sa(gn(),be())}function rl(r,i,o,u,c,d){const g=i[1],y=g.data[r+8],S=ia(y,g,o,null==u?Oa(y)&&Qu:u!=g&&0!=(3&y.type),c&De.Host&&d===y);return null!==S?$s(i,g,S,y):Cn}function ia(r,i,o,u,c){const d=r.providerIndexes,g=i.data,y=1048575&d,w=r.directiveStart,S=d>>20,P=c?y+S:r.directiveEnd;for(let j=u?y:y+S;j<P;j++){const z=g[j];if(j<w&&o===z||j>=w&&z.type===o)return j}if(c){const j=g[w];if(j&&oi(j)&&j.type===o)return w}return null}function $s(r,i,o,u){let c=r[o];const d=i.data;if(function(r){return r instanceof Ya}(c)){const g=c;g.resolving&&function(r,i){throw new fe("200",`Circular dependency in DI detected for ${r}`)}(Tt(d[o]));const y=Io(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?dn(g.injectImpl):null;Gd(r,u,De.Default);try{c=r[o]=g.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const g=Fa(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==w&&dn(w),Io(y),g.resolving=!1,cm()}}return c}function vs(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function ec(r,i){return!(r&De.Self||r&De.Host&&i)}class sa{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Ki(this._tNode,this._lView,i,u,o)}}function Do(r){return We(()=>{const i=r.prototype.constructor,o=i[rn]||tc(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[rn]||tc(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function tc(r){return me(r)?()=>{const i=tc(K(r));return i&&i()}:pn(r)}function Hs(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(qu(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(gn(),r)}const Gs="__parameters__";function zs(r,i,o){return We(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const g=new c(...d);return y.annotation=g,y;function y(w,C,S){const N=w.hasOwnProperty(Gs)?w[Gs]:Object.defineProperty(w,Gs,{value:[]})[Gs];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(g),w}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Qt{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Et({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qf=new Qt("AnalyzeForEntryComponents"),rc=Function;function Ti(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),Ti(u,i)):i!==r&&i.push(u)}return i}function Si(r,i){r.forEach(o=>Array.isArray(o)?Si(o,i):i(o))}function Ai(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function ca(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const di={},Nr="__NG_DI_FLAG__",Wr="ngTempTokenPath",Ri=/\n/gm,al="__source",ul=V({provide:String,useValue:V});let ic;function Yi(r){const i=ic;return ic=r,i}function np(r,i=De.Default){if(void 0===ic)throw new Error("inject() must be called from an injection context");return null===ic?Lt(r,void 0,i):ic.get(r,i&De.Optional?null:void 0,i)}function Sn(r,i=De.Default){return(Ut||np)(K(r),i)}function la(r){const i=[];for(let o=0;o<r.length;o++){const u=K(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=De.Default;for(let g=0;g<u.length;g++){const y=u[g],w=iu(y);"number"==typeof w?-1===w?c=y.token:d|=w:c=y}i.push(Sn(c,d))}else i.push(Sn(u))}return i}function sc(r,i){return r[Nr]=i,r.prototype[Nr]=i,r}function iu(r){return r[Nr]}function gm(r,i,o,u){const c=r[Wr];throw i[al]&&c.unshift(i[al]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=Z(i);if(Array.isArray(i))c=i.map(Z).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];d.push(g+":"+("string"==typeof y?JSON.stringify(y):Z(y)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(Ri,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Wr]=null,r}const oc=sc(zs("Inject",r=>({token:r})),-1),ws=sc(zs("Optional"),8),da=sc(zs("SkipSelf"),4);let ou;function uc(r){var i;return(null===(i=function(){if(void 0===ou&&(ou=null,$.trustedTypes))try{ou=$.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return ou}())||void 0===i?void 0:i.createHTML(r))||r}class au{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class uv extends au{getTypeName(){return"HTML"}}class Tm extends au{getTypeName(){return"Style"}}class bt extends au{getTypeName(){return"Script"}}class cv extends au{getTypeName(){return"URL"}}class cc extends au{getTypeName(){return"ResourceURL"}}function Ws(r){return r instanceof au?r.changingThisBreaksApplicationSecurity:r}function ha(r,i){const o=Sm(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function Sm(r){return r instanceof au&&r.getTypeName()||null}function Am(r){return new uv(r)}function lv(r){return new Tm(r)}function qs(r){return new bt(r)}function xm(r){return new cv(r)}function Rm(r){return new cc(r)}class eb{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(uc(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Yn{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=uc(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=uc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Nm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ih=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lc(r){return(r=String(r)).match(Nm)||r.match(ih)?r:"unsafe:"+r}function Ji(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function hl(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const dp=Ji("area,br,col,hr,img,wbr"),hp=Ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sh=Ji("rp,rt"),fl=hl(dp,hl(hp,Ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hl(sh,Ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hl(sh,hp)),So=Ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pl=Ji("srcset"),ah=hl(So,pl,Ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uh=Ji("script,style,template");class gl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!fl.hasOwnProperty(o))return this.sanitizedSomething=!0,!uh.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),g=d.name,y=g.toLowerCase();if(!ah.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=d.value;So[y]&&(w=lc(w)),pl[y]&&(r=w,w=(r=String(r)).split(",").map(i=>lc(i.trim())).join(", ")),this.buf.push(" ",g,'="',Pm(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();fl.hasOwnProperty(o)&&!dp.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(Pm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const ch=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lh=/([^\#-~ |!])/g;function Pm(r){return r.replace(/&/g,"&amp;").replace(ch,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(lh,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dc;function ml(r,i){let o=null;try{dc=dc||function(r){const i=new Yn(r);return function(){try{return!!(new window.DOMParser).parseFromString(uc(""),"text/html")}catch(r){return!1}}()?new eb(i):i}(r);let u=i?String(i):"";o=dc.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=dc.getInertBodyElement(u)}while(u!==d);return uc((new gl).sanitizeChildren(dh(o)||o))}finally{if(o){const u=dh(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function dh(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var cn=(()=>((cn=cn||{})[cn.NONE=0]="NONE",cn[cn.HTML=1]="HTML",cn[cn.STYLE=2]="STYLE",cn[cn.SCRIPT=3]="SCRIPT",cn[cn.URL=4]="URL",cn[cn.RESOURCE_URL=5]="RESOURCE_URL",cn))();function fa(r){const i=function(){const r=be();return r&&r[12]}();return i?i.sanitize(cn.URL,r)||"":ha(r,"URL")?Ws(r):lc(Oe(r))}const yl="__ngContext__";function On(r,i){r[yl]=i}function mp(r){const i=function(r){return r[yl]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function pc(r){return r.ngOriginalError}function Zs(r,...i){r.error(...i)}class lu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||Zs;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(pc(i)):null}_findOriginalError(i){let o=i&&pc(i);for(;o&&pc(o);)o=pc(o);return o||null}}const wh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($))();function m(r){return r instanceof Function?r():r}var x=(()=>((x=x||{})[x.Important=1]="Important",x[x.DashCase=2]="DashCase",x))();function ne(r,i){return undefined(r,i)}function He(r){const i=r[3];return fn(i)?i[3]:i}function kn(r){return ma(r[13])}function Pi(r){return ma(r[4])}function ma(r){for(;null!==r&&!fn(r);)r=r[4];return r}function du(r,i,o,u,c){if(null!=u){let d,g=!1;fn(u)?d=u:Hi(u)&&(g=!0,u=u[0]);const y=wt(u);0===r&&null!==o?null==c?ib(i,o,y):Cl(i,o,y,c||null,!0):1===r&&null!==o?Cl(i,o,y,c||null,!0):2===r?function(r,i,o){const u=yc(r,i);u&&function(r,i,o,u){Yt(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,y,g):3===r&&i.destroyNode(y),null!=d&&function(r,i,o,u,c){const d=o[7];d!==wt(o)&&du(i,r,u,d,c);for(let y=10;y<o.length;y++){const w=o[y];Th(w[1],w,r,i,u,d)}}(i,r,d,o,c)}}function Il(r,i,o){return Yt(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function nb(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Pu(c,-1)),o.splice(u,1)}function wv(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&nb(c,u),i>0&&(r[o-1][4]=u[4]);const d=ca(r,10+i);!function(r,i){Th(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function rb(r,i){if(!(256&i[2])){const o=i[11];Yt(o)&&o.destroyNode&&Th(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return bv(r[1],r);for(;i;){let o=null;if(Hi(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)Hi(i)&&bv(i[1],i),i=i[3];null===i&&(i=r),Hi(i)&&bv(i[1],i),o=i&&i[4]}i=o}}(i)}}function bv(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ya)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const y=c[d[g]],w=d[g+1];try{w.call(y)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],y="function"==typeof g?g(i):wt(i[g]),w=u[c=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],w,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),d+=2}else{const g=u[c=o[d+1]];o[d].call(g)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&Yt(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&fn(i[3])){o!==i[3]&&nb(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function Cv(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===yt.None||c===yt.Emulated)return null}return xr(u,o)}(r,i.parent,o)}function Cl(r,i,o,u,c){Yt(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function ib(r,i,o){Yt(r)?r.appendChild(i,o):i.appendChild(o)}function Cp(r,i,o,u,c){null!==u?Cl(r,i,o,u,c):ib(r,i,o)}function yc(r,i){return Yt(r)?r.parentNode(i):i.parentNode}let ob=function(r,i,o){return 40&r.type?xr(r,o):null};function $m(r,i,o,u){const c=Cv(r,u,i),d=i[11],y=function(r,i,o){return ob(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let w=0;w<o.length;w++)Cp(d,c,o[w],y,!1);else Cp(d,c,o,y,!1)}function Hm(r,i){if(null!==i){const o=i.type;if(3&o)return xr(i,r);if(4&o)return Tv(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Hm(r,u);{const c=r[i.index];return fn(c)?Tv(-1,c):wt(c)}}if(32&o)return ne(i,r)()||wt(r[i.index]);{const u=ub(r,i);return null!==u?Array.isArray(u)?u[0]:Hm(He(r[16]),u):Hm(r,i.next)}}return null}function ub(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Tv(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Hm(u,c)}return i[7]}function Sv(r,i,o,u,c,d,g){for(;null!=o;){const y=u[o.index],w=o.type;if(g&&0===i&&(y&&On(wt(y),u),o.flags|=4),64!=(64&o.flags))if(8&w)Sv(r,i,o.child,u,c,d,!1),du(i,r,c,y,d);else if(32&w){const C=ne(o,u);let S;for(;S=C();)du(i,r,c,S,d);du(i,r,c,y,d)}else 16&w?lb(r,i,u,o,c,d):du(i,r,c,y,d);o=g?o.projectionNext:o.next}}function Th(r,i,o,u,c,d){Sv(o,u,r.firstChild,i,c,d,!1)}function lb(r,i,o,u,c,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)du(i,r,c,w[C],d);else Sv(r,i,w,g[3],c,d,!0)}function db(r,i,o){Yt(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function Gm(r,i,o){Yt(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function lT(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const Av="ng-template";function hb(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==lT(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function xv(r){return 4===r.type&&r.value!==Av}function hT(r,i,o){return i===(4!==r.type||o?r.value:Av)}function fT(r,i,o){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(qu(r[i]))return i;return r.length}(c);let g=!1;for(let y=0;y<i.length;y++){const w=i[y];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!hT(r,w,o)||""===w&&1===i.length){if(Ao(u))return!1;g=!0}}else{const C=8&u?w:i[++y];if(8&u&&null!==r.attrs){if(!hb(r.attrs,C,o)){if(Ao(u))return!1;g=!0}continue}const N=pT(8&u?"class":w,c,xv(r),o);if(-1===N){if(Ao(u))return!1;g=!0;continue}if(""!==C){let P;P=N>d?"":c[N+1].toLowerCase();const j=8&u?P:null;if(j&&-1!==lT(j,C,0)||2&u&&C!==P){if(Ao(u))return!1;g=!0}}}}else{if(!g&&!Ao(u)&&!Ao(w))return!1;if(g&&Ao(w))continue;g=!1,u=w|1&u}}return Ao(u)||g}function Ao(r){return 0==(1&r)}function pT(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let d=!1;for(;c<i.length;){const g=i[c];if(g===r)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function fb(r,i,o=!1){for(let u=0;u<i.length;u++)if(fT(r,i[u],o))return!0;return!1}function zm(r,i){return r?":not("+i.trim()+")":i}function pb(r){let i=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&u){const y=r[++o];c+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+g:4&u&&(c+=" "+g);else""!==c&&!Ao(g)&&(i+=zm(d,c),c=""),u=g,d=d||!Ao(u);o++}return""!==c&&(i+=zm(d,c)),i}const gt={};function gb(r){mb(vt(),be(),Rr()+r,ys())}function mb(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Ka(i,d,o)}else{const d=r.preOrderHooks;null!==d&&Za(i,d,0,o)}Gr(o)}function ST(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const g=r.data[d];Bu(c),g.contentQueries(2,i[d],d)}}}function Ro(r,i,o,u,c,d,g,y,w,C){const S=i.blueprint.slice();return S[0]=c,S[2]=140|u,Ha(S),S[3]=S[15]=r,S[8]=o,S[10]=g||r&&r[10],S[11]=y||r&&r[11],S[12]=w||r&&r[12]||null,S[9]=C||r&&r[9]||null,S[6]=d,S[16]=2==i.type?r[16]:S,S}function fu(r,i,o,u,c){let d=r.data[i];if(null===d)d=function(r,i,o,u,c){const d=Lu(),g=Ga(),w=r.data[i]=function(r,i,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(r,i,o,u,c),nt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const g=function(){const r=nt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return ai(d,!0),d}function It(r,i,o,u){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Ap(r,i,o){_s(i);try{const u=r.viewQuery;null!==u&&Gv(1,u,o);const c=r.template;null!==c&&Qm(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ST(r,i),r.staticViewQueries&&Gv(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)PT(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Hu()}}function ts(r,i,o,u){const c=i[2];if(256==(256&c))return;_s(i);const d=ys();try{Ha(i),function(r){nt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Qm(r,i,o,2,u);const g=3==(3&c);if(!d)if(g){const C=r.preOrderCheckHooks;null!==C&&Ka(i,C,null)}else{const C=r.preOrderHooks;null!==C&&Za(i,C,0,null),zu(i,0)}if(function(r){for(let i=kn(r);null!==i;i=Pi(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&Pu(d,1),c[2]|=1024}}}(i),function(r){for(let i=kn(r);null!==i;i=Pi(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Xo(u)&&ts(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&ST(r,i),!d)if(g){const C=r.contentCheckHooks;null!==C&&Ka(i,C)}else{const C=r.contentHooks;null!==C&&Za(i,C,1),zu(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Gr(~c);else{const d=c,g=o[++u],y=o[++u];Uu(g,d),y(2,i[d])}}}finally{Gr(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)jv(r,i[o])}(i,y);const w=r.viewQuery;if(null!==w&&Gv(2,w,u),!d)if(g){const C=r.viewCheckHooks;null!==C&&Ka(i,C)}else{const C=r.viewHooks;null!==C&&Za(i,C,2),zu(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Pu(i[3],-1))}finally{Hu()}}function qe(r,i,o,u){const c=i[10],d=!ys(),g=Mu(i);try{d&&!g&&c.begin&&c.begin(),g&&Ap(r,i,u),ts(r,i,o,u)}finally{d&&!g&&c.end&&c.end()}}function Qm(r,i,o,u,c){const d=Rr(),g=2&u;try{Gr(-1),g&&i.length>20&&mb(r,i,20,ys()),o(u,c)}finally{Gr(d)}}function xh(r,i,o){!Ou()||(function(r,i,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||ci(o,i),On(u,i);const g=o.initialInputs;for(let y=c;y<d;y++){const w=r.data[y],C=oi(w);C&&Nh(i,o,w);const S=$s(i,r,y,o);On(S,i),null!==g&&Vb(0,y-c,S,w,0,g),C&&(nr(o.index,i)[8]=S)}}(r,i,o,xr(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,c=o.directiveEnd,g=o.index,y=nt.lFrame.currentDirectiveIndex;try{Gr(g);for(let w=u;w<c;w++){const C=r.data[w],S=i[w];ju(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&ny(C,S)}}finally{Gr(-1),ju(y)}}(r,i,o))}function xp(r,i,o=xr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],y=-1===g?o(i,r):r[g];r[c++]=y}}}function Rh(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Jm(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Jm(r,i,o,u,c,d,g,y,w,C){const S=20+u,N=S+c,P=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:gt);return o}(S,N),j="function"==typeof C?C():C;return P[1]={type:r,blueprint:P,template:o,queries:null,viewQuery:y,declTNode:i,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:j,incompleteFirstPass:!1}}function Mr(r,i,o,u){const c=iy(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&sy(r).push(u,c.length-1))}function Pr(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function bs(r,i,o,u,c,d,g,y){const w=xr(i,o);let S,C=i.inputs;!y&&null!=C&&(S=C[u])?(Wv(r,o,S,u,c),Oa(i)&&function(r,i){const o=nr(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=g?g(c,i.value||"",u):c,Yt(d)?d.setProperty(w,u,c):Ku(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}function qr(r,i,o,u){let c=!1;if(Ou()){const d=function(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];fb(o,g.selectors,!1)&&(c||(c=[]),_r(ci(o,i),r,g.type),oi(g)?(Lv(r,o),c.unshift(g)):c.push(g))}return c}(r,i,o),g=null===u?null:{"":-1};if(null!==d){c=!0,Lb(o,r.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let y=!1,w=!1,C=It(r,i,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=Ci(o.mergedAttrs,N.hostAttrs),Fb(r,o,i,C,N),Fv(C,N,g),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const P=N.type.prototype;!y&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,g=[];let y=null,w=null;for(let C=i.directiveStart;C<u;C++){const S=c[C],N=S.inputs,P=null===d||xv(i)?null:NT(N,d);g.push(P),y=Pr(N,C,y),w=Pr(S.outputs,C,w)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new fe("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(o,u,g)}return o.mergedAttrs=Ci(o.mergedAttrs,o.attrs),c}function ty(r,i,o,u,c,d){const g=d.hostBindings;if(g){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=w&&y.push(w),y.push(u,c,g)}}function ny(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Lv(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function Fv(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;oi(i)&&(o[""]=r)}}function Lb(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Fb(r,i,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=pn(c.type)),g=new Ya(d,oi(c),null);r.blueprint[u]=g,o[u]=g,ty(r,i,0,u,It(r,o,c.hostVars,gt),c)}function Nh(r,i,o){const u=xr(i,r),c=Rh(o),d=r[10],g=Mp(r,Ro(r,c,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=g}function No(r,i,o,u,c,d){const g=xr(r,i);!function(r,i,o,u,c,d,g){if(null==d)Yt(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==g?Oe(d):g(d,u||"",c);Yt(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],g,d,r.value,o,u,c)}function Vb(r,i,o,u,c,d){const g=d[i];if(null!==g){const y=u.setInput;for(let w=0;w<g.length;){const C=g[w++],S=g[w++],N=g[w++];null!==y?u.setInput(o,N,C,S):o[S]=N}}}function NT(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function Np(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function jv(r,i){const o=nr(i,r);if(Xo(o)){const u=o[1];80&o[2]?ts(u,o,u.template,o[8]):o[5]>0&&Bv(o)}}function Bv(r){for(let u=kn(r);null!==u;u=Pi(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const g=d[1];ts(g,d,g.template,d[8])}else d[5]>0&&Bv(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=nr(o[u],r);Xo(c)&&c[5]>0&&Bv(c)}}function PT(r,i){const o=nr(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Ap(u,o,o[8])}function Mp(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Hv(r){for(;r;){r[2]|=64;const i=He(r);if(xu(r)&&!i)return r;r=i}return null}function Sl(r,i,o){const u=i[10];u.begin&&u.begin();try{ts(r,i,r.template,o)}catch(c){throw ay(i,c),c}finally{u.end&&u.end()}}function Ub(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=mp(o),c=u[1];qe(c,u,c.template,o)}}(r[8])}function Gv(r,i,o){Bu(0),i(r,o)}const ry=(()=>Promise.resolve(null))();function iy(r){return r[7]||(r[7]=[])}function sy(r){return r.cleanup||(r.cleanup=[])}function ay(r,i){const o=r[9],u=o?o.get(lu,null):null;u&&u.handleError(i)}function Wv(r,i,o,u,c){for(let d=0;d<o.length;){const g=o[d++],y=o[d++],w=i[g],C=r.data[g];null!==C.setInput?C.setInput(w,c,u,y):w[y]=c}}function va(r,i,o){const u=function(r,i){return wt(i[r])}(i,r);!function(r,i,o){Yt(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function uy(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:1==d?c=oe(c,y):2==d&&(u=oe(u,y+": "+i[++g]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const Al=new Qt("INJECTOR",-1);class Hb{get(i,o=di){if(o===di){const u=new Error(`NullInjectorError: No provider for ${Z(i)}!`);throw u.name="NullInjectorError",u}return o}}const xl=new Qt("Set Injector scope."),Rl={},qv={};let ur;function kr(){return void 0===ur&&(ur=new Hb),ur}function ly(r,i=null,o=null,u){return new LT(r,o,i||kr(),u)}class LT{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&Si(o,y=>this.processProvider(y,i,o)),Si([i],y=>this.processInjectorType(y,[],d)),this.records.set(Al,wc(void 0,this));const g=this.records.get(xl);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof i?null:Z(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=di,u=De.Default){this.assertNotDestroyed();const c=Yi(this),d=dn(void 0);try{if(!(u&De.SkipSelf)){let y=this.records.get(i);if(void 0===y){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof Qt)&&pr(i);y=w&&this.injectableDefInScope(w)?wc(Kv(i),Rl):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(u&De.Self?kr():this.parent).get(i,o=u&De.Optional&&o===di?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[Wr]=g[Wr]||[]).unshift(Z(i)),c)throw g;return gm(g,i,"R3InjectorError",this.source)}throw g}finally{dn(d),Yi(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(Z(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=K(i)))return!1;let c=wi(i);const d=null==c&&i.ngModule||void 0,g=void 0===d?i:d,y=-1!==u.indexOf(g);if(void 0!==d&&(c=wi(d)),null==c)return!1;if(null!=c.imports&&!y){let S;u.push(g);try{Si(c.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:P,providers:j}=S[N];Si(j,z=>this.processProvider(z,P,j||Ve))}}this.injectorDefTypes.add(g);const w=pn(g)||(()=>new g);this.records.set(g,wc(w,Rl));const C=c.providers;if(null!=C&&!y){const S=i;Si(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let c=Nl(i=K(i))?i:K(i&&i.provide);const d=dy(r=i)?wc(void 0,r.useValue):wc(function(r,i,o){let u;if(Nl(r)){const c=K(r);return pn(c)||Kv(c)}if(dy(r))u=()=>K(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...la(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Sn(K(r.useExisting));else{const c=K(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return pn(c)||Kv(c);u=()=>new c(...la(r.deps))}return u}(r),Rl);var r;if(Nl(i)||!0!==i.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=wc(void 0,Rl,!0),g.factory=()=>la(g.multi),this.records.set(c,g)),c=i,g.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===Rl&&(o.value=qv,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=K(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Kv(r){const i=pr(r),o=null!==i?i.factory:pn(r);if(null!==o)return o;if(r instanceof Qt)throw new Error(`Token ${Z(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${Z(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[Mt]||r[uo]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function wc(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function dy(r){return null!==r&&"object"==typeof r&&ul in r}function Nl(r){return"function"==typeof r}const Mh=function(r,i,o){return function(r,i=null,o=null,u){const c=ly(r,i,o,u);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let vn=(()=>{class r{static create(o,u){return Array.isArray(o)?Mh(o,u,""):Mh(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=di,r.NULL=new Hb,r.\u0275prov=Et({token:r,providedIn:"any",factory:()=>Sn(Al)}),r.__NG_ELEMENT_ID__=-1,r})();function qT(r,i){Gu(mp(r)[1],gn())}let Bp=null;function en(){if(!Bp){const r=$.Symbol;if(r&&r.iterator)Bp=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Bp=u)}}}return Bp}class Po{constructor(i){this.wrapped=i}static wrap(i){return new Po(i)}static unwrap(i){return Po.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof Po}}function Hp(r){return!!uE(r)&&(Array.isArray(r)||!(r instanceof Map)&&en()in r)}function uE(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function gi(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Ea(r,i,o,u){const c=be();return gi(c,js(),i)&&(vt(),No(un(),c,r,i,o,u)),Ea}function Uh(r,i,o,u,c,d,g,y){const w=be(),C=vt(),S=r+20,N=C.firstCreatePass?function(r,i,o,u,c,d,g,y,w){const C=i.consts,S=fu(i,r,4,g||null,ps(C,y));qr(i,o,S,ps(C,w)),Gu(i,S);const N=S.tViews=Jm(2,S,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,S),N.queries=i.queries.embeddedTView(S)),S}(S,C,w,i,o,u,c,d,g):C.data[S];ai(N,!1);const P=w[11].createComment("");$m(C,w,P,N),On(P,w),Mp(w,w[S]=Np(P,w,P,N)),Ko(N)&&xh(C,w,N),null!=g&&xp(w,N,y)}function Yp(r,i=De.Default){const o=be();return null===o?Sn(r,i):Ki(gn(),o,K(r),i)}function TE(r,i,o){const u=be();return gi(u,js(),i)&&bs(vt(),un(),u,r,i,u[11],o,!1),TE}function jh(r,i,o,u,c){const g=c?"class":"style";Wv(r,o,i.inputs[g],g,u)}function Oy(r,i,o,u){const c=be(),d=vt(),g=20+r,y=c[11],w=c[g]=Il(y,i,nt.lFrame.currentNamespace),C=d.firstCreatePass?function(r,i,o,u,c,d,g){const y=i.consts,C=fu(i,r,2,c,ps(y,d));return qr(i,o,C,ps(y,g)),null!==C.attrs&&uy(C,C.attrs,!1),null!==C.mergedAttrs&&uy(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(g,d,c,0,i,o,u):d.data[g];ai(C,!0);const S=C.mergedAttrs;null!==S&&Qa(y,w,S);const N=C.classes;null!==N&&Gm(y,w,N);const P=C.styles;null!==P&&db(y,w,P),64!=(64&C.flags)&&$m(d,c,w,C),0===nt.lFrame.elementDepthCount&&On(w,c),nt.lFrame.elementDepthCount++,Ko(C)&&(xh(d,c,C),function(r,i,o){if(Ls(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,c)),null!==u&&xp(c,C)}function wr(){let r=gn();Ga()?nt.lFrame.isParent=!1:(r=r.parent,ai(r,!1));const i=r;nt.lFrame.elementDepthCount--;const o=vt();o.firstCreatePass&&(Gu(o,r),Ls(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&jh(o,i,be(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&jh(o,i,be(),i.stylesWithoutHost,!1)}function zl(r,i,o,u){Oy(r,i,o,u),wr()}function Jp(r){return!!r&&"function"==typeof r.then}function Xe(r){return!!r&&"function"==typeof r.subscribe}const rt=Xe;function AE(r,i,o,u){const c=be(),d=vt(),g=gn();return function(r,i,o,u,c,d,g,y){const w=Ko(u),S=r.firstCreatePass&&sy(r),N=i[8],P=iy(i);let j=!0;if(3&u.type||y){const J=xr(u,i),Re=y?y(J):J,ye=P.length,Ke=y?it=>y(wt(it[u.index])):u.index;if(Yt(o)){let it=null;if(!y&&w&&(it=function(r,i,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===u){const y=i[7],w=c[d+2];return y.length>w?y[w]:null}"string"==typeof g&&(d+=2)}return null}(r,i,c,u.index)),null!==it)(it.__ngLastListenerFn__||it).__ngNextListenerFn__=d,it.__ngLastListenerFn__=d,j=!1;else{d=ky(u,i,N,d,!1);const Rt=o.listen(Re,c,d);P.push(d,Rt),S&&S.push(c,Ke,ye,ye+1)}}else d=ky(u,i,N,d,!0),Re.addEventListener(c,d,g),P.push(d),S&&S.push(c,Ke,ye,g)}else d=ky(u,i,N,d,!1);const z=u.outputs;let se;if(j&&null!==z&&(se=z[c])){const J=se.length;if(J)for(let Re=0;Re<J;Re+=2){const Gn=i[se[Re]][se[Re+1]].subscribe(d),Ss=P.length;P.push(d,Gn),S&&S.push(c,u.index,Ss,-(Ss+1))}}}(d,c,c[11],g,r,i,!!o,u),AE}function br(r,i,o,u){try{return!1!==o(u)}catch(c){return ay(r,c),!1}}function ky(r,i,o,u,c){return function d(g){if(g===Function)return u;const y=2&r.flags?nr(r.index,i):i;0==(32&i[2])&&Hv(y);let w=br(i,0,u,g),C=d.__ngNextListenerFn__;for(;C;)w=br(i,0,C,g)&&w,C=C.__ngNextListenerFn__;return c&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function rg(r,i=""){const o=be(),u=vt(),c=r+20,d=u.firstCreatePass?fu(u,c,1,i,null):u.data[c],g=o[c]=function(r,i){return Yt(r)?r.createText(i):r.createTextNode(i)}(o[11],i);$m(u,o,g,d),ai(d,!1)}function Gh(r){return Qr("",r,""),Gh}function Qr(r,i,o){const u=be(),c=function(r,i,o,u){return gi(r,js(),o)?i+Oe(o)+u:gt}(u,r,i,o);return c!==gt&&va(u,Rr(),c),Qr}function Yh(r,i,o){const u=be();return gi(u,js(),i)&&bs(vt(),un(),u,r,i,u[11],o,!0),Yh}const Yl=void 0;var Qh=["en",[["a","p"],["AM","PM"],Yl],[["AM","PM"],Yl,Yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yl,"{1} 'at' {0}",Yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let to={};function yu(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=HE(i);if(o)return o;const u=i.split("-")[0];if(o=HE(u),o)return o;if("en"===u)return Qh;throw new Error(`Missing locale data for the locale "${r}".`)}function Ql(r){return yu(r)[tt.PluralCase]}function HE(r){return r in to||(to[r]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[r]),to[r]}var tt=(()=>((tt=tt||{})[tt.LocaleId=0]="LocaleId",tt[tt.DayPeriodsFormat=1]="DayPeriodsFormat",tt[tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",tt[tt.DaysFormat=3]="DaysFormat",tt[tt.DaysStandalone=4]="DaysStandalone",tt[tt.MonthsFormat=5]="MonthsFormat",tt[tt.MonthsStandalone=6]="MonthsStandalone",tt[tt.Eras=7]="Eras",tt[tt.FirstDayOfWeek=8]="FirstDayOfWeek",tt[tt.WeekendRange=9]="WeekendRange",tt[tt.DateFormat=10]="DateFormat",tt[tt.TimeFormat=11]="TimeFormat",tt[tt.DateTimeFormat=12]="DateTimeFormat",tt[tt.NumberSymbols=13]="NumberSymbols",tt[tt.NumberFormats=14]="NumberFormats",tt[tt.CurrencyCode=15]="CurrencyCode",tt[tt.CurrencySymbol=16]="CurrencySymbol",tt[tt.CurrencyName=17]="CurrencyName",tt[tt.Currencies=18]="Currencies",tt[tt.Directionality=19]="Directionality",tt[tt.PluralCase=20]="PluralCase",tt[tt.ExtraData=21]="ExtraData",tt))();const Jl="en-US";let GE=Jl;function Xl(r){on(r,"Expected localeId to be defined"),"string"==typeof r&&(GE=r.toLowerCase().replace(/_/g,"-"))}class rd{}const aw="ngComponent";class Te{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${Z(r)}. Did you add it to @NgModule.entryComponents?`);return i[aw]=r,i}(i)}}let wu=(()=>{class r{}return r.NULL=new Te,r})();function xc(...r){}function of(r,i){return new Fo(xr(r,i))}const cw=function(){return of(gn(),be())};let Fo=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=cw,r})();function Li(r){return r instanceof Fo?r.nativeElement:r}class af{}let Rc=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>oC(),r})();const oC=function(){const r=be(),o=nr(gn().index,r);return function(r){return r[11]}(Hi(o)?o:r)};let Nc=(()=>{class r{}return r.\u0275prov=Et({token:r,providedIn:"root",factory:()=>null}),r})();class od{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Mc=new od("12.2.14");class uf{constructor(){}supports(i){return Hp(i)}create(i){return new US(i)}}const uC=(r,i)=>i;class US{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||uC}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<Xy(u,c,d)?o:u,y=Xy(g,c,d),w=g.currentIndex;if(g===u)c--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const C=y-c,S=w-c;if(C!=S){for(let P=0;P<C;P++){const j=P<d.length?d[P]:d[P]=0,z=j+P;S<=z&&z<C&&(d[P]=j+1)}d[g.previousIndex]=S-C}}y!==w&&i(g,y,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Hp(i))throw new Error(`Error trying to diff '${Z(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,g,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)d=i[y],g=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,y),u=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[en()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,y=>{g=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,y,g,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new lC(o,u),d,c),i}_verifyReinsertion(i,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new hC),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class lC{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dC{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class hC{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new dC,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xy(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class fC{constructor(){}supports(i){return i instanceof Map||uE(i)}create(){return new pC}}class pC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||uE(i)))throw new Error(`Error trying to diff '${Z(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const u=new gC(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class gC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fi(){return new cg([new uf])}let cg=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Fi()),deps:[[r,new da,new ws]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:Fi}),r})();function t_(){return new lg([new fC])}let lg=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||t_()),deps:[[r,new da,new ws]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:t_}),r})();function Vo(r,i,o,u,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(wt(d)),fn(d))for(let y=10;y<d.length;y++){const w=d[y],C=w[1].firstChild;null!==C&&Vo(w[1],w,C,u)}const g=o.type;if(8&g)Vo(r,i,o.child,u);else if(32&g){const y=ne(o,i);let w;for(;w=y();)u.push(w)}else if(16&g){const y=ub(i,o);if(Array.isArray(y))u.push(...y);else{const w=He(i[16]);Vo(w[1],w,y,u,!0)}}o=c?o.projectionNext:o.next}return u}class Ca{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return Vo(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(fn(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(wv(i,u),ca(o,u))}this._attachedToViewContainer=!1}rb(this._lView[1],this._lView)}onDestroy(i){Mr(this._lView[1],this._lView,null,i)}markForCheck(){Hv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){qi(!0);try{Sl(r,i,o)}finally{qi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Th(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class mC extends Ca{constructor(i){super(i),this._view=i}detectChanges(){Ub(this._view)}checkNoChanges(){!function(r){qi(!0);try{Ub(r)}finally{qi(!1)}}(this._view)}get context(){return null}}const cf=function(r){return function(r,i,o){if(Oa(r)&&!o){const u=nr(r.index,i);return new Ca(u,u)}return 47&r.type?new Ca(i[16],i):null}(gn(),be(),16==(16&r))};let yC=(()=>{class r{}return r.__NG_ELEMENT_ID__=cf,r})();const dw=[new fC],jS=new cg([new uf]),BS=new lg(dw),n_=function(){return dg(gn(),be())};let Da=(()=>{class r{}return r.__NG_ELEMENT_ID__=n_,r})();const vC=Da,HS=class extends vC{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Ro(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Ap(o,u,i),new Ca(u)}};function dg(r,i){return 4&r.type?new HS(i,r,of(r,i)):null}class os{}class hg{}const hw=function(){return o_(gn(),be())};let lf=(()=>{class r{}return r.__NG_ELEMENT_ID__=hw,r})();const r_=lf,i_=class extends r_{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return of(this._hostTNode,this._hostLView)}get injector(){return new sa(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ju(this._hostTNode,this._hostLView);if(Yu(i)){const o=Xa(i,this._hostLView),u=Ja(i);return new sa(o[1].data[u+8],o)}return new sa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=EC(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,d){const g=u||this.parentInjector;if(!d&&null==i.ngModule&&g){const w=g.get(os,null);w&&(d=w)}const y=i.create(g,c,void 0,d);return this.insert(y.hostView,o),y}insert(i,o){const u=i._lView,c=u[1];if(fn(u[3])){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const N=u[3],P=new i_(N,N[6],N[3]);P.detach(P.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=i),u<d-10?(i[4]=o[c],Ai(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,u,g,d);const y=Tv(d,g),w=u[11],C=yc(w,g[7]);return null!==C&&function(r,i,o,u,c,d){u[0]=c,u[6]=i,Th(r,u,o,1,c,d)}(c,g[6],w,u,C,y),i.attachToViewContainerRef(),Ai(s_(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=EC(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=wv(this._lContainer,o);u&&(ca(s_(this._lContainer),o),rb(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=wv(this._lContainer,o);return u&&null!=ca(s_(this._lContainer),o)?new Ca(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function EC(r){return r[8]}function s_(r){return r[8]||(r[8]=[])}function o_(r,i){let o;const u=i[r.index];if(fn(u))o=u;else{let c;if(8&r.type)c=wt(u);else{const d=i[11];c=d.createComment("");const g=xr(r,i);Cl(d,yc(d,g),c,function(r,i){return Yt(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=Np(u,i,c,r),Mp(i,o)}return new i_(o,r,i)}const pd={};class BC extends wu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Bn(i);return new __(o,this.ngModule)}}function y_(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const Vw=new Qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wh});class __ extends rd{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(pb).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return y_(this.componentDef.inputs)}get outputs(){return y_(this.componentDef.outputs)}create(i,o,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,u,c)=>{const d=r.get(o,pd,c);return d!==pd||u===pd?d:i.get(o,u,c)}}}(i,c.injector):i,g=d.get(af,Ba),y=d.get(Nc,null),w=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(r,i,o){if(Yt(r))return r.selectRootElement(i,o===yt.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(w,u,this.componentDef.encapsulation):Il(g.createRenderer(null,this.componentDef),C,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,P=function(r,i){return{components:[],scheduler:r||wh,clean:ry,playerHandler:i||null,flags:0}}(),j=Jm(0,null,null,1,0,null,null,null,null,null),z=Ro(null,j,P,N,null,null,g,w,y,d);let se,J;_s(z);try{const Re=function(r,i,o,u,c,d){const g=o[1];o[20]=r;const w=fu(g,20,2,"#host",null),C=w.mergedAttrs=i.hostAttrs;null!==C&&(uy(w,C,!0),null!==r&&(Qa(c,r,C),null!==w.classes&&Gm(c,r,w.classes),null!==w.styles&&db(c,r,w.styles)));const S=u.createRenderer(r,i),N=Ro(o,Rh(i),null,i.onPush?64:16,o[20],w,u,S,d||null,null);return g.firstCreatePass&&(_r(ci(w,o),g,i.type),Lv(g,w),Lb(w,o.length,1)),Mp(o,N),o[20]=N}(S,this.componentDef,z,g,w);if(S)if(u)Qa(w,S,["ng-version",Mc.full]);else{const{attrs:ye,classes:Ke}=function(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&o.push(d);else{if(!Ao(c))break;c=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);ye&&Qa(w,S,ye),Ke&&Ke.length>0&&Gm(w,S,Ke.join(" "))}if(J=Wi(j,20),void 0!==o){const ye=J.projection=[];for(let Ke=0;Ke<this.ngContentSelectors.length;Ke++){const it=o[Ke];ye.push(null!=it?Array.from(it):null)}}se=function(r,i,o,u,c){const d=o[1],g=function(r,i,o){const u=gn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Fb(r,u,i,It(r,i,1,null),o));const c=$s(i,r,u.directiveStart,u);On(c,i);const d=xr(u,i);return d&&On(d,i),c}(d,o,i);if(u.components.push(g),r[8]=g,c&&c.forEach(w=>w(g,i)),i.contentQueries){const w=gn();i.contentQueries(1,g,w.directiveStart)}const y=gn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Gr(y.index),ty(o[1],y,0,y.directiveStart,y.directiveEnd,i),ny(i,g)),g}(Re,this.componentDef,z,P,[qT]),Ap(j,z,null)}finally{Hu()}return new HC(this.componentType,se,of(J,z),z,J)}}class HC extends class{}{constructor(i,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new mC(c),this.componentType=i}get injector(){return new sa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const gd=new Map;class jw extends os{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new BC(this);const u=tr(i),c=i[At]||null;c&&Xl(c),this._bootstrapComponents=m(u.bootstrap),this._r3Injector=ly(i,o,[{provide:os,useValue:this},{provide:wu,useValue:this.componentFactoryResolver}],Z(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=vn.THROW_IF_NOT_FOUND,u=De.Default){return i===vn||i===os||i===Al?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Bw extends hg{constructor(i){super(),this.moduleType=i,null!==tr(i)&&function(r){const i=new Set;!function o(u){const c=tr(u,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${Z(i)} vs ${Z(i.name)}`)}(d,gd.get(d),u),gd.set(d,u));const g=m(c.imports);for(const y of g)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new jw(this.moduleType,i)}}function E_(r,i,o,u,c,d){const g=i+o;return gi(r,g,c)?function(r,i,o){return r[i]=o}(r,g+1,d?u.call(d,c):u(c)):function(r,i){const o=r[i];return o===gt?void 0:o}(r,g+1)}function b_(r,i){const o=vt();let u;const c=r+20;o.firstCreatePass?(u=function(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}throw new fe("302",`The pipe '${r}' could not be found!`)}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const d=u.factory||(u.factory=pn(u.type)),g=dn(Yp);try{const y=Io(!1),w=d();return Io(y),function(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,be(),c,w),w}finally{dn(g)}}function I_(r,i,o){const u=r+20,c=be(),d=function(r,i){return r[i]}(c,u);return function(r,i){Po.isWrapped(i)&&(i=Po.unwrap(i),r[nt.lFrame.bindingIndex]=gt);return i}(c,function(r,i){return r[1].data[i].pure}(c,u)?E_(c,function(){const r=nt.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}(),i,d.transform,o,d):d.transform(o))}function Pg(r){return i=>{setTimeout(r,void 0,i)}}const Sa=class extends v.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,d,g;let y=i,w=o||(()=>null),C=u;if(i&&"object"==typeof i){const N=i;y=null===(c=N.next)||void 0===c?void 0:c.bind(N),w=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(g=N.complete)||void 0===g?void 0:g.bind(N)}this.__isAsync&&(w=Pg(w),y&&(y=Pg(y)),C&&(C=Pg(C)));const S=super.subscribe({next:y,error:w,complete:C});return i instanceof X.w&&i.add(S),S}};function Yw(){return this._results[en()]()}class Ef{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=en(),u=Ef.prototype;u[o]||(u[o]=Yw)}get changes(){return this._changes||(this._changes=new Sa)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=Ti(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class C_{constructor(i){this.queryList=i,this.matches=null}clone(){return new C_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jw{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new Jw(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==s0(i,o).matches&&this.queries[o].setDirty()}}class D_{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class T_{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new T_(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class wf{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new wf(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,o,mA(o,d)),this.matchTNodeWithReadOption(i,o,ia(o,i,d,!1,!1))}else u===Da?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ia(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Fo||c===lf||c===Da&&4&o.type)this.addMatch(o.index,-2);else{const d=ia(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function mA(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function _A(r,i,o,u){return-1===o?function(r,i){return 11&r.type?of(r,i):4&r.type?dg(r,i):null}(i,r):-2===o?function(r,i,o){return o===Fo?of(i,r):o===Da?dg(i,r):o===lf?o_(i,r):void 0}(r,i,u):$s(r,r[1],o,i)}function Xw(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,g=o.matches,y=[];for(let w=0;w<g.length;w+=2){const C=g[w];y.push(C<0?null:_A(i,d[C],g[w+1],o.metadata.read))}c.matches=y}return c.matches}function Og(r,i,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const g=Xw(r,i,c,o);for(let y=0;y<d.length;y+=2){const w=d[y];if(w>0)u.push(g[y/2]);else{const C=d[y+1],S=i[-w];for(let N=10;N<S.length;N++){const P=S[N];P[17]===P[3]&&Og(P[1],P,C,u)}if(null!==S[9]){const N=S[9];for(let P=0;P<N.length;P++){const j=N[P];Og(j[1],j,C,u)}}}}}return u}function e0(r){const i=be(),o=vt(),u=Hd();Bu(u+1);const c=s0(o,u);if(r.dirty&&Mu(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?Og(o,i,u,[]):Xw(o,i,c,u);r.reset(d,Li),r.notifyOnChanges()}return!0}return!1}function S_(r,i,o,u){const c=vt();if(c.firstCreatePass){const d=gn();(function(r,i,o){null===r.queries&&(r.queries=new T_),r.queries.track(new wf(i,o))})(c,new D_(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const u=new Ef(4==(4&o));Mr(r,i,u,u.destroy),null===i[19]&&(i[19]=new Jw),i[19].queries.push(new C_(u))}(c,be(),o)}function A_(){return r=be(),i=Hd(),r[19].queries[i].queryList;var r,i}function s0(r,i){return r.queries.getByIndex(i)}const m0=new Qt("Application Initializer");let jc=(()=>{class r{constructor(o){this.appInits=o,this.resolve=xc,this.reject=xc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(Jp(d))o.push(d);else if(rt(d)){const g=new Promise((y,w)=>{d.subscribe({complete:y,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Sn(m0,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const $g=new Qt("AppId"),Hg={provide:$g,useFactory:function(){return`${y0()}${y0()}${y0()}`},deps:[]};function y0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gg=new Qt("Platform Initializer"),Bc=new Qt("Platform ID"),xa=new Qt("appBootstrapListener");let Cu=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const L_=new Qt("LocaleId"),_0=new Qt("DefaultCurrencyCode");class HA{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const v0=function(r){return new Bw(r)},dD=v0,hD=function(r){return Promise.resolve(v0(r))},fD=function(r){const i=v0(r),u=m(tr(r).declarations).reduce((c,d)=>{const g=Bn(d);return g&&c.push(new __(g)),c},[]);return new HA(i,u)},pD=fD,gD=function(r){return Promise.resolve(fD(r))};let _d=(()=>{class r{constructor(){this.compileModuleSync=dD,this.compileModuleAsync=hD,this.compileModuleAndAllComponentsSync=pD,this.compileModuleAndAllComponentsAsync=gD}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const mD=(()=>Promise.resolve(0))();function Ra(r){"undefined"==typeof Zone?mD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Dr{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sa(!1),this.onMicrotaskEmpty=new Sa(!1),this.onStable=new Sa(!1),this.onError=new Sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=$.requestAnimationFrame,i=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call($,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,w0(r),r.isCheckStableRunning=!0,E0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),w0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,g,y)=>{try{return b0(r),o.invokeTask(c,d,g,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),I0(r)}},onInvoke:(o,u,c,d,g,y,w)=>{try{return b0(r),o.invoke(c,d,g,y,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),I0(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,w0(r),E0(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Dr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,i,ZA,xc,xc);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const ZA={};function E0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function w0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function b0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function I0(r){r._nesting--,E0(r)}class JA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sa,this.onMicrotaskEmpty=new Sa,this.onStable=new Sa,this.onError=new Sa}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let yD=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dr.assertNotInAngularZone(),Ra(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ra(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Sn(Dr))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),C0=(()=>{class r{constructor(){this._applications=new Map,zg.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return zg.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class XA{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function Tf(r){zg=r}let zg=new XA,_D=!0,vD=!1;function D0(){return vD=!0,_D}function ex(){if(vD)throw new Error("Cannot enable prod mode after platform setup.");_D=!1}let jo;const j_=new Qt("AllowMultipleToken");class ix{constructor(i,o){this.name=i,this.token=o}}function S0(r,i,o=[]){const u=`Platform: ${i}`,c=new Qt(u);return(d=[])=>{let g=A0();if(!g||g.injector.get(j_,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const y=o.concat(d).concat({provide:c,useValue:!0},{provide:xl,useValue:"platform"});!function(r){if(jo&&!jo.destroyed&&!jo.injector.get(j_,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jo=r.get(x0);const i=r.get(Gg,null);i&&i.forEach(o=>o())}(vn.create({providers:y,name:u}))}return function(r){const i=A0();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function A0(){return jo&&!jo.destroyed?jo:null}let x0=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(r,i){let o;return o="noop"===r?new JA:("zone.js"===r?void 0:r)||new Dr({enableLongStackTrace:D0(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Dr,useValue:y}];return y.run(()=>{const C=vn.create({providers:w,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(lu,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const P=y.onError.subscribe({next:j=>{N.handleError(j)}});S.onDestroy(()=>{$_(this._modules,S),P.unsubscribe()})}),function(r,i,o){try{const u=o();return Jp(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(N,y,()=>{const P=S.injector.get(jc);return P.runInitializers(),P.donePromise.then(()=>(Xl(S.injector.get(L_,Jl)||Jl),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const c=Ei({},u);return function(r,i,o){const u=new Bw(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(Sf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Z(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Sn(vn))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function Ei(r,i){return Array.isArray(i)?i.reduce(Ei,r):Object.assign(Object.assign({},r),i)}let Sf=(()=>{class r{constructor(o,u,c,d,g){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new k.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Dr.assertNotInAngularZone(),Ra(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Dr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe(r=>(0,ae.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,te.N);return d.source=u,d.subjectFactory=c,d}}(ee)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof rd?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(os),y=c.create(vn.NULL,[],u||c.selector,d),w=y.location.nativeElement,C=y.injector.get(yD,null),S=C&&y.injector.get(C0);return C&&S&&S.registerApplication(w,C),y.onDestroy(()=>{this.detachView(y.hostView),$_(this.components,y),S&&S.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;$_(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(xa,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Sn(Dr),Sn(vn),Sn(lu),Sn(wu),Sn(jc))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function $_(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class Vi{}class ox{}const ax={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ux=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||ax}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),F(8255)(u).then(d=>d[c]).then(d=>bD(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),F(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[c+d]).then(g=>bD(g,u,c))}}return r.\u0275fac=function(o){return new(o||r)(Sn(_d),Sn(ox,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function bD(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const GR=function(r){return null},K_=S0(null,"core",[{provide:Bc,useValue:"unknown"},{provide:x0,deps:[vn]},{provide:C0,deps:[]},{provide:Cu,deps:[]}]),vx=[{provide:Sf,useClass:Sf,deps:[Dr,vn,lu,wu,jc]},{provide:Vw,deps:[Dr],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:jc,useClass:jc,deps:[[new ws,m0]]},{provide:_d,useClass:_d,deps:[]},Hg,{provide:cg,useFactory:function(){return jS},deps:[]},{provide:lg,useFactory:function(){return BS},deps:[]},{provide:L_,useFactory:function(r){return Xl(r=r||"undefined"!=typeof $localize&&$localize.locale||Jl),r},deps:[[new oc(L_),new ws,new da]]},{provide:_0,useValue:"USD"}];let wx=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Sn(Sf))},r.\u0275mod=Ho({type:r}),r.\u0275inj=Tr({providers:vx}),r})()},8939:(Je,Ee,F)=>{"use strict";F.d(Ee,{hO:()=>Z,xv:()=>ee,Dh:()=>ae,GT:()=>re,cc:()=>oe,on:()=>L,pX:()=>te});var v=F(3018),X=F(7841),k=F(7229);Je=F.hmd(Je);const ce=["ngOnDestroy"],te=(me,pe,fe,Se={})=>new Proxy(me,{get:(ze,Oe)=>fe.runOutsideAngular(()=>{var Tt;if(me[Oe])return(null===(Tt=null==Se?void 0:Se.spy)||void 0===Tt?void 0:Tt.get)&&Se.spy.get(Oe,me[Oe]),me[Oe];if(ce.indexOf(Oe)>-1)return()=>{};const pt=pe.toPromise().then(ln=>{const mt=ln&&ln[Oe];return"function"==typeof mt?mt.bind(ln):mt&&mt.then?mt.then(_t=>fe.run(()=>_t)):fe.run(()=>mt)});return new Proxy(()=>{},{get:(ln,mt)=>pt[mt],apply:(ln,mt,_t)=>pt.then(lt=>{var ot;const St=lt&&lt(..._t);return(null===(ot=null==Se?void 0:Se.spy)||void 0===ot?void 0:ot.apply)&&Se.spy.apply(Oe,_t,St),St})})})}),re=(me,pe)=>{pe.forEach(fe=>{Object.getOwnPropertyNames(fe.prototype||fe).forEach(Se=>{Object.defineProperty(me.prototype,Se,Object.getOwnPropertyDescriptor(fe.prototype||fe,Se))})})};class ge{constructor(pe){return pe}}const ae=new v.OlP("angularfire2.app.options"),ee=new v.OlP("angularfire2.app.name");function L(me,pe,fe){const ze="object"==typeof fe&&fe||{};ze.name=ze.name||"string"==typeof fe&&fe||"[DEFAULT]";const Tt=X.Z.apps.filter(pt=>pt&&pt.name===ze.name)[0]||pe.runOutsideAngular(()=>X.Z.initializeApp(me,ze));try{JSON.stringify(me)!==JSON.stringify(Tt.options)&&V("error",`${Tt.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(pt){}return new ge(Tt)}const V=(me,...pe)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[me](...pe)},Q={provide:ge,useFactory:L,deps:[ae,v.R0b,[new v.FiY,ee]]};let Z=(()=>{class me{constructor(fe){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",v.q4F.full,fe.toString())}static initializeApp(fe,Se){return{ngModule:me,providers:[{provide:ae,useValue:fe},{provide:ee,useValue:Se}]}}}return me.\u0275fac=function(fe){return new(fe||me)(v.LFG(v.Lbi))},me.\u0275mod=v.oAB({type:me}),me.\u0275inj=v.cJS({providers:[Q]}),me})();function oe(me,pe,fe,Se,ze){const[,Oe,Tt]=globalThis.\u0275AngularfireInstanceCache.find(pt=>pt[0]===me)||[];if(Oe)return function(me,pe){try{return me.toString()===pe.toString()}catch(fe){return me===pe}}(ze,Tt)||(K("error",`${pe} was already initialized on the ${fe} Firebase App with different settings.${he?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:ze,was:Tt})),Oe;{const pt=Se();return globalThis.\u0275AngularfireInstanceCache.push([me,pt,ze]),pt}}const he=!!Je.hot,K=(me,...pe)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[me](...pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7229:(Je,Ee,F)=>{"use strict";F.d(Ee,{q4:()=>Zf,iC:()=>xi,HU:()=>Si,vb:()=>ua,JM:()=>rc});var v=F(3018),X=F(2329),k=F(8239),ce=F(8026),te=F(3854),re=F(3910),ge=F(5422),ae=F(6676);const ee="@firebase/installations",L="0.5.4",Q=`w:${L}`,Z="FIS_v2",pe=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function Se({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ze(I){return{token:I.token,requestStatus:2,expiresIn:lt(I.expiresIn),creationTime:Date.now()}}function Oe(I,T){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(I,T){const U=(yield T.json()).error;return pe.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function pt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ln(I,{refreshToken:T}){const R=pt(I);return R.append("Authorization",function(I){return`${Z} ${I}`}(T)),R}function mt(I){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function lt(I){return Number(I.replace("s","000"))}function St(I,T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,k.Z)(function*(I,{fid:T}){const R=Se(I),ue={method:"POST",headers:pt(I),body:JSON.stringify({fid:T,authVersion:Z,appId:I.appId,sdkVersion:Q})},Ie=yield mt(()=>fetch(R,ue));if(Ie.ok){const Be=yield Ie.json();return{fid:Be.fid||T,registrationStatus:2,refreshToken:Be.refreshToken,authToken:ze(Be.authToken)}}throw yield Oe("Create Installation",Ie)})).apply(this,arguments)}function ri(I){return new Promise(T=>{setTimeout(T,I)})}const ao=/^[cdef][\w-]{21}$/;function xn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ao.test(R)?R:""}catch(I){return""}}function us(I){return`${I.appName}!${I.appId}`}const Rs=new Map;function cs(I,T){const R=us(I);zn(R,T),function(I,T){const R=(!Vt&&"BroadcastChannel"in self&&(Vt=new BroadcastChannel("[Firebase] FID Change"),Vt.onmessage=I=>{zn(I.data.key,I.data.fid)}),Vt);R&&R.postMessage({key:I,fid:T}),0===Rs.size&&Vt&&(Vt.close(),Vt=null)}(R,T)}function zn(I,T){const R=Rs.get(I);if(R)for(const U of R)U(T)}let Vt=null;const Ce="firebase-installations-store";let er=null;function Rn(){return er||(er=(0,ae.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Ce)}})),er}function wi(I,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,k.Z)(function*(I,T){const R=us(I),Y=(yield Rn()).transaction(Ce,"readwrite"),ue=Y.objectStore(Ce),Ie=yield ue.get(R);return yield ue.put(T,R),yield Y.complete,(!Ie||Ie.fid!==T.fid)&&cs(I,T.fid),T})).apply(this,arguments)}function $r(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(I){const T=us(I),U=(yield Rn()).transaction(Ce,"readwrite");yield U.objectStore(Ce).delete(T),yield U.complete})).apply(this,arguments)}function et(I,T){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(I,T){const R=us(I),Y=(yield Rn()).transaction(Ce,"readwrite"),ue=Y.objectStore(Ce),Ie=yield ue.get(R),Be=T(Ie);return void 0===Be?yield ue.delete(R):yield ue.put(Be,R),yield Y.complete,Be&&(!Ie||Ie.fid!==Be.fid)&&cs(I,Be.fid),Be})).apply(this,arguments)}function Ut(I){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,k.Z)(function*(I){let T;const R=yield et(I,U=>{const Y=dn(U),ue=Lt(I,Y);return T=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function dn(I){return yt(I||{fid:xn(),registrationStatus:0})}function Lt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(pe.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:R,registrationPromise:function(I,T){return We.apply(this,arguments)}(I,R)}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Sr(I)}:{installationEntry:T}}function We(){return(We=(0,k.Z)(function*(I,T){try{return wi(I,yield St(I,T))}catch(R){throw fe(R)&&409===R.customData.serverCode?yield $r(I):yield wi(I,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Sr(I){return co.apply(this,arguments)}function co(){return(co=(0,k.Z)(function*(I){let T=yield Gt(I);for(;1===T.registrationStatus;)yield ri(100),T=yield Gt(I);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Ut(I);return U||R}return T})).apply(this,arguments)}function Gt(I){return et(I,T=>{if(!T)throw pe.create("installation-not-found");return yt(T)})}function yt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Su(I,T){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)(function*({appConfig:I,platformLoggerProvider:T},R){const U=H(I,R),Y=ln(I,R),ue=T.getImmediate({optional:!0});ue&&Y.append("x-firebase-client",ue.getPlatformInfoString());const Be={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Q}})},$e=yield mt(()=>fetch(U,Be));if($e.ok)return ze(yield $e.json());throw yield Oe("Generate Auth Token",$e)})).apply(this,arguments)}function H(I,{fid:T}){return`${Se(I)}/${T}/authTokens:generate`}function $(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,k.Z)(function*(I,T=!1){let R;const U=yield et(I.appConfig,ue=>{if(!an(ue))throw pe.create("not-registered");const Ie=ue.authToken;if(!T&&Ar(Ie))return ue;if(1===Ie.requestStatus)return R=ie(I,T),ue;{if(!navigator.onLine)throw pe.create("app-offline");const Be=rn(ue);return R=Wt(I,Be),Be}});return R?yield R:U.authToken})).apply(this,arguments)}function ie(I,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(I,T){let R=yield Ve(I.appConfig);for(;1===R.authToken.requestStatus;)yield ri(100),R=yield Ve(I.appConfig);const U=R.authToken;return 0===U.requestStatus?$(I,T):U})).apply(this,arguments)}function Ve(I){return et(I,T=>{if(!an(T))throw pe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Wt(I,T){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(I,T){try{const R=yield Su(I,T),U=Object.assign(Object.assign({},T),{authToken:R});return yield wi(I.appConfig,U),R}catch(R){if(!fe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield wi(I.appConfig,U)}else yield $r(I.appConfig);throw R}})).apply(this,arguments)}function an(I){return void 0!==I&&2===I.registrationStatus}function Ar(I){return 2===I.requestStatus&&!function(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function rn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function lo(){return(lo=(0,k.Z)(function*(I){const T=I,{installationEntry:R,registrationPromise:U}=yield Ut(T.appConfig);return U?U.catch(console.error):$(T).catch(console.error),R.fid})).apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*(I,T=!1){const R=I;return yield Zc(R.appConfig),(yield $(R,T)).token})).apply(this,arguments)}function Zc(I){return ii.apply(this,arguments)}function ii(){return(ii=(0,k.Z)(function*(I){const{registrationPromise:T}=yield Ut(I);T&&(yield T)})).apply(this,arguments)}function tr(I){return pe.create("missing-app-config-values",{valueName:I})}const Sd="installations";(0,ce._registerComponent)(new re.wA(Sd,I=>{const T=I.getProvider("app").getImmediate();return{app:T,appConfig:function(I){if(!I||!I.options)throw tr("App Configuration");if(!I.name)throw tr("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!I.options[R])throw tr(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T),platformLoggerProvider:(0,ce._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new re.wA("installations-internal",I=>{const T=I.getProvider("app").getImmediate(),R=(0,ce._getProvider)(T,Sd).getImmediate();return{getId:()=>function(I){return lo.apply(this,arguments)}(R),getToken:Y=>function(I){return ho.apply(this,arguments)}(R,Y)}},"PRIVATE")),(0,ce.registerVersion)(ee,L),(0,ce.registerVersion)(ee,L,"esm2017");const hn="@firebase/remote-config",Nn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Lf{constructor(T,R,U,Y){this.client=T,this.storage=R,this.storageCache=U,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,Y=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,k.Z)(function*(){const[U,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Y;T.eTag=Y&&Y.eTag;const ue=yield R.client.fetch(T),Ie=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ie.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ie),ue})()}}function Hi(I=navigator){return I.languages&&I.languages[0]||I.language}class fn{constructor(T,R,U,Y,ue,Ie){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=U,this.projectId=Y,this.apiKey=ue,this.appId=Ie}fetch(T){var R=this;return(0,k.Z)(function*(){const[U,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Be={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},$e={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:Y,app_id:R.appId,language_code:Hi()},Ft={method:"POST",headers:Be,body:JSON.stringify($e)},zt=fetch(Ie,Ft),Tn=new Promise((Es,Ri)=>{T.signal.addEventListener(()=>{const _n=new Error("The operation was aborted.");_n.name="AbortError",Ri(_n)})});let Pn;try{yield Promise.race([zt,Tn]),Pn=yield zt}catch(Es){let Ri="fetch-client-network";throw"AbortError"===Es.name&&(Ri="fetch-timeout"),Nn.create(Ri,{originalErrorMessage:Es.message})}let or=Pn.status;const di=Pn.headers.get("ETag")||void 0;let Nr,Wr;if(200===Pn.status){let Es;try{Es=yield Pn.json()}catch(Ri){throw Nn.create("fetch-client-parse",{originalErrorMessage:Ri.message})}Nr=Es.entries,Wr=Es.state}if("INSTANCE_STATE_UNSPECIFIED"===Wr?or=500:"NO_CHANGE"===Wr?or=304:("NO_TEMPLATE"===Wr||"EMPTY_CONFIG"===Wr)&&(Nr={}),304!==or&&200!==or)throw Nn.create("fetch-status",{httpStatus:or});return{status:or,eTag:di,config:Nr}})()}}class Ko{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:U}){var Y=this;return(0,k.Z)(function*(){yield function(I,T){return new Promise((R,U)=>{const Y=Math.max(T-Date.now(),0),ue=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ue),U(Nn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ue=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(I){if(!(I instanceof te.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Ie={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(Ie),Y.attemptFetch(T,Ie)}})()}}class sm{constructor(T,R,U,Y,ue){this.app=T,this._client=R,this._storageCache=U,this._storage=Y,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zo(I,T){const R=I.target.error||void 0;return Nn.create(T,{originalErrorMessage:R&&R.message})}const mo="app_namespace_store";class om{constructor(T,R,U,Y=function(){return new Promise((I,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{T(Zo(U,"storage-open"))},R.onsuccess=U=>{I(U.target.result)},R.onupgradeneeded=U=>{const Y=U.target.result;switch(U.oldVersion){case 0:Y.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(R){T(Nn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Y,ue)=>{const Be=U.transaction([mo],"readonly").objectStore(mo),$e=R.createCompositeKey(T);try{const Ft=Be.get($e);Ft.onerror=zt=>{ue(Zo(zt,"storage-get"))},Ft.onsuccess=zt=>{const Tn=zt.target.result;Y(Tn?Tn.value:void 0)}}catch(Ft){ue(Nn.create("storage-get",{originalErrorMessage:Ft&&Ft.message}))}})})()}set(T,R){var U=this;return(0,k.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((ue,Ie)=>{const $e=Y.transaction([mo],"readwrite").objectStore(mo),Ft=U.createCompositeKey(T);try{const zt=$e.put({compositeKey:Ft,value:R});zt.onerror=Tn=>{Ie(Zo(Tn,"storage-set"))},zt.onsuccess=()=>{ue()}}catch(zt){Ie(Nn.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Y,ue)=>{const Be=U.transaction([mo],"readwrite").objectStore(mo),$e=R.createCompositeKey(T);try{const Ft=Be.delete($e);Ft.onerror=zt=>{ue(Zo(zt,"storage-delete"))},Ft.onsuccess=()=>{Y()}}catch(Ft){ue(Nn.create("storage-delete",{originalErrorMessage:Ft&&Ft.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Md{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ue=yield R;ue&&(T.lastFetchStatus=ue);const Ie=yield U;Ie&&(T.lastSuccessfulFetchTimestampMillis=Ie);const Be=yield Y;Be&&(T.activeConfig=Be)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Qc(){return Od.apply(this,arguments)}function Od(){return(Od=(0,k.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("remote-config",function(T,{instanceIdentifier:R}){const U=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Nn.create("registration-window");if(!(0,te.hl)())throw Nn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ie,appId:Be}=U.options;if(!ue)throw Nn.create("registration-project-id");if(!Ie)throw Nn.create("registration-api-key");if(!Be)throw Nn.create("registration-app-id");const $e=new om(Be,U.name,R=R||"firebase"),Ft=new Md($e),zt=new ge.Yd(hn);zt.logLevel=ge.in.ERROR;const Tn=new fn(Y,ce.SDK_VERSION,R,ue,Ie,Be),Pn=new Ko(Tn,$e),or=new Lf(Pn,$e,Ft,zt),di=new sm(U,or,Ft,$e,zt);return function(I){const T=(0,te.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(di),di},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(hn,"0.3.3"),(0,ce.registerVersion)(hn,"0.3.3","esm2017");const kd="/firebase-messaging-sw.js",um="/firebase-cloud-messaging-push-scope",ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",La="google.c.a.c_id",Yo="google.c.a.c_l",hs="google.c.a.ts",Jc="google.c.a.e";var pn=(()=>{return(I=pn||(pn={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",pn;var I})();function Gi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ru(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),Y=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)Y[ue]=U.charCodeAt(ue);return Y}const Fa="fcm_token_details_db",Vf="fcm_token_object_Store";function Xc(I){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Fa))return null;let T=null;return(yield(0,ae.openDb)(Fa,5,function(){var U=(0,k.Z)(function*(Y){var ue;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Vf))return;const Ie=Y.transaction.objectStore(Vf),Be=yield Ie.index("fcmSenderId").get(I);if(yield Ie.clear(),Be)if(2===Y.oldVersion){const $e=Be;if(!$e.auth||!$e.p256dh||!$e.endpoint)return;T={token:$e.fcmToken,createTime:null!==(ue=$e.createTime)&&void 0!==ue?ue:Date.now(),subscriptionOptions:{auth:$e.auth,p256dh:$e.p256dh,endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:"string"==typeof $e.vapidKey?$e.vapidKey:Gi($e.vapidKey)}}}else if(3===Y.oldVersion){const $e=Be;T={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Gi($e.auth),p256dh:Gi($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Gi($e.vapidKey)}}}else if(4===Y.oldVersion){const $e=Be;T={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Gi($e.auth),p256dh:Gi($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Gi($e.vapidKey)}}}});return function(Y){return U.apply(this,arguments)}}())).close(),yield(0,ae.deleteDb)(Fa),yield(0,ae.deleteDb)("fcm_vapid_details_db"),yield(0,ae.deleteDb)("undefined"),Uf(T)?T:null})).apply(this,arguments)}function Uf(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Kn="firebase-messaging-store";let Ua=null;function Fs(){return Ua||(Ua=(0,ae.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Kn)}})),Ua}function ja(I){return fs.apply(this,arguments)}function fs(){return(fs=(0,k.Z)(function*(I){const T=Ba(I),U=yield(yield Fs()).transaction(Kn).objectStore(Kn).get(T);if(U)return U;{const Y=yield Xc(I.appConfig.senderId);if(Y)return yield Hr(I,Y),Y}})).apply(this,arguments)}function Hr(I,T){return zi.apply(this,arguments)}function zi(){return(zi=(0,k.Z)(function*(I,T){const R=Ba(I),Y=(yield Fs()).transaction(Kn,"readwrite");return yield Y.objectStore(Kn).put(T,R),yield Y.complete,T})).apply(this,arguments)}function Yt(I){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(I){const T=Ba(I),U=(yield Fs()).transaction(Kn,"readwrite");yield U.objectStore(Kn).delete(T),yield U.complete})).apply(this,arguments)}function Ba({appConfig:I}){return I.appId}const wt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jo(I,T){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,k.Z)(function*(I,T){const R=yield nr(I),U=Xo(T),Y={method:"POST",headers:R,body:JSON.stringify(U)};let ue;try{ue=yield(yield fetch($n(I.appConfig),Y)).json()}catch(Ie){throw wt.create("token-subscribe-failed",{errorInfo:Ie})}if(ue.error)throw wt.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw wt.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function _o(I,T){return xr.apply(this,arguments)}function xr(){return(xr=(0,k.Z)(function*(I,T){const R=yield nr(I),U=Xo(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(U)};let ue;try{ue=yield(yield fetch(`${$n(I.appConfig)}/${T.token}`,Y)).json()}catch(Ie){throw wt.create("token-update-failed",{errorInfo:Ie})}if(ue.error)throw wt.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw wt.create("token-update-no-token");return ue.token})).apply(this,arguments)}function jd(I,T){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(I,T){const U={method:"DELETE",headers:yield nr(I)};try{const ue=yield(yield fetch(`${$n(I.appConfig)}/${T}`,U)).json();if(ue.error)throw wt.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(Y){throw wt.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function $n({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function nr(I){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,k.Z)(function*({appConfig:I,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Xo({p256dh:I,auth:T,endpoint:R,vapidKey:U}){const Y={web:{endpoint:R,auth:T,p256dh:I}};return U!==ka&&(Y.web.applicationPubKey=U),Y}const $a=6048e5;function ps(I){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,k.Z)(function*(I){const T=yield Ou(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Gi(T.getKey("auth")),p256dh:Gi(T.getKey("p256dh"))},U=yield ja(I.firebaseDependencies);if(U){if(el(U.subscriptionOptions,R))return Date.now()>=U.createTime+$a?Bd(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield jd(I.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return Vs(I.firebaseDependencies,R)}return Vs(I.firebaseDependencies,R)})).apply(this,arguments)}function Pu(I){return nt.apply(this,arguments)}function nt(){return(nt=(0,k.Z)(function*(I){const T=yield ja(I.firebaseDependencies);T&&(yield jd(I.firebaseDependencies,T.token),yield Yt(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Bd(I,T){return gs.apply(this,arguments)}function gs(){return(gs=(0,k.Z)(function*(I,T){try{const R=yield _o(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Hr(I.firebaseDependencies,U),R}catch(R){throw yield Pu(I),R}})).apply(this,arguments)}function Vs(I,T){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(I,T){const U={token:yield Jo(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Hr(I,U),U.token})).apply(this,arguments)}function Ou(I,T){return ms.apply(this,arguments)}function ms(){return(ms=(0,k.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ru(T)})})).apply(this,arguments)}function el(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function be(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,T){if(!T.notification)return;I.notification={};const R=T.notification.title;R&&(I.notification.title=R);const U=T.notification.body;U&&(I.notification.body=U);const Y=T.notification.image;Y&&(I.notification.image=Y)}(T,I),function(I,T){!T.data||(I.data=T.data)}(T,I),function(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const R=T.fcmOptions.link;R&&(I.fcmOptions.link=R);const U=T.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(T,I),T}function Lu(I){return"object"==typeof I&&!!I&&La in I}function Eo(I,T){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<T.length&&R.push(T.charAt(U));return R.join("")}function Ga(I){return wt.create("missing-app-config-values",{valueName:I})}Eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Us{constructor(T,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function(I){if(!I||!I.options)throw Ga("App Configuration Object");if(!I.name)throw Ga("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of T)if(!R[U])throw Ga(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function $d(I){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(kd,{scope:um}),I.swRegistration.update().catch(()=>{})}catch(T){throw wt.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ys(I,T){return qi.apply(this,arguments)}function qi(){return(qi=(0,k.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield $d(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw wt.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Zn(I,T){return ui.apply(this,arguments)}function ui(){return(ui=(0,k.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=ka)})).apply(this,arguments)}function js(){return(js=(0,k.Z)(function*(I,T){if(!navigator)throw wt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wt.create("permission-blocked");return yield Zn(I,null==T?void 0:T.vapidKey),yield ys(I,null==T?void 0:T.serviceWorkerRegistration),ps(I)})).apply(this,arguments)}function Ii(I,T,R){return tl.apply(this,arguments)}function tl(){return(tl=(0,k.Z)(function*(I,T,R){const U=Vu(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[La],message_name:R[Yo],message_time:R[hs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vu(I){switch(I){case pn.NOTIFICATION_CLICKED:return"notification_open";case pn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ta(){return(ta=(0,k.Z)(function*(I,T){const R=T.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===pn.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(be(R)):I.onMessageHandler.next(be(R)));const U=R.data;Lu(U)&&"1"===U[Jc]&&(yield Ii(I,R.messageType,U))})).apply(this,arguments)}const ju="@firebase/messaging";function Gd(){return _s.apply(this,arguments)}function _s(){return(_s=(0,k.Z)(function*(){return"undefined"!=typeof window&&(0,te.hl)()&&(yield(0,te.eu)())&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("messaging",I=>{const T=new Us(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(I,T){return ta.apply(this,arguments)}(T,R)),T},"PUBLIC")),(0,ce._registerComponent)(new re.wA("messaging-internal",I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,T){return js.apply(this,arguments)}(T,U)}},"PRIVATE")),(0,ce.registerVersion)(ju,"0.9.4"),(0,ce.registerVersion)(ju,"0.9.4","esm2017");const Gr="analytics",un="firebase_id",qa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qd="https://www.googletagmanager.com/gtag/js",Mn=new ge.Yd("@firebase/analytics");function Kd(I){return Promise.all(I.map(T=>T.catch(R=>R)))}function Gu(I,T){const R=document.createElement("script");R.src=`${qd}?l=${I}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Za(I,T,R,U,Y,ue){return zu.apply(this,arguments)}function zu(){return(zu=(0,k.Z)(function*(I,T,R,U,Y,ue){const Ie=U[Y];try{if(Ie)yield T[Ie];else{const $e=(yield Kd(R)).find(Ft=>Ft.measurementId===Y);$e&&(yield T[$e.appId])}}catch(Be){Mn.error(Be)}I("config",Y,ue)})).apply(this,arguments)}function wo(I,T,R,U,Y){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,k.Z)(function*(I,T,R,U,Y){try{let ue=[];if(Y&&Y.send_to){let Ie=Y.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Be=yield Kd(R);for(const $e of Ie){const Ft=Be.find(Tn=>Tn.measurementId===$e),zt=Ft&&T[Ft.appId];if(!zt){ue=[];break}ue.push(zt)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),I("event",U,Y||{})}catch(ue){Mn.error(ue)}})).apply(this,arguments)}function lm(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(qd))return T;return null}const rr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hm=new class{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function sv(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Qa(I){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(I){var T;const{appId:R,apiKey:U}=I,Y={method:"GET",headers:sv(U)},ue=qa.replace("{app-id}",R),Ie=yield fetch(ue,Y);if(200!==Ie.status&&304!==Ie.status){let Be="";try{const $e=yield Ie.json();(null===(T=$e.error)||void 0===T?void 0:T.message)&&(Be=$e.error.message)}catch($e){}throw rr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Be})}return Ie.json()})).apply(this,arguments)}function Ku(I){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,k.Z)(function*(I,T=hm,R){const{appId:U,apiKey:Y,measurementId:ue}=I.options;if(!U)throw rr.create("no-app-id");if(!Y){if(ue)return{measurementId:ue,appId:U};throw rr.create("no-api-key")}const Ie=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Xa;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==R?R:6e4),Zu({appId:U,apiKey:Y,measurementId:ue},Ie,Be,T)})).apply(this,arguments)}function Zu(I,T,R){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,k.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:R},U,Y=hm){const{appId:ue,measurementId:Ie}=I;try{yield Ja(U,T)}catch(Be){if(Ie)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ue,measurementId:Ie};throw Be}try{const Be=yield Qa(I);return Y.deleteThrottleMetadata(ue),Be}catch(Be){if(!zf(Be)){if(Y.deleteThrottleMetadata(ue),Ie)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ue,measurementId:Ie};throw Be}const $e=503===Number(Be.customData.httpStatus)?(0,te.$s)(R,Y.intervalMillis,30):(0,te.$s)(R,Y.intervalMillis),Ft={throttleEndTimeMillis:Date.now()+$e,backoffCount:R+1};return Y.setThrottleMetadata(ue,Ft),Mn.debug(`Calling attemptFetch again in ${$e} millis`),Zu(I,Ft,U,Y)}})).apply(this,arguments)}function Ja(I,T){return new Promise((R,U)=>{const Y=Math.max(T-Date.now(),0),ue=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ue),U(rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function zf(I){if(!(I instanceof te.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Xa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Qu(){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(){if(!(0,te.hl)())return Mn.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Mn.warn(rr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(I,T,R,U,Y,ue,Ie){var Be;const $e=Ku(I);$e.then(or=>{R[or.measurementId]=or.appId,I.options.measurementId&&or.measurementId!==I.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${or.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(or=>Mn.error(or)),T.push($e);const Ft=Qu().then(or=>{if(or)return U.getId()}),[zt,Tn]=yield Promise.all([$e,Ft]);lm()||Gu(ue,zt.measurementId),Y("js",new Date);const Pn=null!==(Be=null==Ie?void 0:Ie.config)&&void 0!==Be?Be:{};return Pn.origin="firebase",Pn.update=!0,null!=Tn&&(Pn[un]=Tn),Y("config",zt.measurementId,Pn),zt.measurementId})).apply(this,arguments)}class Qe{constructor(T){this.app=T}_delete(){return delete mn[this.app.options.appId],Promise.resolve()}}let mn={},ir=[];const ci={};let Ju,_r,yr="dataLayer",st=!1;function Ki(I,T,R){!function(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),R=rr.create("invalid-analytics-context",{errorInfo:T});Mn.warn(R.message)}}();const U=I.options.appId;if(!U)throw rr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw rr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mn[U])throw rr.create("already-exists",{id:U});if(!st){!function(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(yr);const{wrappedGtag:ue,gtagCore:Ie}=function(I,T,R,U,Y){let ue=function(...Ie){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ue=window[Y]),window[Y]=function(I,T,R,U){function ue(){return(ue=(0,k.Z)(function*(Ie,Be,$e){try{"event"===Ie?yield wo(I,T,R,Be,$e):"config"===Ie?yield Za(I,T,R,U,Be,$e):I("set",Be)}catch(Ft){Mn.error(Ft)}})).apply(this,arguments)}return function(Ie,Be,$e){return ue.apply(this,arguments)}}(ue,I,T,R),{gtagCore:ue,wrappedGtag:window[Y]}}(mn,ir,ci,yr,"gtag");_r=ue,Ju=Ie,st=!0}return mn[U]=function(I,T,R,U,Y,ue,Ie){return ra.apply(this,arguments)}(I,ir,ci,T,Ju,yr,R),new Qe(I)}function nl(){return(nl=(0,k.Z)(function*(I,T,R,U,Y){if(Y&&Y.global)I("event",R,U);else{const ue=yield T;I("event",R,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function Zi(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const il="@firebase/analytics";(0,ce._registerComponent)(new re.wA(Gr,(T,{options:R})=>Ki(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new re.wA("analytics-internal",function(T){try{const R=T.getProvider(Gr).getImmediate();return{logEvent:(U,Y,ue)=>function(I,T,R,U){I=(0,te.m9)(I),function(I,T,R,U,Y){return nl.apply(this,arguments)}(_r,mn[I.app.options.appId],T,R,U).catch(Y=>Mn.error(Y))}(R,U,Y,ue)}}catch(R){throw rr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(il,"0.7.4"),(0,ce.registerVersion)(il,"0.7.4","esm2017");var Wf=F(7771),Qt=F(3637),qf=F(3342),Kf=F(3101),ov=F(309);const Zf=new v.GfV("7.2.0"),Qd="__angularfire_symbol__analyticsIsSupported",Qf="__angularfire_symbol__remoteConfigIsSupported",tu="__angularfire_symbol__messagingIsSupported";function rc(I,T,R){if(T){if(1===T.length)return T[0];const ue=T.filter(Ie=>Ie.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Qd]||(globalThis[Qd]=Zi().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[tu]||(globalThis[tu]=Gd().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Qf]||(globalThis[Qf]=Qc().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const ua=(I,T)=>{const R=T?[T]:(0,X.C6)(),U=[];return R.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Ie=>{U.includes(Ie)||U.push(Ie)})}),U};function nu(){}class ep{constructor(T,R=Wf.N){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,U){const Y=this.zone;return this.delegate.schedule(function(Ie){Y.runGuarded(()=>{T.apply(this,[Ie])})},R,U)}}class Ti{constructor(T){this.zone=T,this.task=null}call(T,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nu,{},nu,nu)),R.pipe((0,qf.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Si=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ep(Zone.current)),this.insideAngular=R.run(()=>new ep(Zone.current,Qt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(v.LFG(v.R0b))},I.\u0275prov=v.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ai(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function xi(I){return Ai(),function(I){return function(R){return(R=R.lift(new Ti(I.ngZone))).pipe((0,Kf.R)(I.outsideAngular),(0,ov.QV)(I.insideAngular))}}(Ai())(I)}},3854:(Je,Ee,F)=>{"use strict";F.d(Ee,{BH:()=>Z,LL:()=>Ze,ZR:()=>St,zI:()=>_t,US:()=>re,tV:()=>ee,$s:()=>Gt,r3:()=>on,Sg:()=>oe,ne:()=>er,vZ:()=>Vt,ZB:()=>V,pd:()=>pr,m9:()=>Su,z$:()=>we,jU:()=>me,ru:()=>pe,d:()=>Se,xb:()=>zn,w1:()=>ze,hl:()=>ln,uI:()=>he,UG:()=>K,b$:()=>fe,G6:()=>pt,Mn:()=>Oe,xO:()=>Ma,zd:()=>Tr,eu:()=>mt});const ce=function(G){const H=[];let $=0;for(let ve=0;ve<G.length;ve++){let ie=G.charCodeAt(ve);ie<128?H[$++]=ie:ie<2048?(H[$++]=ie>>6|192,H[$++]=63&ie|128):55296==(64512&ie)&&ve+1<G.length&&56320==(64512&G.charCodeAt(ve+1))?(ie=65536+((1023&ie)<<10)+(1023&G.charCodeAt(++ve)),H[$++]=ie>>18|240,H[$++]=ie>>12&63|128,H[$++]=ie>>6&63|128,H[$++]=63&ie|128):(H[$++]=ie>>12|224,H[$++]=ie>>6&63|128,H[$++]=63&ie|128)}return H},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ie=0;ie<G.length;ie+=3){const Ue=G[ie],Ve=ie+1<G.length,Wt=Ve?G[ie+1]:0,jn=ie+2<G.length,an=jn?G[ie+2]:0;let rn=(15&Wt)<<2|an>>6,ji=63&an;jn||(ji=64,Ve||(rn=64)),ve.push($[Ue>>2],$[(3&Ue)<<4|Wt>>4],$[rn],$[ji])}return ve.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ce(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let $=0,ve=0;for(;$<G.length;){const ie=G[$++];if(ie<128)H[ve++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ue=G[$++];H[ve++]=String.fromCharCode((31&ie)<<6|63&Ue)}else if(ie>239&&ie<365){const jn=((7&ie)<<18|(63&G[$++])<<12|(63&G[$++])<<6|63&G[$++])-65536;H[ve++]=String.fromCharCode(55296+(jn>>10)),H[ve++]=String.fromCharCode(56320+(1023&jn))}else{const Ue=G[$++],Ve=G[$++];H[ve++]=String.fromCharCode((15&ie)<<12|(63&Ue)<<6|63&Ve)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const $=H?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ie=0;ie<G.length;){const Ue=$[G.charAt(ie++)],Wt=ie<G.length?$[G.charAt(ie)]:0;++ie;const an=ie<G.length?$[G.charAt(ie)]:64;++ie;const At=ie<G.length?$[G.charAt(ie)]:64;if(++ie,null==Ue||null==Wt||null==an||null==At)throw Error();ve.push(Ue<<2|Wt>>4),64!==an&&(ve.push(Wt<<4&240|an>>2),64!==At&&ve.push(an<<6&192|At))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ae=function(G){return function(G){const H=ce(G);return re.encodeByteArray(H,!0)}(G).replace(/\./g,"")},ee=function(G){try{return re.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function V(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const $ in H)!H.hasOwnProperty($)||!Q($)||(G[$]=V(G[$],H[$]));return G}function Q(G){return"__proto__"!==G}class Z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,$)=>{this.resolve=H,this.reject=$})}wrapCallback(H){return($,ve)=>{$?this.reject($):this.resolve(ve),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H($):H($,ve))}}}function oe(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=H||"demo-project",ie=G.iat||0,Ue=G.sub||G.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ie,exp:ie+3600,auth_time:ie,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ve)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function me(){return"object"==typeof self&&self.self===self}function pe(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return we().indexOf("Electron/")>=0}function ze(){const G=we();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Oe(){return we().indexOf("MSAppHost/")>=0}function pt(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ln(){return"object"==typeof indexedDB}function mt(){return new Promise((G,H)=>{try{let $=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(ve);ie.onsuccess=()=>{ie.result.close(),$||self.indexedDB.deleteDatabase(ve),G(!0)},ie.onupgradeneeded=()=>{$=!1},ie.onerror=()=>{var Ue;H((null===(Ue=ie.error)||void 0===Ue?void 0:Ue.message)||"")}}catch($){H($)}})}function _t(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class St extends Error{constructor(H,$,ve){super($),this.code=H,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(H,$,ve){this.service=H,this.serviceName=$,this.errors=ve}create(H,...$){const ve=$[0]||{},ie=`${this.service}/${H}`,Ue=this.errors[H],Ve=Ue?function(G,H){return G.replace(As,($,ve)=>{const ie=H[ve];return null!=ie?String(ie):`<${ve}?>`})}(Ue,ve):"Error";return new St(ie,`${this.serviceName}: ${Ve} (${ie}).`,ve)}}const As=/\{\$([^}]+)}/g;function on(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function zn(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Vt(G,H){if(G===H)return!0;const $=Object.keys(G),ve=Object.keys(H);for(const ie of $){if(!ve.includes(ie))return!1;const Ue=G[ie],Ve=H[ie];if(Et(Ue)&&Et(Ve)){if(!Vt(Ue,Ve))return!1}else if(Ue!==Ve)return!1}for(const ie of ve)if(!$.includes(ie))return!1;return!0}function Et(G){return null!==G&&"object"==typeof G}function Ma(G){const H=[];for(const[$,ve]of Object.entries(G))Array.isArray(ve)?ve.forEach(ie=>{H.push(encodeURIComponent($)+"="+encodeURIComponent(ie))}):H.push(encodeURIComponent($)+"="+encodeURIComponent(ve));return H.length?"&"+H.join("&"):""}function Tr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ie,Ue]=ve.split("=");H[decodeURIComponent(ie)]=decodeURIComponent(Ue)}}),H}function pr(G){const H=G.indexOf("?");if(!H)return"";const $=G.indexOf("#",H);return G.substring(H,$>0?$:void 0)}function er(G,H){const $=new Rn(G,H);return $.subscribe.bind($)}class Rn{constructor(H,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{H(this)}).catch(ve=>{this.error(ve)})}next(H){this.forEachObserver($=>{$.next(H)})}error(H){this.forEachObserver($=>{$.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,$,ve){let ie;if(void 0===H&&void 0===$&&void 0===ve)throw new Error("Missing Observer.");ie=function(G,H){if("object"!=typeof G||null===G)return!1;for(const $ of["next","error","complete"])if($ in G&&"function"==typeof G[$])return!0;return!1}(H)?H:{next:H,error:$,complete:ve},void 0===ie.next&&(ie.next=$r),void 0===ie.error&&(ie.error=$r),void 0===ie.complete&&(ie.complete=$r);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(Ve){}}),this.observers.push(ie),Ue}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,H)}sendOne(H,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{$(this.observers[H])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $r(){}function Gt(G,H=1e3,$=2){const ve=H*Math.pow($,G),ie=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+ie)}function Su(G){return G&&G._delegate?G._delegate:G}},2329:(Je,Ee,F)=>{"use strict";F.d(Ee,{Mq:()=>v.getApp,C6:()=>v.getApps});var v=F(8026);(0,v.registerVersion)("firebase","9.6.0","app")},7841:(Je,Ee,F)=>{"use strict";F.d(Ee,{Z:()=>v.Z});var v=F(3394);v.Z.registerVersion("firebase","9.6.0","app-compat")},941:(Je,Ee,F)=>{"use strict";F.r(Ee);var v=F(8239),X=F(3394),k=F(3854),ce=F(8026);function ae(m,h){var f={};for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&h.indexOf(E)<0&&(f[E]=m[E]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(m);D<E.length;D++)h.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(m,E[D])&&(f[E[D]]=m[E[D]])}return f}var St=F(5422),Ze=F(3910);const Rs=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},cs=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},on=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zn=new St.Yd("@firebase/auth");function Ns(m,...h){zn.logLevel<=St.in.ERROR&&zn.error(`Auth (${ce.SDK_VERSION}): ${m}`,...h)}function Vt(m,...h){throw pr(m,...h)}function Et(m,...h){return pr(m,...h)}function Ma(m,h,f){const E=Object.assign(Object.assign({},cs()),{[h]:f});return new k.LL("auth","Firebase",E).create(h,{appName:m.name})}function Tr(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Vt(m,"argument-error"),Ma(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pr(m,...h){if("string"!=typeof m){const f=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return on.create(m,...h)}function Ce(m,h,...f){if(!m)throw pr(h,...f)}function er(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ns(h),new Error(h)}function Rn(m,h){m||er(h)}const wi=new Map;function Mt(m){Rn(m instanceof Function,"Expected a class definition");let h=wi.get(m);return h?(Rn(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,wi.set(m,h),h)}function et(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function De(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Lt{constructor(h,f){this.shortDelay=h,this.longDelay=f,Rn(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(De()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ye(m,h){Rn(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class We{static initialize(h,f,E){this.fetchImpl=h,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},co=new Lt(3e4,6e4);function Gt(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function yt(m,h,f,E){return gr.apply(this,arguments)}function gr(){return(gr=(0,v.Z)(function*(m,h,f,E,D={}){return Su(m,D,()=>{let x={},B={};E&&("GET"===h?B=E:x={body:JSON.stringify(E)});const ne=(0,k.xO)(Object.assign({key:m.config.apiKey},B)).slice(1),Ne=new(We.headers());return Ne.set("Content-Type","application/json"),Ne.set("X-Client-Version",m._getSdkClientVersion()),m.languageCode&&Ne.set("X-Firebase-Locale",m.languageCode),We.fetch()(ve(m,m.config.apiHost,f,ne),Object.assign({method:h,headers:Ne,referrerPolicy:"no-referrer"},x))})})).apply(this,arguments)}function Su(m,h,f){return G.apply(this,arguments)}function G(){return(G=(0,v.Z)(function*(m,h,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},Sr),h);try{const D=new ie(m),x=yield Promise.race([f(),D.promise]);D.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Ue(m,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const ne=x.ok?B.errorMessage:B.error.message,[Ne,xe]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Ue(m,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ne)throw Ue(m,"email-already-in-use",B);const He=E[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(xe)throw Ma(m,He,xe);Vt(m,He)}}catch(D){if(D instanceof k.ZR)throw D;Vt(m,"network-request-failed")}})).apply(this,arguments)}function H(m,h,f,E){return $.apply(this,arguments)}function $(){return($=(0,v.Z)(function*(m,h,f,E,D={}){const x=yield yt(m,h,f,E,D);return"mfaPendingCredential"in x&&Vt(m,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function ve(m,h,f,E){const D=`${h}${f}?${E}`;return m.config.emulator?Ye(m.config,D):`${m.config.apiScheme}://${D}`}class ie{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(Et(this.auth,"timeout")),co.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ue(m,h,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const D=Et(m,h,E);return D.customData._tokenResponse=f,D}function Wt(){return(Wt=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jn(m,h){return an.apply(this,arguments)}function an(){return(an=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ar(m,h){return At.apply(this,arguments)}function At(){return(At=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function rn(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function lo(){return(lo=(0,v.Z)(function*(m,h=!1){const f=(0,k.m9)(m),E=yield f.getIdToken(h),D=ho(E);Ce(D&&D.exp&&D.auth_time&&D.iat,f.auth,"internal-error");const x="object"==typeof D.firebase?D.firebase:void 0,B=null==x?void 0:x.sign_in_provider;return{claims:D,token:E,authTime:rn(Kc(D.auth_time)),issuedAtTime:rn(Kc(D.iat)),expirationTime:rn(Kc(D.exp)),signInProvider:B||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Kc(m){return 1e3*Number(m)}function ho(m){const[h,f,E]=m.split(".");if(void 0===h||void 0===f||void 0===E)return Ns("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,k.tV)(f);return D?JSON.parse(D):(Ns("Failed to decode base64 JWT payload"),null)}catch(D){return Ns("Caught error parsing JWT payload as JSON",D),null}}function ii(m,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,v.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(E){throw E instanceof k.ZR&&fo(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function fo({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Go{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const D=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield f.iteration()}),E)}iteration(){var h=this;return(0,v.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&h.schedule(!0))}h.schedule()})()}}class Td{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=rn(this.lastLoginAt),this.creationTime=rn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ms(m){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,v.Z)(function*(m){var h;const f=m.auth,E=yield m.getIdToken(),D=yield ii(m,Ar(f,{idToken:E}));Ce(null==D?void 0:D.users.length,f,"internal-error");const x=D.users[0];m._notifyReloadListener(x);const B=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?Sd(x.providerUserInfo):[],ne=tr(m.providerData,B),He=!!m.isAnonymous&&!(m.email&&x.passwordHash||(null==ne?void 0:ne.length)),Fe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ne,metadata:new Td(x.createdAt,x.lastLoginAt),isAnonymous:He};Object.assign(m,Fe)})).apply(this,arguments)}function ls(){return(ls=(0,v.Z)(function*(m){const h=(0,k.m9)(m);yield Ms(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function tr(m,h){return[...m.filter(E=>!h.some(D=>D.providerId===E.providerId)),...h]}function Sd(m){return m.map(h=>{var{providerId:f}=h,E=ae(h,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ke(){return(ke=(0,v.Z)(function*(m,h){const f=yield Su(m,{},()=>{const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:D,apiKey:x}=m.config,B=ve(m,D,"/v1/token",`key=${x}`);return We.fetch()(B,{method:"POST",headers:{"X-Client-Version":m._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:E})});return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class at{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Ce(h.idToken,"internal-error"),Ce(void 0!==h.idToken,"internal-error"),Ce(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(m){const h=ho(m);return Ce(h,"internal-error"),Ce(void 0!==h.exp,"internal-error"),Ce(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var E=this;return(0,v.Z)(function*(){return Ce(!E.accessToken||E.refreshToken,h,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var E=this;return(0,v.Z)(function*(){const{accessToken:D,refreshToken:x,expiresIn:B}=yield function(m,h){return ke.apply(this,arguments)}(h,f);E.updateTokensAndExpiration(D,x,Number(B))})()}updateTokensAndExpiration(h,f,E){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,f){const{refreshToken:E,accessToken:D,expirationTime:x}=f,B=new at;return E&&(Ce("string"==typeof E,"internal-error",{appName:h}),B.refreshToken=E),D&&(Ce("string"==typeof D,"internal-error",{appName:h}),B.accessToken=D),x&&(Ce("number"==typeof x,"internal-error",{appName:h}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new at,this.toJSON())}_performRefresh(){return er("not implemented")}}function jt(m,h){Ce("string"==typeof m||void 0===m,"internal-error",{appName:h})}class hn{constructor(h){var{uid:f,auth:E,stsTokenManager:D}=h,x=ae(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Go(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.metadata=new Td(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,v.Z)(function*(){const E=yield ii(f,f.stsTokenManager.getToken(f.auth,h));return Ce(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(h){return function(m){return lo.apply(this,arguments)}(this,h)}reload(){return function(m){return ls.apply(this,arguments)}(this)}_assign(h){this!==h&&(Ce(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new hn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var E=this;return(0,v.Z)(function*(){let D=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),D=!0),f&&(yield Ms(E)),yield E.auth._persistUserIfCurrent(E),D&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,v.Z)(function*(){const f=yield h.getIdToken();return yield ii(h,function(m,h){return Wt.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var E,D,x,B,ne,Ne,xe,He;const Fe=null!==(E=f.displayName)&&void 0!==E?E:void 0,Dt=null!==(D=f.email)&&void 0!==D?D:void 0,kn=null!==(x=f.phoneNumber)&&void 0!==x?x:void 0,Pi=null!==(B=f.photoURL)&&void 0!==B?B:void 0,ma=null!==(ne=f.tenantId)&&void 0!==ne?ne:void 0,Um=null!==(Ne=f._redirectEventId)&&void 0!==Ne?Ne:void 0,du=null!==(xe=f.createdAt)&&void 0!==xe?xe:void 0,bh=null!==(He=f.lastLoginAt)&&void 0!==He?He:void 0,{uid:Ih,emailVerified:bl,isAnonymous:Il,providerData:Ch,stsTokenManager:gc}=f;Ce(Ih&&gc,h,"internal-error");const jm=at.fromJSON(this.name,gc);Ce("string"==typeof Ih,h,"internal-error"),jt(Fe,h.name),jt(Dt,h.name),Ce("boolean"==typeof bl,h,"internal-error"),Ce("boolean"==typeof Il,h,"internal-error"),jt(kn,h.name),jt(Pi,h.name),jt(ma,h.name),jt(Um,h.name),jt(du,h.name),jt(bh,h.name);const mc=new hn({uid:Ih,auth:h,email:Dt,emailVerified:bl,displayName:Fe,isAnonymous:Il,photoURL:Pi,phoneNumber:kn,tenantId:ma,stsTokenManager:jm,createdAt:du,lastLoginAt:bh});return Ch&&Array.isArray(Ch)&&(mc.providerData=Ch.map(Bm=>Object.assign({},Bm))),Um&&(mc._redirectEventId=Um),mc}static _fromIdTokenResponse(h,f,E=!1){return(0,v.Z)(function*(){const D=new at;D.updateFromServerResponse(f);const x=new hn({uid:f.localId,auth:h,stsTokenManager:D,isAnonymous:E});return yield Ms(x),x})()}}const tn=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(f,E){var D=this;return(0,v.Z)(function*(){D.storage[f]=E})()}_get(f){var E=this;return(0,v.Z)(function*(){const D=E.storage[f];return void 0===D?null:D})()}_remove(f){var E=this;return(0,v.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function Wn(m,h,f){return`firebase:${m}:${h}:${f}`}class Kt{constructor(h,f,E){this.persistence=h,this.auth=f,this.userKey=E;const{config:D,name:x}=this.auth;this.fullUserKey=Wn(this.userKey,D.apiKey,x),this.fullPersistenceKey=Wn("persistence",D.apiKey,x),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?hn._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,v.Z)(function*(){if(f.persistence===h)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,E="authUser"){return(0,v.Z)(function*(){if(!f.length)return new Kt(Mt(tn),h,E);const D=(yield Promise.all(f.map(function(){var xe=(0,v.Z)(function*(He){if(yield He._isAvailable())return He});return function(He){return xe.apply(this,arguments)}}()))).filter(xe=>xe);let x=D[0]||Mt(tn);const B=Wn(E,h.config.apiKey,h.name);let ne=null;for(const xe of f)try{const He=yield xe._get(B);if(He){const Fe=hn._fromJSON(h,He);xe!==x&&(ne=Fe),x=xe;break}}catch(He){}const Ne=D.filter(xe=>xe._shouldAllowMigration);return x._shouldAllowMigration&&Ne.length?(x=Ne[0],ne&&(yield x._set(B,ne.toJSON())),yield Promise.all(f.map(function(){var xe=(0,v.Z)(function*(He){if(He!==x)try{yield He._remove(B)}catch(Fe){}});return function(He){return xe.apply(this,arguments)}}())),new Kt(x,h,E)):new Kt(x,h,E)})()}}function Nn(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Os(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(zo(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Bi(h))return"Blackberry";if(mr(h))return"Webos";if(ut(h))return"Safari";if((h.includes("chrome/")||Pa(h))&&!h.includes("edge/"))return"Chrome";if(go(h))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function zo(m=(0,k.z$)()){return/firefox\//i.test(m)}function ut(m=(0,k.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Pa(m=(0,k.z$)()){return/crios\//i.test(m)}function Os(m=(0,k.z$)()){return/iemobile/i.test(m)}function go(m=(0,k.z$)()){return/android/i.test(m)}function Bi(m=(0,k.z$)()){return/blackberry/i.test(m)}function mr(m=(0,k.z$)()){return/webos/i.test(m)}function $i(m=(0,k.z$)()){return/iphone|ipad|ipod/i.test(m)}function Wo(m=(0,k.z$)()){return $i(m)||go(m)||mr(m)||Bi(m)||/windows phone/i.test(m)||Os(m)}function Au(m,h=[]){let f;switch(m){case"Browser":f=Nn((0,k.z$)());break;case"Worker":f=`${Nn((0,k.z$)())}-${m}`;break;default:f=m}const E=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ce.SDK_VERSION}/${E}`}class xd{constructor(h,f){this.app=h,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ds(this),this.idTokenSubscription=new ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=on,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(h,f){var E=this;return f&&(this._popupRedirectResolver=Mt(f)),this._initializationPromise=this.queue((0,v.Z)(function*(){var D,x;E._deleted||(E.persistenceManager=yield Kt.create(E,h),!E._deleted&&((null===(D=E._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)&&(yield E._popupRedirectResolver._initialize(E)),yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f)}})()}initializeCurrentUser(h){var f=this;return(0,v.Z)(function*(){var E;let D=yield f.assertedPersistence.getCurrentUser();if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const x=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,B=null==D?void 0:D._redirectEventId,ne=yield f.tryRedirectSignIn(h);(!x||x===B)&&(null==ne?void 0:ne.user)&&(D=ne.user)}return D?D._redirectEventId?(Ce(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===D._redirectEventId?f.directlySetCurrentUser(D):f.reloadAndSetCurrentUserOrClear(D)):f.reloadAndSetCurrentUserOrClear(D):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var f=this;return(0,v.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(D){yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,v.Z)(function*(){try{yield Ms(h)}catch(E){if("auth/network-request-failed"!==E.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,v.Z)(function*(){const E=h?(0,k.m9)(h):null;return E&&Ce(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(h){var f=this;return(0,v.Z)(function*(){if(!f._deleted)return h&&Ce(f.tenantId===h.tenantId,f,"tenant-id-mismatch"),f.queue((0,v.Z)(function*(){yield f.directlySetCurrentUser(h),f.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var f=this;return this.queue((0,v.Z)(function*(){yield f.assertedPersistence.setPersistence(Mt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,f,E){return this.registerStateListener(this.authStateSubscription,h,f,E)}onIdTokenChanged(h,f,E){return this.registerStateListener(this.idTokenSubscription,h,f,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var E=this;return(0,v.Z)(function*(){const D=yield E.getOrInitRedirectPersistenceManager(f);return null===h?D.removeCurrentUser():D.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,v.Z)(function*(){if(!f.redirectPersistenceManager){const E=h&&Mt(h)||f._popupRedirectResolver;Ce(E,f,"argument-error"),f.redirectPersistenceManager=yield Kt.create(f,[Mt(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,v.Z)(function*(){var E,D;return f._isInitialized&&(yield f.queue((0,v.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===h?f._currentUser:(null===(D=f.redirectUser)||void 0===D?void 0:D._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,v.Z)(function*(){if(h===f.currentUser)return f.queue((0,v.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,E,D){if(this._deleted)return()=>{};const x="function"==typeof f?f:f.next.bind(f),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Ce(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof f?h.addObserver(f,E,D):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,v.Z)(function*(){f.currentUser&&f.currentUser!==h&&(f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh()),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Au(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function In(m){return(0,k.m9)(m)}class ds{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qn(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Hi(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ls{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return er("not implemented")}_getIdTokenResponse(h){return er("not implemented")}_linkToIdToken(h,f){return er("not implemented")}_getReauthenticationResolver(h){return er("not implemented")}}function Oa(m,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:resetPassword",Gt(m,h))})).apply(this,arguments)}function oi(m,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function sm(m,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",Gt(m,h))})).apply(this,arguments)}function Rd(){return(Rd=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPassword",Gt(m,h))})).apply(this,arguments)}function Yc(m,h){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:sendOobCode",Gt(m,h))})).apply(this,arguments)}function om(m,h){return Md.apply(this,arguments)}function Md(){return(Md=(0,v.Z)(function*(m,h){return Yc(m,h)})).apply(this,arguments)}function am(m,h){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,v.Z)(function*(m,h){return Yc(m,h)})).apply(this,arguments)}function Pd(m,h){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,v.Z)(function*(m,h){return Yc(m,h)})).apply(this,arguments)}function Od(m,h){return kd.apply(this,arguments)}function kd(){return(kd=(0,v.Z)(function*(m,h){return Yc(m,h)})).apply(this,arguments)}function ka(){return(ka=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",Gt(m,h))})).apply(this,arguments)}function La(){return(La=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",Gt(m,h))})).apply(this,arguments)}class Yo extends Ls{constructor(h,f,E,D=null){super("password",E),this._email=h,this._password=f,this._tenantId=D}static _fromEmailAndPassword(h,f){return new Yo(h,f,"password")}static _fromEmailAndCode(h,f,E=null){return new Yo(h,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,v.Z)(function*(){switch(f.signInMethod){case"password":return function(m,h){return Rd.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function(m,h){return ka.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Vt(h,"internal-error")}})()}_linkToIdToken(h,f){var E=this;return(0,v.Z)(function*(){switch(E.signInMethod){case"password":return oi(h,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(m,h){return La.apply(this,arguments)}(h,{idToken:f,email:E._email,oobCode:E._password});default:Vt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function hs(m,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithIdp",Gt(m,h))})).apply(this,arguments)}class pn extends Ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new pn(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Vt("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:D}=f,x=ae(f,["providerId","signInMethod"]);if(!E||!D)return null;const B=new pn(E,D);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(h){return hs(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,hs(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,hs(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,k.xO)(f)}return h}}function Gi(m,h){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:sendVerificationCode",Gt(m,h))})).apply(this,arguments)}function Fd(){return(Fd=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,h))})).apply(this,arguments)}function Xc(){return(Xc=(0,v.Z)(function*(m,h){const f=yield H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,h));if(f.temporaryProof)throw Ue(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Va={USER_NOT_FOUND:"user-not-found"};function Qo(){return(Qo=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Va)})).apply(this,arguments)}class yo extends Ls{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new yo({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new yo({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function(m,h){return Fd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function(m,h){return Xc.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(m,h){return Qo.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:E,verificationCode:D}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:E,code:D}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:E,phoneNumber:D,temporaryProof:x}=h;return E||f||D||x?new yo({verificationId:f,verificationCode:E,phoneNumber:D,temporaryProof:x}):null}}class Fs{constructor(h){var f,E,D,x,B,ne;const Ne=(0,k.zd)((0,k.pd)(h)),xe=null!==(f=Ne.apiKey)&&void 0!==f?f:null,He=null!==(E=Ne.oobCode)&&void 0!==E?E:null,Fe=function(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ne.mode)&&void 0!==D?D:null);Ce(xe&&He&&Fe,"argument-error"),this.apiKey=xe,this.operation=Fe,this.code=He,this.continueUrl=null!==(x=Ne.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Ne.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(ne=Ne.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const f=function(m){const h=(0,k.zd)((0,k.pd)(m)).link,f=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(m)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||f||h||m}(h);try{return new Fs(f)}catch(E){return null}}}let fs=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return Yo._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const D=Fs.parseLink(E);return Ce(D,"argument-error"),Yo._fromEmailAndCode(f,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Hr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Hr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yt extends zi{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return Ce("providerId"in f&&"signInMethod"in f,"argument-error"),pn._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Ce(h.idToken||h.accessToken,"argument-error"),pn._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yt.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yt.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:D,pendingToken:x,nonce:B,providerId:ne}=h;if(!E&&!D&&!f&&!x||!ne)return null;try{return new Yt(ne)._credential({idToken:f,accessToken:E,nonce:B,pendingToken:x})}catch(Ne){return null}}}let Nu=(()=>{class m extends zi{constructor(){super("facebook.com")}static credential(f){return pn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(E){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ba=(()=>{class m extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return pn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:D}=f;if(!E&&!D)return null;try{return m.credential(E,D)}catch(x){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Vd=(()=>{class m extends zi{constructor(){super("github.com")}static credential(f){return pn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(E){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Jo extends Ls{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return hs(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,hs(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,hs(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:D,pendingToken:x}=f;return E&&D&&x&&E===D?new Jo(E,x):null}static _create(h,f){return new Jo(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _o extends Hr{constructor(h){Ce(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return _o.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return _o.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Jo.fromJSON(h);return Ce(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:E}=h;if(!f||!E)return null;try{return Jo._create(E,f)}catch(D){return null}}}let xr=(()=>{class m extends zi{constructor(){super("twitter.com")}static credential(f,E){return pn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:D}=f;if(!E||!D)return null;try{return m.credential(E,D)}catch(x){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function jd(m,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signUp",Gt(m,h))})).apply(this,arguments)}class $n{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,E,D=!1){return(0,v.Z)(function*(){const x=yield hn._fromIdTokenResponse(h,E,D),B=nr(E);return new $n({user:x,providerId:B,_tokenResponse:E,operationType:f})})()}static _forOperation(h,f,E){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const D=nr(E);return new $n({user:h,providerId:D,_tokenResponse:E,operationType:f})})()}}function nr(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Xo(){return(Xo=(0,v.Z)(function*(m){var h;const f=In(m);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new $n({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield jd(f,{returnSecureToken:!0}),D=yield $n._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class $a extends k.ZR{constructor(h,f,E,D){var x;super(f.code,f.message),this.operationType=E,this.user=D,Object.setPrototypeOf(this,$a.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,f,E,D){return new $a(h,f,E,D)}}function ps(m,h,f,E){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?$a._fromErrorAndOperation(m,x,h,E):x})}function Ha(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function nt(){return(nt=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m);yield Vs(!0,f,h);const{providerUserInfo:E}=yield jn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),D=Ha(E||[]);return f.providerData=f.providerData.filter(x=>D.has(x.providerId)),D.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Bd(m,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,v.Z)(function*(m,h,f=!1){const E=yield ii(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return $n._forOperation(m,"link",E)})).apply(this,arguments)}function Vs(m,h,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,v.Z)(function*(m,h,f){yield Ms(h);const D=!1===m?"provider-already-linked":"no-such-provider";Ce(Ha(h.providerData).has(f)===m,h.auth,D)})).apply(this,arguments)}function Ou(m,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,v.Z)(function*(m,h,f=!1){const{auth:E}=m,D="reauthenticate";try{const x=yield ii(m,ps(E,D,h,m),f);Ce(x.idToken,E,"internal-error");const B=ho(x.idToken);Ce(B,E,"internal-error");const{sub:ne}=B;return Ce(m.uid===ne,E,"user-mismatch"),$n._forOperation(m,D,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Vt(E,"user-mismatch"),x}})).apply(this,arguments)}function el(m,h){return be.apply(this,arguments)}function be(){return(be=(0,v.Z)(function*(m,h,f=!1){const E="signIn",D=yield ps(m,E,h),x=yield $n._fromIdTokenResponse(m,E,D);return f||(yield m._updateCurrentUser(x.user)),x})).apply(this,arguments)}function vt(m,h){return ku.apply(this,arguments)}function ku(){return(ku=(0,v.Z)(function*(m,h){return el(In(m),h)})).apply(this,arguments)}function gn(m,h){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m);return yield Vs(!1,f,h.providerId),Bd(f,h)})).apply(this,arguments)}function Eo(m,h){return ai.apply(this,arguments)}function ai(){return(ai=(0,v.Z)(function*(m,h){return Ou((0,k.m9)(m),h)})).apply(this,arguments)}function Ga(m,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithCustomToken",Gt(m,h))})).apply(this,arguments)}function Fu(){return(Fu=(0,v.Z)(function*(m,h){const f=In(m),E=yield Ga(f,{token:h,returnSecureToken:!0}),D=yield $n._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class ys{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?qi._fromServerResponse(h,f):Vt(h,"internal-error")}}class qi extends ys{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new qi(f)}}function Zn(m,h,f){var E;Ce((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),Ce(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Ce(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(Ce(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function ea(){return(ea=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D={requestType:"PASSWORD_RESET",email:h};f&&Zn(E,D,f),yield am(E,D)})).apply(this,arguments)}function Ii(){return(Ii=(0,v.Z)(function*(m,h,f){yield Oa((0,k.m9)(m),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Vu(){return(Vu=(0,v.Z)(function*(m,h){yield sm((0,k.m9)(m),{oobCode:h})})).apply(this,arguments)}function Uu(m,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m),E=yield Oa(f,{oobCode:h}),D=E.requestType;switch(Ce(D,f,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(E.mfaInfo,f,"internal-error");default:Ce(E.email,f,"internal-error")}let x=null;return E.mfaInfo&&(x=ys._fromServerResponse(In(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:D}})).apply(this,arguments)}function na(){return(na=(0,v.Z)(function*(m,h){const{data:f}=yield Uu((0,k.m9)(m),h);return f.email})).apply(this,arguments)}function Bu(){return(Bu=(0,v.Z)(function*(m,h,f){const E=In(m),D=yield jd(E,{returnSecureToken:!0,email:h,password:f}),x=yield $n._fromIdTokenResponse(E,"signIn",D);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function _s(){return(_s=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D={requestType:"EMAIL_SIGNIN",email:h};Ce(f.handleCodeInApp,E,"argument-error"),f&&Zn(E,D,f),yield Pd(E,D)})).apply(this,arguments)}function za(){return(za=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D=fs.credentialWithLink(h,f||et());return Ce(D._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),vt(E,D)})).apply(this,arguments)}function cm(m,h){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:createAuthUri",Gt(m,h))})).apply(this,arguments)}function Bf(){return(Bf=(0,v.Z)(function*(m,h){const E={identifier:h,continueUri:De()?et():"http://localhost"},{signinMethods:D}=yield cm((0,k.m9)(m),E);return D||[]})).apply(this,arguments)}function Gr(){return(Gr=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Zn(f.auth,D,h);const{email:x}=yield om(f.auth,D);x!==m.email&&(yield m.reload())})).apply(this,arguments)}function Wa(){return(Wa=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Zn(E.auth,x,f);const{email:B}=yield Od(E.auth,x);B!==m.email&&(yield m.reload())})).apply(this,arguments)}function $f(m,h){return qa.apply(this,arguments)}function qa(){return(qa=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Mn(){return(Mn=(0,v.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const E=(0,k.m9)(m),x={idToken:yield E.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},B=yield ii(E,$f(E.auth,x));E.displayName=B.displayName||null,E.photoURL=B.photoUrl||null;const ne=E.providerData.find(({providerId:Ne})=>"password"===Ne);ne&&(ne.displayName=E.displayName,ne.photoURL=E.photoURL),yield E._updateTokensIfNecessary(B)})).apply(this,arguments)}function Ka(m,h,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,v.Z)(function*(m,h,f){const{auth:E}=m,x={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(x.email=h),f&&(x.password=f);const B=yield ii(m,oi(E,x));yield m._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class wo{constructor(h,f,E={}){this.isNewUser=h,this.providerId=f,this.profile=E}}class Wu extends wo{constructor(h,f,E,D){super(h,f,E),this.username=D}}class Bs extends wo{constructor(h,f){super(h,"facebook.com",f)}}class Ya extends Wu{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class lm extends wo{constructor(h,f){super(h,"google.com",f)}}class Hf extends Wu{constructor(h,f,E){super(h,"twitter.com",f,E)}}function rr(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function(m){var h,f;if(!m)return null;const{providerId:E}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},x=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&(null==m?void 0:m.idToken)){const B=null===(f=null===(h=ho(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(B)return new wo(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!E)return null;switch(E){case"facebook.com":return new Bs(x,D);case"github.com":return new Ya(x,D);case"google.com":return new lm(x,D);case"twitter.com":return new Hf(x,D,m.screenName||null);case"custom":case"anonymous":return new wo(x,null);default:return new wo(x,E,D)}}(f)}class Ci{constructor(h,f){this.type=h,this.credential=f}static _fromIdtoken(h){return new Ci("enroll",h)}static _fromMfaPendingCredential(h){return new Ci("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,E;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Ci._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return Ci._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Zu{constructor(h,f,E){this.session=h,this.hints=f,this.signInResolver=E}static _fromError(h,f){const E=In(h),D=f.customData._serverResponse,x=(D.mfaInfo||[]).map(ne=>ys._fromServerResponse(E,ne));Ce(D.mfaPendingCredential,E,"internal-error");const B=Ci._fromMfaPendingCredential(D.mfaPendingCredential);return new Zu(B,x,function(){var ne=(0,v.Z)(function*(Ne){const xe=yield Ne._process(E,B);delete D.mfaInfo,delete D.mfaPendingCredential;const He=Object.assign(Object.assign({},D),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(f.operationType){case"signIn":const Fe=yield $n._fromIdTokenResponse(E,f.operationType,He);return yield E._updateCurrentUser(Fe.user),Fe;case"reauthenticate":return Ce(f.user,E,"internal-error"),$n._forOperation(f.user,f.operationType,He);default:Vt(E,"internal-error")}});return function(Ne){return ne.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,v.Z)(function*(){return f.signInResolver(h)})()}}function Ja(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:start",Gt(m,h))}class Qu{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>ys._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Qu(h)}getSession(){var h=this;return(0,v.Z)(function*(){return Ci._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,f){var E=this;return(0,v.Z)(function*(){const D=h,x=yield E.getSession(),B=yield ii(E.user,D._process(E.user.auth,x,f));return yield E.user._updateTokensIfNecessary(B),E.user.reload()})()}unenroll(h){var f=this;return(0,v.Z)(function*(){const E="string"==typeof h?h:h.uid,D=yield f.user.getIdToken(),x=yield ii(f.user,function(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(m,h))}(f.user.auth,{idToken:D,mfaEnrollmentId:E}));f.enrolledFactors=f.enrolledFactors.filter(({uid:B})=>B!==E),yield f.user._updateTokensIfNecessary(x);try{yield f.user.reload()}catch(B){if("auth/user-token-expired"!==B.code)throw B}})()}}const Io=new WeakMap,ra="__sak";class Qe{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const sr=(()=>{class m extends Qe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const m=(0,k.z$)();return ut(m)||$i(m)}()&&function(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Wo(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const D=this.storage.getItem(E),x=this.localCache[E];D!==x&&f(E,x,D)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((ne,Ne,xe)=>{this.notifyListeners(ne,xe)});const D=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(D);if(f.newValue!==ne)null!==f.newValue?this.storage.setItem(D,f.newValue):this.storage.removeItem(D);else if(this.localCache[D]===f.newValue&&!E)return}const x=()=>{const ne=this.storage.getItem(D);!E&&this.localCache[D]===ne||this.notifyListeners(D,ne)},B=this.storage.getItem(D);(0,k.w1)()&&10===document.documentMode&&B!==f.newValue&&f.newValue!==f.oldValue?setTimeout(x,10):x()}notifyListeners(f,E){this.localCache[f]=E;const D=this.listeners[f];if(D)for(const x of Array.from(D))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var D=()=>super._set,x=this;return(0,v.Z)(function*(){yield D().call(x,f,E),x.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,D=this;return(0,v.Z)(function*(){const x=yield E().call(D,f);return D.localCache[f]=JSON.stringify(x),x})()}_remove(f){var E=()=>super._remove,D=this;return(0,v.Z)(function*(){yield E().call(D,f),delete D.localCache[f]})()}}return m.type="LOCAL",m})(),_r=(()=>{class m extends Qe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Zd=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(x=>x.isListeningto(f));if(E)return E;const D=new m(f);return this.receivers.push(D),D}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,v.Z)(function*(){const D=f,{eventId:x,eventType:B,data:ne}=D.data,Ne=E.handlersMap[B];if(!(null==Ne?void 0:Ne.size))return;D.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const xe=Array.from(Ne).map(function(){var Fe=(0,v.Z)(function*(Dt){return Dt(D.origin,ne)});return function(Dt){return Fe.apply(this,arguments)}}()),He=yield function(m){return Promise.all(m.map(function(){var h=(0,v.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return h.apply(this,arguments)}}()))}(xe);D.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:He})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Co(m="",h=10){let f="";for(let E=0;E<h;E++)f+=Math.floor(10*Math.random());return m+f}class Ki{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,E=50){var D=this;return(0,v.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,ne;return new Promise((Ne,xe)=>{const He=Co("",20);x.port1.start();const Fe=setTimeout(()=>{xe(new Error("unsupported_event"))},E);ne={messageChannel:x,onMessage(Dt){const kn=Dt;if(kn.data.eventId===He)switch(kn.data.status){case"ack":clearTimeout(Fe),B=setTimeout(()=>{xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ne(kn.data.response);break;default:clearTimeout(Fe),clearTimeout(B),xe(new Error("invalid_response"))}}},D.handlers.add(ne),x.port1.addEventListener("message",ne.onMessage),D.target.postMessage({eventType:h,eventId:He,data:f},[x.port2])}).finally(()=>{ne&&D.removeMessageHandler(ne)})})()}}function Cn(){return window}function rl(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}function $s(){return($s=(0,v.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const ec="firebaseLocalStorageDb",Do="firebaseLocalStorage",tc="fbase_key";class Hs{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Zi(m,h){return m.transaction([Do],h?"readwrite":"readonly").objectStore(Do)}function Di(){const m=indexedDB.open(ec,1);return new Promise((h,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(Do,{keyPath:tc})}catch(D){f(D)}}),m.addEventListener("success",(0,v.Z)(function*(){const E=m.result;E.objectStoreNames.contains(Do)?h(E):(E.close(),yield function(){const m=indexedDB.deleteDatabase(ec);return new Hs(m).toPromise()}(),h(yield Di()))}))})}function nn(m,h,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,v.Z)(function*(m,h,f){const E=Zi(m,!0).put({[tc]:h,value:f});return new Hs(E).toPromise()})).apply(this,arguments)}function eu(){return(eu=(0,v.Z)(function*(m,h){const f=Zi(m,!1).get(h),E=yield new Hs(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function il(m,h){const f=Zi(m,!0).delete(h);return new Hs(f).toPromise()}const Qt=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,v.Z)(function*(){return f.db||(f.db=yield Di()),f.db})()}_withRetries(f){var E=this;return(0,v.Z)(function*(){let D=0;for(;;)try{const x=yield E._openDb();return yield f(x)}catch(x){if(D++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,v.Z)(function*(){return rl()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,v.Z)(function*(){f.receiver=Zd._getInstance(rl()?self:null),f.receiver._subscribe("keyChanged",function(){var E=(0,v.Z)(function*(D,x){return{keyProcessed:(yield f._poll()).includes(x.key)}});return function(D,x){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,v.Z)(function*(D,x){return["keyChanged"]});return function(D,x){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,v.Z)(function*(){var E,D;if(f.activeServiceWorker=yield function(){return $s.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Ki(f.activeServiceWorker);const x=yield f.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(D=x[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,v.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Di();return yield nn(f,ra,"1"),yield il(f,ra),!0}catch(f){}return!1})()}_withPendingWrite(f){var E=this;return(0,v.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var D=this;return(0,v.Z)(function*(){return D._withPendingWrite((0,v.Z)(function*(){return yield D._withRetries(x=>nn(x,f,E)),D.localCache[f]=E,D.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,v.Z)(function*(){const D=yield E._withRetries(x=>function(m,h){return eu.apply(this,arguments)}(x,f));return E.localCache[f]=D,D})()}_remove(f){var E=this;return(0,v.Z)(function*(){return E._withPendingWrite((0,v.Z)(function*(){return yield E._withRetries(D=>il(D,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,v.Z)(function*(){const E=yield f._withRetries(B=>{const ne=Zi(B,!1).getAll();return new Hs(ne).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const D=[],x=new Set;for(const{fbase_key:B,value:ne}of E)x.add(B),JSON.stringify(f.localCache[B])!==JSON.stringify(ne)&&(f.notifyListeners(B,ne),D.push(B));for(const B of Object.keys(f.localCache))f.localCache[B]&&!x.has(B)&&(f.notifyListeners(B,null),D.push(B));return D})()}notifyListeners(f,E){this.localCache[f]=E;const D=this.listeners[f];if(D)for(const x of Array.from(D))x(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function qf(m,h){return yt(m,"POST","/v2/accounts/mfaSignIn:start",Gt(m,h))}function Zf(){return(Zf=(0,v.Z)(function*(m){return(yield yt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qd(m){return new Promise((h,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=h,E.onerror=D=>{const x=Et("internal-error");x.customData=D,f(x)},E.type="text/javascript",E.charset="UTF-8",function(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(E)})}function Yf(m){return`__${m}${Math.floor(1e6*Math.random())}`}const tu=1e12;class sl{constructor(h){this.auth=h,this.counter=tu,this._widgets=new Map}render(h,f){const E=this.counter;return this._widgets.set(E,new aa(h,this.auth.name,f||{})),this.counter++,E}reset(h){var f;const E=h||tu;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(h){var f;return(null===(f=this._widgets.get(h||tu))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,v.Z)(function*(){var E;return null===(E=f._widgets.get(h||tu))||void 0===E||E.execute(),""})()}}class aa{constructor(h,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof h?document.getElementById(h):h;Ce(D,"argument-error",{appName:f}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(m){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}();const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yn=Yf("rcb"),rc=new Lt(3e4,6e4);class nu{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(h,f=""){return Ce((m=f).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Cn().grecaptcha):new Promise((E,D)=>{const x=Cn().setTimeout(()=>{D(Et(h,"network-request-failed"))},rc.get());Cn()[yn]=()=>{Cn().clearTimeout(x),delete Cn()[yn];const ne=Cn().grecaptcha;if(!ne)return void D(Et(h,"internal-error"));const Ne=ne.render;ne.render=(xe,He)=>{const Fe=Ne(xe,He);return this.counter++,Fe},this.hostLanguage=f,E(ne)},Qd(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:yn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(x),D(Et(h,"internal-error"))})});var m}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Cn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ti{load(h){return(0,v.Z)(function*(){return new sl(h)})()}clearedOneInstance(){}}const Si="recaptcha",Ai={theme:"light",type:"image"};class ca{constructor(h,f=Object.assign({},Ai),E){this.parameters=f,this.type=Si,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(E),this.isInvisible="invisible"===this.parameters.size,Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Ce(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ti:new nu,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(f)||new Promise(x=>{const B=ne=>{!ne||(h.tokenChangeListeners.delete(B),x(ne))};h.tokenChangeListeners.add(B),h.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Ce(!this.parameters.sitekey,this.auth,"argument-error"),Ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof h)h(f);else if("string"==typeof h){const E=Cn()[h];"function"==typeof E&&E(f)}}}assertNotDestroyed(){Ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){Ce(De()&&!rl(),h.auth,"internal-error"),yield function(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function(m){return Zf.apply(this,arguments)}(h.auth);Ce(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return Ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ol{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=yo._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function xi(){return(xi=(0,v.Z)(function*(m,h,f){const E=In(m),D=yield T(E,h,(0,k.m9)(f));return new ol(D,x=>vt(E,x))})).apply(this,arguments)}function li(){return(li=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);yield Vs(!1,E,"phone");const D=yield T(E.auth,h,(0,k.m9)(f));return new ol(D,x=>gn(E,x))})).apply(this,arguments)}function I(){return(I=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D=yield T(E.auth,h,(0,k.m9)(f));return new ol(D,x=>Eo(E,x))})).apply(this,arguments)}function T(m,h,f){return R.apply(this,arguments)}function R(){return(R=(0,v.Z)(function*(m,h,f){var E;const D=yield f.verify();try{let x;if(Ce("string"==typeof D,m,"argument-error"),Ce(f.type===Si,m,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const B=x.session;if("phoneNumber"in x)return Ce("enroll"===B.type,m,"internal-error"),(yield Ja(m,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Ce("signin"===B.type,m,"internal-error");const ne=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return Ce(ne,m,"missing-multi-factor-info"),(yield qf(m,{mfaPendingCredential:B.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Gi(m,{phoneNumber:x.phoneNumber,recaptchaToken:D});return B}}finally{f._reset()}})).apply(this,arguments)}function Y(){return(Y=(0,v.Z)(function*(m,h){yield Bd((0,k.m9)(m),h)})).apply(this,arguments)}let ue=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=In(f)}verifyPhoneNumber(f,E){return T(this.auth,f,(0,k.m9)(E))}static credential(f,E){return yo._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:D}=f;return E&&D?yo._fromTokenResponse(E,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ie(m,h){return h?Mt(h):(Ce(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Be extends Ls{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return hs(h,this._buildIdpRequest())}_linkToIdToken(h,f){return hs(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return hs(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function $e(m){return el(m.auth,new Be(m),m.bypassAuthState)}function Ft(m){const{auth:h,user:f}=m;return Ce(f,h,"internal-error"),Ou(f,new Be(m),m.bypassAuthState)}function zt(m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,v.Z)(function*(m){const{auth:h,user:f}=m;return Ce(f,h,"internal-error"),Bd(f,new Be(m),m.bypassAuthState)})).apply(this,arguments)}class Pn{constructor(h,f,E,D,x=!1){this.auth=h,this.resolver=E,this.user=D,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,v.Z)(function*(E,D){h.pendingPromise={resolve:E,reject:D};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(E,D){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,v.Z)(function*(){const{urlResponse:E,sessionId:D,postBody:x,tenantId:B,error:ne,type:Ne}=h;if(ne)return void f.reject(ne);const xe={auth:f.auth,requestUri:E,sessionId:D,tenantId:B||void 0,postBody:x||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ne)(xe))}catch(He){f.reject(He)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return $e;case"linkViaPopup":case"linkViaRedirect":return zt;case"reauthViaPopup":case"reauthViaRedirect":return Ft;default:Vt(this.auth,"internal-error")}}resolve(h){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const or=new Lt(2e3,1e4);function Nr(){return(Nr=(0,v.Z)(function*(m,h,f){const E=In(m);Tr(m,h,Hr);const D=Ie(E,f);return new al(E,"signInViaPopup",h,D).executeNotNull()})).apply(this,arguments)}function Es(){return(Es=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Tr(E.auth,h,Hr);const D=Ie(E.auth,f);return new al(E.auth,"reauthViaPopup",h,D,E).executeNotNull()})).apply(this,arguments)}function _n(){return(_n=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Tr(E.auth,h,Hr);const D=Ie(E.auth,f);return new al(E.auth,"linkViaPopup",h,D,E).executeNotNull()})).apply(this,arguments)}let al=(()=>{class m extends Pn{constructor(f,E,D,x,B){super(f,E,x,B),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,v.Z)(function*(){const E=yield f.execute();return Ce(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,v.Z)(function*(){Rn(1===f.filter.length,"Popup operations only handle one event");const E=Co();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(D=>{f.reject(D)}),f.resolver._isIframeWebStorageSupported(f.auth,D=>{D||f.reject(Et(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,D;this.pollId=(null===(D=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,or.get())};f()}}return m.currentPopupAction=null,m})();const ul=new Map;class ic extends Pn{constructor(h,f,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,v.Z)(function*(){let E=ul.get(f.auth._key());if(!E){try{const x=(yield function(m,h){return np.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;E=()=>Promise.resolve(x)}catch(D){E=()=>Promise.reject(D)}ul.set(f.auth._key(),E)}return f.bypassAuthState||ul.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,E=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(E,h);if("unknown"!==h.type){if(h.eventId){const D=yield E.auth._redirectUserForId(h.eventId);if(D)return E.user=D,f().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function np(){return(np=(0,v.Z)(function*(m,h){const f=sc(h),E=la(m);if(!(yield E._isAvailable()))return!1;const D="true"===(yield E._get(f));return yield E._remove(f),D})).apply(this,arguments)}function Sn(m,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,v.Z)(function*(m,h){return la(m)._set(sc(h),"true")})).apply(this,arguments)}function la(m){return Mt(m._redirectPersistence)}function sc(m){return Wn("pendingRedirect",m.config.apiKey,m.name)}function eh(){return(eh=(0,v.Z)(function*(m,h,f){const E=In(m);Tr(m,h,Hr);const D=Ie(E,f);return yield Sn(D,E),D._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function ws(){return(ws=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Tr(E.auth,h,Hr);const D=Ie(E.auth,f);yield Sn(D,E.auth);const x=yield ip(E);return D._openRedirect(E.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function rp(){return(rp=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Tr(E.auth,h,Hr);const D=Ie(E.auth,f);yield Vs(!1,E,h.providerId),yield Sn(D,E.auth);const x=yield ip(E);return D._openRedirect(E.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function ac(){return(ac=(0,v.Z)(function*(m,h){return yield In(m)._initializationPromise,su(m,h,!1)})).apply(this,arguments)}function su(m,h){return th.apply(this,arguments)}function th(){return(th=(0,v.Z)(function*(m,h,f=!1){const E=In(m),D=Ie(E,h),B=yield new ic(E,D,f).execute();return B&&!f&&(delete B.user._redirectEventId,yield E._persistUserIfCurrent(B.user),yield E._setRedirectUser(null,h)),B})).apply(this,arguments)}function ip(m){return sp.apply(this,arguments)}function sp(){return(sp=(0,v.Z)(function*(m){const h=Co(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class ar{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(f=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vm(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var E;if(h.error&&!vm(h)){const D=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(Et(this.auth,D))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const E=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_m(h))}saveEventToCache(h){this.cachedEventUids.add(_m(h)),this.lastProcessedEventTime=Date.now()}}function _m(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function vm({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function wm(m){return bm.apply(this,arguments)}function bm(){return(bm=(0,v.Z)(function*(m,h={}){return yt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const To=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,op=/^https?/;function ou(){return(ou=(0,v.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield wm(m);for(const f of h)try{if(ap(f))return}catch(E){}Vt(m,"unauthorized-domain")})).apply(this,arguments)}function ap(m){const h=et(),{protocol:f,hostname:E}=new URL(h);if(m.startsWith("chrome-extension://")){const B=new URL(m);return""===B.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&B.hostname===E}if(!op.test(f))return!1;if(To.test(m))return E===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(E)}const uc=new Lt(3e4,6e4);function Im(){const m=Cn().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let up=null;function nh(m){return up=up||function(m){return new Promise((h,f)=>{var E,D,x;function B(){Im(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Im(),f(Et(m,"network-request-failed"))},timeout:uc.get()})}if(null===(D=null===(E=Cn().gapi)||void 0===E?void 0:E.iframes)||void 0===D?void 0:D.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=Cn().gapi)||void 0===x?void 0:x.load)){const ne=Yf("iframefcb");return Cn()[ne]=()=>{gapi.load?B():f(Et(m,"network-request-failed"))},Qd(`https://apis.google.com/js/api.js?onload=${ne}`)}B()}}).catch(h=>{throw up=null,h})}(m),up}const rh=new Lt(5e3,15e3),Dm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},au=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uv(m){const h=m.config;Ce(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?Ye(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:m.name,v:ce.SDK_VERSION},D=au.get(m.config.apiHost);D&&(E.eid=D);const x=m._getFrameworks();return x.length&&(E.fw=x.join(",")),`${f}?${(0,k.xO)(E).slice(1)}`}function bt(){return(bt=(0,v.Z)(function*(m){const h=yield nh(m),f=Cn().gapi;return Ce(f,m,"internal-error"),h.open({where:document.body,url:uv(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dm,dontclear:!0},E=>new Promise(function(){var D=(0,v.Z)(function*(x,B){yield E.restyle({setHideOnLeave:!1});const ne=Et(m,"network-request-failed"),Ne=Cn().setTimeout(()=>{B(ne)},rh.get());function xe(){Cn().clearTimeout(Ne),x(E)}E.ping(xe).then(xe,()=>{B(ne)})});return function(x,B){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const cv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Am{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function dl(m,h,f,E,D,x){Ce(m.config.authDomain,m,"auth-domain-config-required"),Ce(m.config.apiKey,m,"invalid-api-key");const B={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:ce.SDK_VERSION,eventId:D};if(h instanceof Hr){h.setDefaultLanguage(m.languageCode),B.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ne,xe]of Object.entries(x||{}))B[Ne]=xe}if(h instanceof zi){const Ne=h.getScopes().filter(xe=>""!==xe);Ne.length>0&&(B.scopes=Ne.join(","))}m.tenantId&&(B.tid=m.tenantId);const ne=B;for(const Ne of Object.keys(ne))void 0===ne[Ne]&&delete ne[Ne];return`${function({config:m}){return m.emulator?Ye(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,k.xO)(ne).slice(1)}`}const Yn="webStorageSupport";class ih extends class{constructor(h){this.factorId=h}_process(h,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,E);case"signin":return this._finalizeSignIn(h,f.credential);default:return er("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ih(h)}_finalizeEnroll(h,f,E){return function(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(m,h))}(h,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function(m,h){return yt(m,"POST","/v2/accounts/mfaSignIn:finalize",Gt(m,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lc=(()=>{class m{constructor(){}static assertion(f){return ih._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var m,lp="@firebase/auth";class hl{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,v.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(E=>{var D;h((null===(D=E)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xi(){return window}function fl(){return(fl=(0,v.Z)(function*(m,h,f){var E;const{BuildInfo:D}=Xi();Rn(h.sessionId,"AuthEvent did not contain a session ID");const x=yield gl(h.sessionId),B={};return $i()?B.ibi=D.packageName:go()?B.apn=D.packageName:Vt(m,"operation-not-supported-in-this-environment"),D.displayName&&(B.appDisplayName=D.displayName),B.sessionId=x,dl(m,f,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,B)})).apply(this,arguments)}function pl(){return(pl=(0,v.Z)(function*(m){const{BuildInfo:h}=Xi(),f={};$i()?f.iosBundleId=h.packageName:go()?f.androidPackageName=h.packageName:Vt(m,"operation-not-supported-in-this-environment"),yield wm(m,f)})).apply(this,arguments)}function ah(){return(ah=(0,v.Z)(function*(m,h,f){const{cordova:E}=Xi();let D=()=>{};try{yield new Promise((x,B)=>{let ne=null;function Ne(){var Fe;x();const Dt=null===(Fe=E.plugins.browsertab)||void 0===Fe?void 0:Fe.close;"function"==typeof Dt&&Dt(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function xe(){ne||(ne=window.setTimeout(()=>{B(Et(m,"redirect-cancelled-by-user"))},2e3))}function He(){"visible"===(null==document?void 0:document.visibilityState)&&xe()}h.addPassiveListener(Ne),document.addEventListener("resume",xe,!1),go()&&document.addEventListener("visibilitychange",He,!1),D=()=>{h.removePassiveListener(Ne),document.removeEventListener("resume",xe,!1),document.removeEventListener("visibilitychange",He,!1),ne&&window.clearTimeout(ne)}})}finally{D()}})).apply(this,arguments)}function gl(m){return ch.apply(this,arguments)}function ch(){return(ch=(0,v.Z)(function*(m){const h=lh(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lh(m){if(Rn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}m="Browser",(0,ce._registerComponent)(new Ze.wA("auth",(h,{options:f})=>{const E=h.getProvider("app").getImmediate(),{apiKey:D,authDomain:x}=E.options;return(B=>{Ce(D&&!D.includes(":"),"invalid-api-key",{appName:B.name}),Ce(!(null==x?void 0:x.includes(":")),"argument-error",{appName:B.name});const ne={apiKey:D,authDomain:x,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Au(m)},Ne=new xd(B,ne);return function(m,h){const f=(null==h?void 0:h.persistence)||[],E=(Array.isArray(f)?f:[f]).map(Mt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Ne,f),Ne})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,E)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new Ze.wA("auth-internal",h=>{const f=In(h.getProvider("auth").getImmediate());return new hl(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(lp,"0.19.3",void 0),(0,ce.registerVersion)(lp,"0.19.3","esm2017");class dc extends ar{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,v.Z)(function*(){yield h.initPromise})()}}function fp(m){return cn.apply(this,arguments)}function cn(){return(cn=(0,v.Z)(function*(m){const h=yield fa()._get(hh(m));return h&&(yield fa()._remove(hh(m))),h})).apply(this,arguments)}function fv(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*h.length);m.push(h.charAt(E))}return m.join("")}function fa(){return Mt(sr)}function hh(m){return Wn("authEvent",m.config.apiKey,m.name)}function fh(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...f]=m.split("?");return(0,k.zd)(f.join("?"))}function pp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Et("no-auth-event")}}function yl(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function uu(m=(0,k.z$)()){return!("file:"!==yl()&&"ionic:"!==yl()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function yp(){try{const m=self.localStorage,h=Co();if(m)return m.setItem(h,"1"),m.removeItem(h),!function(m=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(m=(0,k.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,k.hl)()}catch(m){return hc()&&(0,k.hl)()}return!1}function hc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _l(){return("http:"===yl()||"https:"===yl()||(0,k.ru)()||uu())&&!((0,k.b$)()||(0,k.UG)())&&yp()&&!hc()}function _p(){return uu()&&"undefined"!=typeof document}function _h(){return(_h=(0,v.Z)(function*(){return!!_p()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},fc=Ce,vh="persistence";function cu(m){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,v.Z)(function*(m){yield m._initializationPromise;const h=pc(),f=Wn(vh,m.config.apiKey,m.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(f,m._getPersistence())})).apply(this,arguments)}function pc(){return"undefined"!=typeof window?window:null}const yv=Ce;class Zs{constructor(){this.browserResolver=Mt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_r,this._completeRedirectFn=su}_openPopup(h,f,E,D){var x=this;return(0,v.Z)(function*(){var B;Rn(null===(B=x.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const ne=dl(h,f,E,et(),D);return function(m,h,f,E=500,D=600){const x=Math.max((window.screen.availHeight-D)/2,0).toString(),B=Math.max((window.screen.availWidth-E)/2,0).toString();let ne="";const Ne=Object.assign(Object.assign({},cv),{width:E.toString(),height:D.toString(),top:x,left:B}),xe=(0,k.z$)().toLowerCase();f&&(ne=Pa(xe)?"_blank":f),zo(xe)&&(h=h||"http://localhost",Ne.scrollbars="yes");const He=Object.entries(Ne).reduce((Dt,[kn,Pi])=>`${Dt}${kn}=${Pi},`,"");if(function(m=(0,k.z$)()){var h;return $i(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(xe)&&"_self"!==ne)return function(m,h){const f=document.createElement("a");f.href=m,f.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(h||"",ne),new Am(null);const Fe=window.open(h||"",ne,He);Ce(Fe,m,"popup-blocked");try{Fe.focus()}catch(Dt){}return new Am(Fe)}(h,ne,Co())})()}_openRedirect(h,f,E,D){var x=this;return(0,v.Z)(function*(){return yield x._originValidation(h),m=dl(h,f,E,et(),D),Cn().location.href=m,new Promise(()=>{});var m})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:D,promise:x}=this.eventManagers[f];return D?Promise.resolve(D):(Rn(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(h);return this.eventManagers[f]={promise:E},E}initAndGetManager(h){var f=this;return(0,v.Z)(function*(){const E=yield function(m){return bt.apply(this,arguments)}(h),D=new ar(h);return E.register("authEvent",x=>(Ce(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:D.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:D},f.iframes[h._key()]=E,D})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Yn,{type:Yn},D=>{var x;const B=null===(x=null==D?void 0:D[0])||void 0===x?void 0:x[Yn];void 0!==B&&f(!!B),Vt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return ou.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Wo()||ut()||$i()}}),this.cordovaResolver=Mt(class{constructor(){this._redirectPersistence=_r,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=su}_initialize(h){var f=this;return(0,v.Z)(function*(){const E=h._key();let D=f.eventManagers.get(E);return D||(D=new dc(h),f.eventManagers.set(E,D),f.attachCallbackListeners(h,D)),D})()}_openPopup(h){Vt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,E,D){var x=this;return(0,v.Z)(function*(){!function(m){var h,f,E,D,x,B,ne,Ne,xe,He;const Fe=Xi();Ce("function"==typeof(null===(h=null==Fe?void 0:Fe.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ce(void 0!==(null===(f=null==Fe?void 0:Fe.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ce("function"==typeof(null===(x=null===(D=null===(E=null==Fe?void 0:Fe.cordova)||void 0===E?void 0:E.plugins)||void 0===D?void 0:D.browsertab)||void 0===x?void 0:x.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(Ne=null===(ne=null===(B=null==Fe?void 0:Fe.cordova)||void 0===B?void 0:B.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Ne?void 0:Ne.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(He=null===(xe=null==Fe?void 0:Fe.cordova)||void 0===xe?void 0:xe.InAppBrowser)||void 0===He?void 0:He.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield x._initialize(h);yield B.initialized(),B.resetRedirect(),ul.clear(),yield x._originValidation(h);const ne=function(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:fv(),postBody:null,tenantId:m.tenantId,error:Et(m,"no-auth-event")}}(h,E,D);yield function(m,h){return fa()._set(hh(m),h)}(h,ne);const Ne=yield function(m,h,f){return fl.apply(this,arguments)}(h,ne,f),xe=yield function(m){const{cordova:h}=Xi();return new Promise(f=>{h.plugins.browsertab.isAvailable(E=>{let D=null;E?h.plugins.browsertab.openUrl(m):D=h.InAppBrowser.open(m,function(m=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(D)})})}(Ne);return function(m,h,f){return ah.apply(this,arguments)}(h,B,xe)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return pl.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:E,handleOpenURL:D,BuildInfo:x}=Xi(),B=setTimeout((0,v.Z)(function*(){yield fp(h),f.onEvent(pp())}),500),ne=function(){var He=(0,v.Z)(function*(Fe){clearTimeout(B);const Dt=yield fp(h);let kn=null;Dt&&(null==Fe?void 0:Fe.url)&&(kn=function(m,h){var f,E;const D=function(m){const h=fh(m),f=h.link?decodeURIComponent(h.link):void 0,E=fh(f).link,D=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return fh(D).link||D||E||f||m}(h);if(D.includes("/__/auth/callback")){const x=fh(D),B=x.firebaseError?function(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,ne=null===(E=null===(f=null==B?void 0:B.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Ne=ne?Et(ne):null;return Ne?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(Dt,Fe.url)),f.onEvent(kn||pp())});return function(Dt){return He.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ne);const Ne=D,xe=`${x.packageName.toLowerCase()}://`;Xi().handleOpenURL=function(){var He=(0,v.Z)(function*(Fe){if(Fe.toLowerCase().startsWith(xe)&&ne({url:Fe}),"function"==typeof Ne)try{Ne(Fe)}catch(Dt){console.error(Dt)}});return function(Fe){return He.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=_r,this._completeRedirectFn=su}_initialize(h){var f=this;return(0,v.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,E,D){var x=this;return(0,v.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,f,E,D)})()}_openRedirect(h,f,E,D){var x=this;return(0,v.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,f,E,D)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return _p()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,v.Z)(function*(){if(h.underlyingResolver)return;const f=yield function(){return _h.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function lu(m){return m.unwrap()}function vv(m){return El(m)}function El(m){const{_tokenResponse:h}=m instanceof k.ZR?m.customData:m;if(!h)return null;if(!(m instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ue.credentialFromResult(m);const f=h.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Ba;break;case"facebook.com":E=Nu;break;case"github.com":E=Vd;break;case"twitter.com":E=xr;break;default:const{oauthIdToken:D,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:ne,nonce:Ne}=h;return x||B||D||ne?ne?f.startsWith("saml.")?Jo._create(f,ne):pn._fromParams({providerId:f,signInMethod:f,pendingToken:ne,idToken:D,accessToken:x}):new Yt(f).credential({idToken:D,accessToken:x,rawNonce:Ne}):null}return m instanceof k.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function hi(m,h){return h.catch(f=>{throw f instanceof k.ZR&&function(m,h){var f;const E=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Ep(m,function(m,h){var f;const E=(0,k.m9)(m),D=h;return Ce(h.customData.operationType,E,"argument-error"),Ce(null===(f=D.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Zu._fromError(E,D)}(m,h));else if(E){const D=El(h),x=h;D&&(x.credential=D,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(m,f),f}).then(f=>{const D=f.user;return{operationType:f.operationType,credential:vv(f),additionalUserInfo:rr(f),user:Ys.getOrCreate(D)}})}function pa(m,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:E=>hi(m,f.confirm(E))}})).apply(this,arguments)}class Ep{constructor(h,f){this.resolver=f,this.auth=function(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hi(lu(this.auth),this.resolver.resolveSignIn(h))}}class Ys{constructor(h){this._delegate=h,this.multiFactor=function(m){const h=(0,k.m9)(m);return Io.has(h)||Io.set(h,Qu._fromUser(h)),Io.get(h)}(h)}static getOrCreate(h){return Ys.USER_MAP.has(h)||Ys.USER_MAP.set(h,new Ys(h)),Ys.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,gn(f._delegate,h))})()}linkWithPhoneNumber(h,f){var E=this;return(0,v.Z)(function*(){return pa(E.auth,function(m,h,f){return li.apply(this,arguments)}(E._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,function(m,h,f){return _n.apply(this,arguments)}(f._delegate,h,Zs))})()}linkWithRedirect(h){var f=this;return(0,v.Z)(function*(){return yield cu(In(f.auth)),function(m,h,f){return function(m,h,f){return rp.apply(this,arguments)}(m,h,f)}(f._delegate,h,Zs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,Eo(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return pa(this.auth,function(m,h,f){return I.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return hi(this.auth,function(m,h,f){return Es.apply(this,arguments)}(this._delegate,h,Zs))}reauthenticateWithRedirect(h){var f=this;return(0,v.Z)(function*(){return yield cu(In(f.auth)),function(m,h,f){return function(m,h,f){return ws.apply(this,arguments)}(m,h,f)}(f._delegate,h,Zs)})()}sendEmailVerification(h){return function(m,h){return Gr.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,v.Z)(function*(){return yield function(m,h){return nt.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function(m,h){return Ka((0,k.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function(m,h){return Ka((0,k.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(m,h){return Y.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(m,h){return Mn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function(m,h,f){return Wa.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ys.USER_MAP=new WeakMap;const wl=Ce;let wp=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=f.options;wl(D,"invalid-api-key",{appName:f.name});let x=[tn];if("undefined"!=typeof window){x=function(m,h){const f=pc();if(!(null==f?void 0:f.sessionStorage))return[];const E=Wn(vh,m,h);switch(f.sessionStorage.getItem(E)){case Mi.NONE:return[tn];case Mi.LOCAL:return[Qt,_r];case Mi.SESSION:return[_r];default:return[]}}(D,f.name);for(const ne of[Qt,sr,_r])x.includes(ne)||x.push(ne)}wl(D,"invalid-api-key",{appName:f.name});const B="undefined"!=typeof window?Zs:void 0;this._delegate=E.initialize({options:{persistence:x,popupRedirectResolver:B}}),this._delegate._updateErrorMap(Rs),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function(m,h,f){const E=In(m);Ce(E._canInitEmulator,E,"emulator-config-failed"),Ce(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const D=!!(null==f?void 0:f.disableWarnings),x=qn(h),{host:B,port:ne}=function(m){const h=qn(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(E);if(D){const x=D[1];return{host:x,port:Hi(E.substr(x.length+1))}}{const[x,B]=E.split(":");return{host:x,port:Hi(B)}}}(h);E.config.emulator={url:`${x}//${B}${null===ne?"":`:${ne}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:B,port:ne,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function m(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function(m,h){return Vu.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Uu(this._delegate,f)}confirmPasswordReset(f,E){return function(m,h,f){return Ii.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var D=this;return(0,v.Z)(function*(){return hi(D._delegate,function(m,h,f){return Bu.apply(this,arguments)}(D._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function(m,h){return Bf.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function(m,h){const f=Fs.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,v.Z)(function*(){wl(_l(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function(m,h){return ac.apply(this,arguments)}(f._delegate,Zs);return E?hi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function(m,h){In(m)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,E,D){const{next:x,error:B,complete:ne}=Vm(f,E,D);return this._delegate.onAuthStateChanged(x,B,ne)}onIdTokenChanged(f,E,D){const{next:x,error:B,complete:ne}=Vm(f,E,D);return this._delegate.onIdTokenChanged(x,B,ne)}sendSignInLinkToEmail(f,E){return function(m,h,f){return _s.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function(m,h,f){return ea.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,v.Z)(function*(){let D;switch(function(m,h){fc(Object.values(Mi).includes(h),m,"invalid-persistence-type"),(0,k.b$)()?fc(h!==Mi.SESSION,m,"unsupported-persistence-type"):(0,k.UG)()?fc(h===Mi.NONE,m,"unsupported-persistence-type"):hc()?fc(h===Mi.NONE||h===Mi.LOCAL&&(0,k.hl)(),m,"unsupported-persistence-type"):fc(h===Mi.NONE||yp(),m,"unsupported-persistence-type")}(E._delegate,f),f){case Mi.SESSION:D=_r;break;case Mi.LOCAL:D=(yield Mt(Qt)._isAvailable())?Qt:sr;break;case Mi.NONE:D=tn;break;default:return Vt("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return hi(this._delegate,function(m){return Xo.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return hi(this._delegate,vt(this._delegate,f))}signInWithCustomToken(f){return hi(this._delegate,function(m,h){return Fu.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return hi(this._delegate,function(m,h,f){return vt((0,k.m9)(m),fs.credential(h,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return hi(this._delegate,function(m,h,f){return za.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return pa(this._delegate,function(m,h,f){return xi.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,v.Z)(function*(){return wl(_l(),E._delegate,"operation-not-supported-in-this-environment"),hi(E._delegate,function(m,h,f){return Nr.apply(this,arguments)}(E._delegate,f,Zs))})()}signInWithRedirect(f){var E=this;return(0,v.Z)(function*(){return wl(_l(),E._delegate,"operation-not-supported-in-this-environment"),yield cu(E._delegate),function(m,h,f){return function(m,h,f){return eh.apply(this,arguments)}(m,h,f)}(E._delegate,f,Zs)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function(m,h){return na.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Mi,m})();function Vm(m,h,f){let E=m;"function"!=typeof m&&({next:E,error:h,complete:f}=m);const D=E;return{next:B=>D(B&&Ys.getOrCreate(B)),error:h,complete:f}}class wh{constructor(){this.providerId="phone",this._delegate=new ue(lu(X.Z.auth()))}static credential(h,f){return ue.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}wh.PHONE_SIGN_IN_METHOD=ue.PHONE_SIGN_IN_METHOD,wh.PROVIDER_ID=ue.PROVIDER_ID;const bp=Ce;class ga{constructor(h,f,E=X.Z.app()){var D;bp(null===(D=E.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ca(h,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(m){m.INTERNAL.registerComponent(new Ze.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new wp(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:fs,FacebookAuthProvider:Nu,GithubAuthProvider:Vd,GoogleAuthProvider:Ba,OAuthProvider:Yt,SAMLAuthProvider:_o,PhoneAuthProvider:wh,PhoneMultiFactorGenerator:lc,RecaptchaVerifier:ga,TwitterAuthProvider:xr,Auth:wp,AuthCredential:Ls,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.3")}(X.Z)},6676:function(Je,Ee){!function(F){"use strict";function v(K){return Array.prototype.slice.call(K)}function X(K){return new Promise(function(me,pe){K.onsuccess=function(){me(K.result)},K.onerror=function(){pe(K.error)}})}function k(K,me,pe){var fe,Se=new Promise(function(ze,Oe){X(fe=K[me].apply(K,pe)).then(ze,Oe)});return Se.request=fe,Se}function ce(K,me,pe){var fe=k(K,me,pe);return fe.then(function(Se){if(Se)return new L(Se,fe.request)})}function te(K,me,pe){pe.forEach(function(fe){Object.defineProperty(K.prototype,fe,{get:function(){return this[me][fe]},set:function(Se){this[me][fe]=Se}})})}function re(K,me,pe,fe){fe.forEach(function(Se){Se in pe.prototype&&(K.prototype[Se]=function(){return k(this[me],Se,arguments)})})}function ge(K,me,pe,fe){fe.forEach(function(Se){Se in pe.prototype&&(K.prototype[Se]=function(){return this[me][Se].apply(this[me],arguments)})})}function ae(K,me,pe,fe){fe.forEach(function(Se){Se in pe.prototype&&(K.prototype[Se]=function(){return ce(this[me],Se,arguments)})})}function ee(K){this._index=K}function L(K,me){this._cursor=K,this._request=me}function V(K){this._store=K}function Q(K){this._tx=K,this.complete=new Promise(function(me,pe){K.oncomplete=function(){me()},K.onerror=function(){pe(K.error)},K.onabort=function(){pe(K.error)}})}function Z(K,me,pe){this._db=K,this.oldVersion=me,this.transaction=new Q(pe)}function oe(K){this._db=K}te(ee,"_index",["name","keyPath","multiEntry","unique"]),re(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ae(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(L,"_cursor",["direction","key","primaryKey","value"]),re(L,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(L.prototype[K]=function(){var me=this,pe=arguments;return Promise.resolve().then(function(){return me._cursor[K].apply(me._cursor,pe),X(me._request).then(function(fe){if(fe)return new L(fe,me._request)})})})}),V.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},te(V,"_store",["name","keyPath","indexNames","autoIncrement"]),re(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ae(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ge(V,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),ge(Q,"_tx",IDBTransaction,["abort"]),Z.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},te(Z,"_db",["name","version","objectStoreNames"]),ge(Z,"_db",IDBDatabase,["deleteObjectStore","close"]),oe.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(oe,"_db",["name","version","objectStoreNames"]),ge(oe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[V,ee].forEach(function(me){K in me.prototype&&(me.prototype[K.replace("open","iterate")]=function(){var pe=v(arguments),fe=pe[pe.length-1],Se=this._store||this._index,ze=Se[K].apply(Se,pe.slice(0,-1));ze.onsuccess=function(){fe(ze.result)}})})}),[ee,V].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(me,pe){var fe=this,Se=[];return new Promise(function(ze){fe.iterateCursor(me,function(Oe){Oe?(Se.push(Oe.value),void 0===pe||Se.length!=pe?Oe.continue():ze(Se)):ze(Se)})})})}),F.openDb=function(K,me,pe){var fe=k(indexedDB,"open",[K,me]),Se=fe.request;return Se&&(Se.onupgradeneeded=function(ze){pe&&pe(new Z(Se.result,ze.oldVersion,Se.transaction))}),fe.then(function(ze){return new oe(ze)})},F.deleteDb=function(K){return k(indexedDB,"deleteDatabase",[K])},Object.defineProperty(F,"__esModule",{value:!0})}(Ee)},7574:(Je,Ee,F)=>{"use strict";F.d(Ee,{y:()=>V});var v=F(7393),k=F(9181),ce=F(6490),re=F(6554),ge=F(4487);var L=F(2494);let V=(()=>{class Z{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const he=new Z;return he.source=this,he.operator=we,he}subscribe(we,he,K){const{operator:me}=this,pe=function(Z,oe,we){if(Z){if(Z instanceof v.L)return Z;if(Z[k.b])return Z[k.b]()}return Z||oe||we?new v.L(Z,oe,we):new v.L(ce.c)}(we,he,K);if(pe.add(me?me.call(pe,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!pe.syncErrorThrowable?this._subscribe(pe):this._trySubscribe(pe)),L.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable&&(pe.syncErrorThrowable=!1,pe.syncErrorThrown))throw pe.syncErrorValue;return pe}_trySubscribe(we){try{return this._subscribe(we)}catch(he){L.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=he),function(Z){for(;Z;){const{closed:oe,destination:we,isStopped:he}=Z;if(oe||he)return!1;Z=we&&we instanceof v.L?we:null}return!0}(we)?we.error(he):console.warn(he)}}forEach(we,he){return new(he=Q(he))((K,me)=>{let pe;pe=this.subscribe(fe=>{try{we(fe)}catch(Se){me(Se),pe&&pe.unsubscribe()}},me,K)})}_subscribe(we){const{source:he}=this;return he&&he.subscribe(we)}[re.L](){return this}pipe(...we){return 0===we.length?this:function(Z){return 0===Z.length?ge.y:1===Z.length?Z[0]:function(we){return Z.reduce((he,K)=>K(he),we)}}(we)(this)}toPromise(we){return new(we=Q(we))((he,K)=>{let me;this.subscribe(pe=>me=pe,pe=>K(pe),()=>he(me))})}}return Z.create=oe=>new Z(oe),Z})();function Q(Z){if(Z||(Z=L.v.Promise||Promise),!Z)throw new Error("no Promise impl found");return Z}},6490:(Je,Ee,F)=>{"use strict";F.d(Ee,{c:()=>k});var v=F(2494),X=F(4449);const k={closed:!0,next(ce){},error(ce){if(v.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,X.z)(ce)},complete(){}}},9765:(Je,Ee,F)=>{"use strict";F.d(Ee,{Yc:()=>ge,xQ:()=>ae});var v=F(7574),X=F(7393),k=F(5319),ce=F(7971),te=F(8858),re=F(9181);class ge extends X.L{constructor(V){super(V),this.destination=V}}let ae=(()=>{class L extends v.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[re.b](){return new ge(this)}lift(Q){const Z=new ee(this,this);return Z.operator=Q,Z}next(Q){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:Z}=this,oe=Z.length,we=Z.slice();for(let he=0;he<oe;he++)we[he].next(Q)}}error(Q){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:Z}=this,oe=Z.length,we=Z.slice();for(let he=0;he<oe;he++)we[he].error(Q);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:Q}=this,Z=Q.length,oe=Q.slice();for(let we=0;we<Z;we++)oe[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new ce.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new ce.N;return this.hasError?(Q.error(this.thrownError),k.w.EMPTY):this.isStopped?(Q.complete(),k.w.EMPTY):(this.observers.push(Q),new te.W(this,Q))}asObservable(){const Q=new v.y;return Q.source=this,Q}}return L.create=(V,Q)=>new ee(V,Q),L})();class ee extends ae{constructor(V,Q){super(),this.destination=V,this.source=Q}next(V){const{destination:Q}=this;Q&&Q.next&&Q.next(V)}error(V){const{destination:Q}=this;Q&&Q.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:Q}=this;return Q?this.source.subscribe(V):k.w.EMPTY}}},8858:(Je,Ee,F)=>{"use strict";F.d(Ee,{W:()=>X});var v=F(5319);class X extends v.w{constructor(ce,te){super(),this.subject=ce,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,te=ce.observers;if(this.subject=null,!te||0===te.length||ce.isStopped||ce.closed)return;const re=te.indexOf(this.subscriber);-1!==re&&te.splice(re,1)}}},7393:(Je,Ee,F)=>{"use strict";F.d(Ee,{L:()=>ge});var v=F(9105),X=F(6490),k=F(5319),ce=F(9181),te=F(2494),re=F(4449);class ge extends k.w{constructor(L,V,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!L){this.destination=X.c;break}if("object"==typeof L){L instanceof ge?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new ae(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new ae(this,L,V,Q)}}[ce.b](){return this}static create(L,V,Q){const Z=new ge(L,V,Q);return Z.syncErrorThrowable=!1,Z}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class ae extends ge{constructor(L,V,Q,Z){super(),this._parentSubscriber=L;let oe,we=this;(0,v.m)(V)?oe=V:V&&(oe=V.next,Q=V.error,Z=V.complete,V!==X.c&&(we=Object.create(V),(0,v.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=oe,this._error=Q,this._complete=Z}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;te.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:Q}=te.v;if(this._error)Q&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(V.syncErrorThrowable)Q?(V.syncErrorValue=L,V.syncErrorThrown=!0):(0,re.z)(L),this.unsubscribe();else{if(this.unsubscribe(),Q)throw L;(0,re.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const V=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,V){try{L.call(this._context,V)}catch(Q){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,re.z)(Q)}}__tryOrSetError(L,V,Q){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,Q)}catch(Z){return te.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=Z,L.syncErrorThrown=!0,!0):((0,re.z)(Z),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(Je,Ee,F)=>{"use strict";F.d(Ee,{w:()=>re});var v=F(9796),X=F(1555),k=F(9105);const te=(()=>{function ae(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((L,V)=>`${V+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return ae.prototype=Object.create(Error.prototype),ae})();class re{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:V,_unsubscribe:Q,_subscriptions:Z}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof re)L.remove(this);else if(null!==L)for(let oe=0;oe<L.length;++oe)L[oe].remove(this);if((0,k.m)(Q)){V&&(this._unsubscribe=void 0);try{Q.call(this)}catch(oe){ee=oe instanceof te?ge(oe.errors):[oe]}}if((0,v.k)(Z)){let oe=-1,we=Z.length;for(;++oe<we;){const he=Z[oe];if((0,X.K)(he))try{he.unsubscribe()}catch(K){ee=ee||[],K instanceof te?ee=ee.concat(ge(K.errors)):ee.push(K)}}}if(ee)throw new te(ee)}add(ee){let L=ee;if(!ee)return re.EMPTY;switch(typeof ee){case"function":L=new re(ee);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof re)){const Z=L;L=new re,L._subscriptions=[Z]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:V}=L;if(null===V)L._parentOrParents=this;else if(V instanceof re){if(V===this)return L;L._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return L;V.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[L]:Q.push(L),L}remove(ee){const L=this._subscriptions;if(L){const V=L.indexOf(ee);-1!==V&&L.splice(V,1)}}}var ae;function ge(ae){return ae.reduce((ee,L)=>ee.concat(L instanceof te?L.errors:L),[])}re.EMPTY=((ae=new re).closed=!0,ae)},2494:(Je,Ee,F)=>{"use strict";F.d(Ee,{v:()=>X});let v=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else v&&console.log("RxJS: Back to a better error behavior. Thank you. <3");v=k},get useDeprecatedSynchronousErrorHandling(){return v}}},5345:(Je,Ee,F)=>{"use strict";F.d(Ee,{IY:()=>ce,Ds:()=>re,ft:()=>ae});var v=F(7393),X=F(7574),k=F(7444);class ce extends v.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class re extends v.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function ae(ee,L){if(L.closed)return;if(ee instanceof X.y)return ee.subscribe(L);let V;try{V=(0,k.s)(ee)(L)}catch(Q){L.error(Q)}return V}},2441:(Je,Ee,F)=>{"use strict";F.d(Ee,{c:()=>te,N:()=>re});var v=F(9765),X=F(7574),k=F(5319),ce=F(1307);class te extends X.y{constructor(V,Q){super(),this.source=V,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new k.w,V.add(this.source.subscribe(new ge(this.getSubject(),this))),V.closed&&(this._connection=null,V=k.w.EMPTY)),V}refCount(){return(0,ce.x)()(this)}}const re=(()=>{const L=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class ge extends v.Yc{constructor(V,Q){super(V),this.connectable=Q}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const Q=V._connection;V._refCount=0,V._subject=null,V._connection=null,Q&&Q.unsubscribe()}}}},9193:(Je,Ee,F)=>{"use strict";F.d(Ee,{E:()=>X,c:()=>k});var v=F(7574);const X=new v.y(te=>te.complete());function k(te){return te?function(te){return new v.y(re=>te.schedule(()=>re.complete()))}(te):X}},4402:(Je,Ee,F)=>{"use strict";F.d(Ee,{D:()=>we});var v=F(7574),X=F(7444),k=F(5319),ce=F(6554),ge=F(4087),ae=F(377),V=F(4072),Q=F(9489);function we(he,K){return K?function(he,K){if(null!=he){if(function(he){return he&&"function"==typeof he[ce.L]}(he))return function(he,K){return new v.y(me=>{const pe=new k.w;return pe.add(K.schedule(()=>{const fe=he[ce.L]();pe.add(fe.subscribe({next(Se){pe.add(K.schedule(()=>me.next(Se)))},error(Se){pe.add(K.schedule(()=>me.error(Se)))},complete(){pe.add(K.schedule(()=>me.complete()))}}))})),pe})}(he,K);if((0,V.t)(he))return function(he,K){return new v.y(me=>{const pe=new k.w;return pe.add(K.schedule(()=>he.then(fe=>{pe.add(K.schedule(()=>{me.next(fe),pe.add(K.schedule(()=>me.complete()))}))},fe=>{pe.add(K.schedule(()=>me.error(fe)))}))),pe})}(he,K);if((0,Q.z)(he))return(0,ge.r)(he,K);if(function(he){return he&&"function"==typeof he[ae.hZ]}(he)||"string"==typeof he)return function(he,K){if(!he)throw new Error("Iterable cannot be null");return new v.y(me=>{const pe=new k.w;let fe;return pe.add(()=>{fe&&"function"==typeof fe.return&&fe.return()}),pe.add(K.schedule(()=>{fe=he[ae.hZ](),pe.add(K.schedule(function(){if(me.closed)return;let Se,ze;try{const Oe=fe.next();Se=Oe.value,ze=Oe.done}catch(Oe){return void me.error(Oe)}ze?me.complete():(me.next(Se),this.schedule())}))})),pe})}(he,K)}throw new TypeError((null!==he&&typeof he||he)+" is not observable")}(he,K):he instanceof v.y?he:new v.y((0,X.s)(he))}},6693:(Je,Ee,F)=>{"use strict";F.d(Ee,{n:()=>ce});var v=F(7574),X=F(5015),k=F(4087);function ce(te,re){return re?(0,k.r)(te,re):new v.y((0,X.V)(te))}},6682:(Je,Ee,F)=>{"use strict";F.d(Ee,{T:()=>te});var v=F(7574),X=F(4869),k=F(3282),ce=F(6693);function te(...re){let ge=Number.POSITIVE_INFINITY,ae=null,ee=re[re.length-1];return(0,X.K)(ee)?(ae=re.pop(),re.length>1&&"number"==typeof re[re.length-1]&&(ge=re.pop())):"number"==typeof ee&&(ge=re.pop()),null===ae&&1===re.length&&re[0]instanceof v.y?re[0]:(0,k.J)(ge)((0,ce.n)(re,ae))}},5917:(Je,Ee,F)=>{"use strict";F.d(Ee,{of:()=>ce});var v=F(4869),X=F(6693),k=F(4087);function ce(...te){let re=te[te.length-1];return(0,v.K)(re)?(te.pop(),(0,k.r)(te,re)):(0,X.n)(te)}},8002:(Je,Ee,F)=>{"use strict";F.d(Ee,{U:()=>X});var v=F(7393);function X(te,re){return function(ae){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ae.lift(new k(te,re))}}class k{constructor(re,ge){this.project=re,this.thisArg=ge}call(re,ge){return ge.subscribe(new ce(re,this.project,this.thisArg))}}class ce extends v.L{constructor(re,ge,ae){super(re),this.project=ge,this.count=0,this.thisArg=ae||this}_next(re){let ge;try{ge=this.project.call(this.thisArg,re,this.count++)}catch(ae){return void this.destination.error(ae)}this.destination.next(ge)}}},3282:(Je,Ee,F)=>{"use strict";F.d(Ee,{J:()=>k});var v=F(9773),X=F(4487);function k(ce=Number.POSITIVE_INFINITY){return(0,v.zg)(X.y,ce)}},9773:(Je,Ee,F)=>{"use strict";F.d(Ee,{zg:()=>ce});var v=F(8002),X=F(4402),k=F(5345);function ce(ae,ee,L=Number.POSITIVE_INFINITY){return"function"==typeof ee?V=>V.pipe(ce((Q,Z)=>(0,X.D)(ae(Q,Z)).pipe((0,v.U)((oe,we)=>ee(Q,oe,Z,we))),L)):("number"==typeof ee&&(L=ee),V=>V.lift(new te(ae,L)))}class te{constructor(ee,L=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=L}call(ee,L){return L.subscribe(new re(ee,this.project,this.concurrent))}}class re extends k.Ds{constructor(ee,L,V=Number.POSITIVE_INFINITY){super(ee),this.project=L,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let L;const V=this.index++;try{L=this.project(ee,V)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(L)}_innerSub(ee){const L=new k.IY(this),V=this.destination;V.add(L);const Q=(0,k.ft)(ee,L);Q!==L&&V.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Je,Ee,F)=>{"use strict";F.d(Ee,{ht:()=>V,QV:()=>ee});var v=F(7393),X=F(9193),k=F(5917),ce=F(7574);class ae{constructor(oe,we,he){this.kind=oe,this.value=we,this.error=he,this.hasValue="N"===oe}observe(oe){switch(this.kind){case"N":return oe.next&&oe.next(this.value);case"E":return oe.error&&oe.error(this.error);case"C":return oe.complete&&oe.complete()}}do(oe,we,he){switch(this.kind){case"N":return oe&&oe(this.value);case"E":return we&&we(this.error);case"C":return he&&he()}}accept(oe,we,he){return oe&&"function"==typeof oe.next?this.observe(oe):this.do(oe,we,he)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return Z=this.error,new ce.y(we=>we.error(Z));case"C":return(0,X.c)()}var Z;throw new Error("unexpected notification kind value")}static createNext(oe){return void 0!==oe?new ae("N",oe):ae.undefinedValueNotification}static createError(oe){return new ae("E",void 0,oe)}static createComplete(){return ae.completeNotification}}function ee(Z,oe=0){return function(he){return he.lift(new L(Z,oe))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class L{constructor(oe,we=0){this.scheduler=oe,this.delay=we}call(oe,we){return we.subscribe(new V(oe,this.scheduler,this.delay))}}class V extends v.L{constructor(oe,we,he=0){super(oe),this.scheduler=we,this.delay=he}static dispatch(oe){const{notification:we,destination:he}=oe;we.observe(he),this.unsubscribe()}scheduleMessage(oe){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new Q(oe,this.destination)))}_next(oe){this.scheduleMessage(ae.createNext(oe))}_error(oe){this.scheduleMessage(ae.createError(oe)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class Q{constructor(oe,we){this.notification=oe,this.destination=we}}},1307:(Je,Ee,F)=>{"use strict";F.d(Ee,{x:()=>X});var v=F(7393);function X(){return function(re){return re.lift(new k(re))}}class k{constructor(re){this.connectable=re}call(re,ge){const{connectable:ae}=this;ae._refCount++;const ee=new ce(re,ae),L=ge.subscribe(ee);return ee.closed||(ee.connection=ae.connect()),L}}class ce extends v.L{constructor(re,ge){super(re),this.connectable=ge}_unsubscribe(){const{connectable:re}=this;if(!re)return void(this.connection=null);this.connectable=null;const ge=re._refCount;if(ge<=0)return void(this.connection=null);if(re._refCount=ge-1,ge>1)return void(this.connection=null);const{connection:ae}=this,ee=re._connection;this.connection=null,ee&&(!ae||ee===ae)&&ee.unsubscribe()}}},3101:(Je,Ee,F)=>{"use strict";F.d(Ee,{R:()=>K});var v=F(7574);let X=1;const k=Promise.resolve(),ce={};function te(pe){return pe in ce&&(delete ce[pe],!0)}const re={setImmediate(pe){const fe=X++;return ce[fe]=!0,k.then(()=>te(fe)&&pe()),fe},clearImmediate(pe){te(pe)}};var ae=F(6465),L=F(6102);const Z=new class extends L.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:Se}=this;let ze,Oe=-1,Tt=Se.length;fe=fe||Se.shift();do{if(ze=fe.execute(fe.state,fe.delay))break}while(++Oe<Tt&&(fe=Se.shift()));if(this.active=!1,ze){for(;++Oe<Tt&&(fe=Se.shift());)fe.unsubscribe();throw ze}}}(class extends ae.o{constructor(fe,Se){super(fe,Se),this.scheduler=fe,this.work=Se}requestAsyncId(fe,Se,ze=0){return null!==ze&&ze>0?super.requestAsyncId(fe,Se,ze):(fe.actions.push(this),fe.scheduled||(fe.scheduled=re.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,Se,ze=0){if(null!==ze&&ze>0||null===ze&&this.delay>0)return super.recycleAsyncId(fe,Se,ze);0===fe.actions.length&&(re.clearImmediate(Se),fe.scheduled=void 0)}});var oe=F(9796);class he extends v.y{constructor(fe,Se=0,ze=Z){var pe;super(),this.source=fe,this.delayTime=Se,this.scheduler=ze,(!(!(0,oe.k)(pe=Se)&&pe-parseFloat(pe)+1>=0)||Se<0)&&(this.delayTime=0),(!ze||"function"!=typeof ze.schedule)&&(this.scheduler=Z)}static create(fe,Se=0,ze=Z){return new he(fe,Se,ze)}static dispatch(fe){const{source:Se,subscriber:ze}=fe;return this.add(Se.subscribe(ze))}_subscribe(fe){return this.scheduler.schedule(he.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function K(pe,fe=0){return function(ze){return ze.lift(new me(pe,fe))}}class me{constructor(fe,Se){this.scheduler=fe,this.delay=Se}call(fe,Se){return new he(Se,this.delay,this.scheduler).subscribe(fe)}}},3342:(Je,Ee,F)=>{"use strict";F.d(Ee,{b:()=>ce});var v=F(7393);function X(){}var k=F(9105);function ce(ge,ae,ee){return function(V){return V.lift(new te(ge,ae,ee))}}class te{constructor(ae,ee,L){this.nextOrObserver=ae,this.error=ee,this.complete=L}call(ae,ee){return ee.subscribe(new re(ae,this.nextOrObserver,this.error,this.complete))}}class re extends v.L{constructor(ae,ee,L,V){super(ae),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=L||X,this._tapComplete=V||X,(0,k.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||X,this._tapError=ee.error||X,this._tapComplete=ee.complete||X)}_next(ae){try{this._tapNext.call(this._context,ae)}catch(ee){return void this.destination.error(ee)}this.destination.next(ae)}_error(ae){try{this._tapError.call(this._context,ae)}catch(ee){return void this.destination.error(ee)}this.destination.error(ae)}_complete(){try{this._tapComplete.call(this._context)}catch(ae){return void this.destination.error(ae)}return this.destination.complete()}}},4087:(Je,Ee,F)=>{"use strict";F.d(Ee,{r:()=>k});var v=F(7574),X=F(5319);function k(ce,te){return new v.y(re=>{const ge=new X.w;let ae=0;return ge.add(te.schedule(function(){ae!==ce.length?(re.next(ce[ae++]),re.closed||ge.add(this.schedule())):re.complete()})),ge})}},6465:(Je,Ee,F)=>{"use strict";F.d(Ee,{o:()=>k});var v=F(5319);class X extends v.w{constructor(te,re){super()}schedule(te,re=0){return this}}class k extends X{constructor(te,re){super(te,re),this.scheduler=te,this.work=re,this.pending=!1}schedule(te,re=0){if(this.closed)return this;this.state=te;const ge=this.id,ae=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(ae,ge,re)),this.pending=!0,this.delay=re,this.id=this.id||this.requestAsyncId(ae,this.id,re),this}requestAsyncId(te,re,ge=0){return setInterval(te.flush.bind(te,this),ge)}recycleAsyncId(te,re,ge=0){if(null!==ge&&this.delay===ge&&!1===this.pending)return re;clearInterval(re)}execute(te,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(te,re);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,re){let ae,ge=!1;try{this.work(te)}catch(ee){ge=!0,ae=!!ee&&ee||new Error(ee)}if(ge)return this.unsubscribe(),ae}_unsubscribe(){const te=this.id,re=this.scheduler,ge=re.actions,ae=ge.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ae&&ge.splice(ae,1),null!=te&&(this.id=this.recycleAsyncId(re,te,null)),this.delay=null}}},6102:(Je,Ee,F)=>{"use strict";F.d(Ee,{v:()=>X});let v=(()=>{class k{constructor(te,re=k.now){this.SchedulerAction=te,this.now=re}schedule(te,re=0,ge){return new this.SchedulerAction(this,te).schedule(ge,re)}}return k.now=()=>Date.now(),k})();class X extends v{constructor(ce,te=v.now){super(ce,()=>X.delegate&&X.delegate!==this?X.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,te=0,re){return X.delegate&&X.delegate!==this?X.delegate.schedule(ce,te,re):super.schedule(ce,te,re)}flush(ce){const{actions:te}=this;if(this.active)return void te.push(ce);let re;this.active=!0;do{if(re=ce.execute(ce.state,ce.delay))break}while(ce=te.shift());if(this.active=!1,re){for(;ce=te.shift();)ce.unsubscribe();throw re}}}},3637:(Je,Ee,F)=>{"use strict";F.d(Ee,{z:()=>k});var v=F(6465);const k=new(F(6102).v)(v.o)},7771:(Je,Ee,F)=>{"use strict";F.d(Ee,{c:()=>re,N:()=>te});var v=F(6465),k=F(6102);const te=new class extends k.v{}(class extends v.o{constructor(ae,ee){super(ae,ee),this.scheduler=ae,this.work=ee}schedule(ae,ee=0){return ee>0?super.schedule(ae,ee):(this.delay=ee,this.state=ae,this.scheduler.flush(this),this)}execute(ae,ee){return ee>0||this.closed?super.execute(ae,ee):this._execute(ae,ee)}requestAsyncId(ae,ee,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(ae,ee,L):ae.flush(this)}}),re=te},377:(Je,Ee,F)=>{"use strict";F.d(Ee,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Je,Ee,F)=>{"use strict";F.d(Ee,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Je,Ee,F)=>{"use strict";F.d(Ee,{b:()=>v});const v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Je,Ee,F)=>{"use strict";F.d(Ee,{N:()=>X});const X=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Je,Ee,F)=>{"use strict";function v(X){setTimeout(()=>{throw X},0)}F.d(Ee,{z:()=>v})},4487:(Je,Ee,F)=>{"use strict";function v(X){return X}F.d(Ee,{y:()=>v})},9796:(Je,Ee,F)=>{"use strict";F.d(Ee,{k:()=>v});const v=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(Je,Ee,F)=>{"use strict";F.d(Ee,{z:()=>v});const v=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(Je,Ee,F)=>{"use strict";function v(X){return"function"==typeof X}F.d(Ee,{m:()=>v})},1555:(Je,Ee,F)=>{"use strict";function v(X){return null!==X&&"object"==typeof X}F.d(Ee,{K:()=>v})},4072:(Je,Ee,F)=>{"use strict";function v(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}F.d(Ee,{t:()=>v})},4869:(Je,Ee,F)=>{"use strict";function v(X){return X&&"function"==typeof X.schedule}F.d(Ee,{K:()=>v})},7444:(Je,Ee,F)=>{"use strict";F.d(Ee,{s:()=>V});var v=F(5015),X=F(4449),ce=F(377),re=F(6554),ae=F(9489),ee=F(4072),L=F(1555);const V=Q=>{if(Q&&"function"==typeof Q[re.L])return(Q=>Z=>{const oe=Q[re.L]();if("function"!=typeof oe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return oe.subscribe(Z)})(Q);if((0,ae.z)(Q))return(0,v.V)(Q);if((0,ee.t)(Q))return(Q=>Z=>(Q.then(oe=>{Z.closed||(Z.next(oe),Z.complete())},oe=>Z.error(oe)).then(null,X.z),Z))(Q);if(Q&&"function"==typeof Q[ce.hZ])return(Q=>Z=>{const oe=Q[ce.hZ]();for(;;){let we;try{we=oe.next()}catch(he){return Z.error(he),Z}if(we.done){Z.complete();break}if(Z.next(we.value),Z.closed)break}return"function"==typeof oe.return&&Z.add(()=>{oe.return&&oe.return()}),Z})(Q);{const oe=`You provided ${(0,L.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(oe)}}},5015:(Je,Ee,F)=>{"use strict";F.d(Ee,{V:()=>v});const v=X=>k=>{for(let ce=0,te=X.length;ce<te&&!k.closed;ce++)k.next(X[ce]);k.complete()}},1778:(Je,Ee,F)=>{"use strict";var v=F(3018);let X=null;function k(){return X}const ge=new v.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,v.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,v.LFG)(V)}const L=new v.OlP("Location Initialized");let V=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){Q()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){Q()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge))},n.\u0275prov=(0,v.Yz7)({factory:Z,token:n,providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Z(){return new V((0,v.LFG)(ge))}function oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function he(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,v.Yz7)({factory:me,token:n,providedIn:"root"}),n})();function me(n){const e=(0,v.LFG)(ge).location;return new fe((0,v.LFG)(ae),e&&e.origin||"")}const pe=new v.OlP("appBaseHref");let fe=(()=>{class n extends K{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return oe(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+he(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,l){const p=this.prepareExternalUrl(a+he(l));this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){const p=this.prepareExternalUrl(a+he(l));this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ae),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends K{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=oe(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,l){let p=this.prepareExternalUrl(a+he(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){let p=this.prepareExternalUrl(a+he(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ae),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t,s){this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=we(pt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+he(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+he(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+he(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(K),v.LFG(ae))},n.normalizeQueryParams=he,n.joinWithSlash=oe,n.stripTrailingSlash=we,n.\u0275prov=(0,v.Yz7)({factory:Oe,token:n,providedIn:"root"}),n})();function Oe(){return new ze((0,v.LFG)(K),(0,v.LFG)(ae))}function pt(n){return n.replace(/\/index.html$/,"")}var _t=(()=>((_t=_t||{})[_t.Zero=0]="Zero",_t[_t.One=1]="One",_t[_t.Two=2]="Two",_t[_t.Few=3]="Few",_t[_t.Many=4]="Many",_t[_t.Other=5]="Other",_t))();const pr=v.kL8;class Wn{}let Nn=(()=>{class n extends Wn{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(pr(s||this.locale)(t)){case _t.Zero:return"zero";case _t.One:return"one";case _t.Two:return"two";case _t.Few:return"few";case _t.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.soG))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function ut(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}class go{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bi=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=[];t.forEachOperation((a,l,p)=>{if(null==a.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new go(null,this._ngForOf,-1,-1),null===p?void 0:p),b=new mr(a,_);s.push(b)}else if(null==p)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const _=this._viewContainer.get(l);this._viewContainer.move(_,p);const b=new mr(a,_);s.push(b)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const p=this._viewContainer.get(a);p.context.index=a,p.context.count=l,p.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,s){t.context.$implicit=s.item}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class mr{constructor(e,t){this.record=e,this.view=t}}class Ls{createSubscription(e,t){return e.subscribe({next:t,error:s=>{throw s}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Oa{createSubscription(e,t){return e.then(t,s=>{throw s})}dispose(e){}onDestroy(e){}}const Ko=new Oa,oi=new Ls;let xu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,s=>this._updateLatestValue(t,s))}_selectStrategy(t){if((0,v.QGY)(t))return Ko;if((0,v.F4k)(t))return oi;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,v.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,s){t===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.sBO,16))},n.\u0275pipe=v.Yjl({name:"async",type:n,pure:!1}),n})(),hs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[{provide:Wn,useClass:Nn}]}),n})();function Fa(n){return"server"===n}let Va=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new Uf((0,v.LFG)(ge),window)}),n})();class Uf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qo(this.window.history)||Qo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ua{}class ja extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ja,X||(X=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(fs=fs||document.querySelector("base"),fs?fs.getAttribute("href"):null);return null==t?null:function(n){zi=zi||document.createElement("a"),zi.setAttribute("href",n);const e=zi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ut(document.cookie,e)}}let zi,fs=null;const Nu=new v.OlP("TRANSITION_ID"),Vd=[{provide:v.ip1,useFactory:function(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const s=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[Nu,ge,v.zs3],multi:!0}];class wt{static init(){(0,v.VLi)(new wt)}addToWindow(e){v.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(s=>{const a=v.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const _=function(b){p=p||b,l--,0==l&&s(p)};a.forEach(function(b){b.whenStable(_)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Jo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const gs=new v.OlP("EventManagerPlugins");let Vs=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(gs),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Ou=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ms=(()=>{class n extends Ou{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(el),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(el))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function el(n){k().remove(n)}const be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=/%COMP%/g;function Us(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?Us(n,a,t):(a=a.replace(vt,n),t.push(a))}return t}function $d(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ys=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new qi(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case v.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new js(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case v.ifc.ShadowDom:return new Ii(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=Us(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Vs),v.LFG(ms),v.LFG(v.AFp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class qi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(be[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=be[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=be[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,s,a&v.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$d(s)):this.eventManager.addEventListener(e,t,$d(s))}}class js extends qi{constructor(e,t,s,a){super(e),this.component=s;const l=Us(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(vt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(vt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class Ii extends qi{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Us(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const _=document.createElement("style");_.textContent=l[p],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tl=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const _s=["alt","control","meta","shift"],$u={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},za={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Gr=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(_s.forEach(b=>{const A=s.indexOf(b);A>-1&&(s.splice(A,1),p+=b+".")}),p+=l,0!=s.length||0===l.length)return null;const _={};return _.domEventName=a,_.fullKey=p,_}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&za.hasOwnProperty(e)&&(e=za[e]))}return $u[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),_s.forEach(l=>{l!=a&&Rr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){ja.makeCurrent(),wt.init()},multi:!0},{provide:ge,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),Bs=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:gs,useClass:tl,multi:!0,deps:[ge,v.R0b,v.Lbi]},{provide:gs,useClass:Gr,multi:!0,deps:[ge]},[],{provide:ys,useClass:ys,deps:[Vs,ms,v.AFp]},{provide:v.FYo,useExisting:ys},{provide:Ou,useExisting:ms},{provide:ms,useClass:ms,deps:[ge]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:Vs,useClass:Vs,deps:[gs,v.R0b]},{provide:Ua,useClass:Jo,deps:[]},[]];let Ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:Nu,useExisting:v.AFp},Vd]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(n,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:Bs,imports:[hs,v.hGG]}),n})();"undefined"!=typeof window&&window;var Qe=F(5917),mn=F(7574),ir=F(9773);function ci(n,e){return(0,ir.zg)(n,e,1)}var yr=F(7393);function sr(n,e){return function(s){return s.lift(new Ju(n,e))}}class Ju{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new _r(e,this.predicate,this.thisArg))}}class _r extends yr.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}var st=F(8002);class Zd{}class Co{}class Ki{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const s=t.indexOf(":");if(s>0){const a=t.slice(0,s),l=a.toLowerCase(),p=t.slice(s+1).trim();this.maybeSetNormalizedName(a,l),this.headers.has(l)?this.headers.get(l).push(p):this.headers.set(l,[p])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let s=e[t];const a=t.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(a,s),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ki?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ki;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ki?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...s),this.headers.set(t,a);break;case"d":const l=e.value;if(l){let p=this.headers.get(t);if(!p)return;p=p.filter(_=>-1===l.indexOf(_)),0===p.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,p)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Cn{encodeKey(e){return $s(e)}encodeValue(e){return $s(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const rl=/%(\d[a-f0-9])/gi,ia={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $s(n){return encodeURIComponent(n).replace(rl,(e,t)=>{var s;return null!==(s=ia[t])&&void 0!==s?s:e})}function Xu(n){return`${n}`}class vs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cn,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const l=a.indexOf("="),[p,_]=-1==l?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,l)),e.decodeValue(a.slice(l+1))],b=t.get(p)||[];b.push(_),t.set(p,b)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const s=e.fromObject[t];this.map.set(t,Array.isArray(s)?s:[s])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(s=>{const a=e[s];Array.isArray(a)?a.forEach(l=>{t.push({param:s,value:l,op:"a"})}):t.push({param:s,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(s=>t+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new vs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Xu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let s=this.map.get(e.param)||[];const a=s.indexOf(Xu(e.value));-1!==a&&s.splice(a,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sa{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function tc(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Hs(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Zi(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Di{constructor(e,t,s,a){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==s?s:null,l=a):l=s,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Ki),this.context||(this.context=new sa),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=t;else{const _=t.indexOf("?");this.urlWithParams=t+(-1===_?"?":_<t.length-1?"&":"")+p}}else this.params=new vs,this.urlWithParams=t}serializeBody(){return null===this.body?null:tc(this.body)||Hs(this.body)||Zi(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof vs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zi(this.body)?null:Hs(this.body)?this.body.type||null:tc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const s=e.method||this.method,a=e.url||this.url,l=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,_=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,b=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let A=e.headers||this.headers,M=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(A=Object.keys(e.setHeaders).reduce((q,W)=>q.set(W,e.setHeaders[W]),A)),e.setParams&&(M=Object.keys(e.setParams).reduce((q,W)=>q.set(W,e.setParams[W]),M)),new Di(s,a,p,{params:M,headers:A,context:O,reportProgress:b,responseType:l,withCredentials:_})}}var nn=(()=>((nn=nn||{})[nn.Sent=0]="Sent",nn[nn.UploadProgress=1]="UploadProgress",nn[nn.ResponseHeader=2]="ResponseHeader",nn[nn.DownloadProgress=3]="DownloadProgress",nn[nn.Response=4]="Response",nn[nn.User=5]="User",nn))();class oa{constructor(e,t=200,s="OK"){this.headers=e.headers||new Ki,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zs extends oa{constructor(e={}){super(e),this.type=nn.ResponseHeader}clone(e={}){return new zs({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class eu extends oa{constructor(e={}){super(e),this.type=nn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new eu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class il extends oa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function nc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Yd=(()=>{class n{constructor(t){this.handler=t}request(t,s,a={}){let l;if(t instanceof Di)l=t;else{let b,A;b=a.headers instanceof Ki?a.headers:new Ki(a.headers),a.params&&(A=a.params instanceof vs?a.params:new vs({fromObject:a.params})),l=new Di(t,s,void 0!==a.body?a.body:null,{headers:b,context:a.context,params:A,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const p=(0,Qe.of)(l).pipe(ci(b=>this.handler.handle(b)));if(t instanceof Di||"events"===a.observe)return p;const _=p.pipe(sr(b=>b instanceof eu));switch(a.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return _.pipe((0,st.U)(b=>{if(null!==b.body&&!(b.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return b.body}));case"blob":return _.pipe((0,st.U)(b=>{if(null!==b.body&&!(b.body instanceof Blob))throw new Error("Response is not a Blob.");return b.body}));case"text":return _.pipe((0,st.U)(b=>{if(null!==b.body&&"string"!=typeof b.body)throw new Error("Response is not a string.");return b.body}));case"json":default:return _.pipe((0,st.U)(b=>b.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,s={}){return this.request("DELETE",t,s)}get(t,s={}){return this.request("GET",t,s)}head(t,s={}){return this.request("HEAD",t,s)}jsonp(t,s){return this.request("JSONP",t,{params:(new vs).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,s={}){return this.request("OPTIONS",t,s)}patch(t,s,a={}){return this.request("PATCH",t,nc(a,s))}post(t,s,a={}){return this.request("POST",t,nc(a,s))}put(t,s,a={}){return this.request("PUT",t,nc(a,s))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Zd))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Wf{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Qt=new v.OlP("HTTP_INTERCEPTORS");let qf=(()=>{class n{intercept(t,s){return s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Jf=/^\)\]\}',?\n/;let sl=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new mn.y(s=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((W,le)=>a.setRequestHeader(W,le.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const W=t.detectContentTypeHeader();null!==W&&a.setRequestHeader("Content-Type",W)}if(t.responseType){const W=t.responseType.toLowerCase();a.responseType="json"!==W?W:"text"}const l=t.serializeBody();let p=null;const _=()=>{if(null!==p)return p;const W=1223===a.status?204:a.status,le=a.statusText||"OK",Pe=new Ki(a.getAllResponseHeaders()),je=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return p=new zs({headers:Pe,status:W,statusText:le,url:je}),p},b=()=>{let{headers:W,status:le,statusText:Pe,url:je}=_(),ct=null;204!==le&&(ct=void 0===a.response?a.responseText:a.response),0===le&&(le=ct?200:0);let Nt=le>=200&&le<300;if("json"===t.responseType&&"string"==typeof ct){const bn=ct;ct=ct.replace(Jf,"");try{ct=""!==ct?JSON.parse(ct):null}catch(kt){ct=bn,Nt&&(Nt=!1,ct={error:kt,text:ct})}}Nt?(s.next(new eu({body:ct,headers:W,status:le,statusText:Pe,url:je||void 0})),s.complete()):s.error(new il({error:ct,headers:W,status:le,statusText:Pe,url:je||void 0}))},A=W=>{const{url:le}=_(),Pe=new il({error:W,status:a.status||0,statusText:a.statusText||"Unknown Error",url:le||void 0});s.error(Pe)};let M=!1;const O=W=>{M||(s.next(_()),M=!0);let le={type:nn.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(le.total=W.total),"text"===t.responseType&&!!a.responseText&&(le.partialText=a.responseText),s.next(le)},q=W=>{let le={type:nn.UploadProgress,loaded:W.loaded};W.lengthComputable&&(le.total=W.total),s.next(le)};return a.addEventListener("load",b),a.addEventListener("error",A),a.addEventListener("timeout",A),a.addEventListener("abort",A),t.reportProgress&&(a.addEventListener("progress",O),null!==l&&a.upload&&a.upload.addEventListener("progress",q)),a.send(l),s.next({type:nn.Sent}),()=>{a.removeEventListener("error",A),a.removeEventListener("abort",A),a.removeEventListener("load",b),a.removeEventListener("timeout",A),t.reportProgress&&(a.removeEventListener("progress",O),null!==l&&a.upload&&a.upload.removeEventListener("progress",q)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ua))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=new v.OlP("XSRF_COOKIE_NAME"),Xf=new v.OlP("XSRF_HEADER_NAME");class yn{}let rc=(()=>{class n{constructor(t,s,a){this.doc=t,this.platform=s,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ut(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ge),v.LFG(v.Lbi),v.LFG(aa))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ua=(()=>{class n{constructor(t,s){this.tokenService=t,this.headerName=s}intercept(t,s){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return s.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(yn),v.LFG(Xf))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),nu=(()=>{class n{constructor(t,s){this.backend=t,this.injector=s,this.chain=null}handle(t){if(null===this.chain){const s=this.injector.get(Qt,[]);this.chain=s.reduceRight((a,l)=>new Wf(a,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Co),v.LFG(v.zs3))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Si=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ua,useClass:qf}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:aa,useValue:t.cookieName}:[],t.headerName?{provide:Xf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[ua,{provide:Qt,useExisting:ua,multi:!0},{provide:yn,useClass:rc},{provide:aa,useValue:"XSRF-TOKEN"},{provide:Xf,useValue:"X-XSRF-TOKEN"}]}),n})(),Ai=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[Yd,{provide:Zd,useClass:nu},sl,{provide:Co,useExisting:sl}],imports:[[Si.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const ol={apiKey:"AIzaSyA5w3KM3LT_UhseRfPeY5awu5o8q_q8-I0",authDomain:"edulibrary-d7f8e.firebaseapp.com",databaseURL:"https://edulibrary-d7f8e-default-rtdb.firebaseio.com",projectId:"edulibrary-d7f8e",storageBucket:"edulibrary-d7f8e.appspot.com",messagingSenderId:"416291166217",appId:"1:416291166217:web:81494ed5a103c92500c0d8",measurementId:"G-JZNVTHM8CZ"};var Dn=F(4402),xi=F(9765),tp=F(7971);class li extends xi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new tp.N;return this._value}next(e){super.next(this._value=e)}}var Jd=F(4869),I=F(9796);class T extends yr.L{notifyNext(e,t,s,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class R extends yr.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var U=F(7444);function Y(n,e,t,s,a=new R(n,t,s)){if(!a.closed)return e instanceof mn.y?e.subscribe(a):(0,U.s)(e)(a)}var ue=F(6693);const Ie={};class $e{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Ft(e,this.resultSelector))}}class Ft extends T{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ie),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add(Y(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,p=this.toRespond?a[s]===Ie?--this.toRespond:this.toRespond:0;a[s]=t,0===p&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}const Tn=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Pn=F(3282);function di(...n){return(0,Pn.J)(1)((0,Qe.of)(...n))}var Nr=F(9193);function Wr(n){return new mn.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,Dn.D)(t):(0,Nr.c)()).subscribe(e)})}var Es=F(2441),Ri=F(5345);function _n(n,e){return"function"==typeof e?t=>t.pipe(_n((s,a)=>(0,Dn.D)(n(s,a)).pipe((0,st.U)((l,p)=>e(s,l,a,p))))):t=>t.lift(new al(n))}class al{constructor(e){this.project=e}call(e,t){return t.subscribe(new X0(e,this.project))}}class X0 extends Ri.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new Ri.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,Ri.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const ic=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Yi(n){return e=>0===n?(0,Nr.c)():e.lift(new np(n))}class np{constructor(e){if(this.total=e,this.total<0)throw new ic}call(e,t){return t.subscribe(new Sn(e,this.total))}}class Sn extends yr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}function ru(...n){const e=n[n.length-1];return(0,Jd.K)(e)?(n.pop(),t=>di(n,t,e)):t=>di(n,t)}function Xd(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new la(n,e,t))}}class la{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new sc(e,this.accumulator,this.seed,this.hasSeed))}}class sc extends yr.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function iu(n){return function(t){const s=new gm(n),a=t.lift(s);return s.caught=a}}class gm{constructor(e){this.selector=e}call(e,t){return t.subscribe(new eh(e,this.selector,this.caught))}}class eh extends Ri.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const s=new Ri.IY(this);this.add(s);const a=(0,Ri.ft)(t,s);a!==s&&this.add(a)}}}function mm(n){return function(t){return 0===n?(0,Nr.c)():t.lift(new oc(n))}}class oc{constructor(e){if(this.total=e,this.total<0)throw new ic}call(e,t){return t.subscribe(new ws(e,this.total))}}class ws extends yr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<s;l++){const p=t++%s;e.next(a[p])}}e.complete()}}function cl(n=ym){return e=>e.lift(new da(n))}class da{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new rp(e,this.errorFactory))}}class rp extends yr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function ym(){return new Tn}function ac(n=null){return e=>e.lift(new su(n))}class su{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new th(e,this.defaultValue))}}class th extends yr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ip=F(4487);function Qi(n,e){const t=arguments.length>=2;return s=>s.pipe(n?sr((a,l)=>n(a,l,s)):ip.y,Yi(1),t?ac(e):cl(()=>new Tn))}var ar=F(3342),_m=F(1307),vm=F(5319);class wm{constructor(e){this.callback=e}call(e,t){return t.subscribe(new bm(e,this.callback))}}class bm extends yr.L{constructor(e,t){super(e),this.add(new vm.w(t))}}class To{constructor(e,t){this.id=e,this.url=t}}class op extends To{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ll extends To{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ou extends To{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ap extends To{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uc extends To{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Im extends To{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class av extends To{constructor(e,t,s,a,l){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class up extends To{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nh extends To{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cp{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cm{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dm{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class au{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uv{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tm{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const bt="primary";class cv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cc(n){return new cv(n)}const Ws="ngNavigationCancelingError";function ha(n){const e=Error("NavigationCancelingError: "+n);return e[Ws]=!0,e}function Am(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let l=0;l<s.length;l++){const p=s[l],_=n[l];if(p.startsWith(":"))a[p.substring(1)]=_;else if(p!==_.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function qs(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!xm(n[a],e[a]))return!1;return!0}function xm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,l)=>s[l]===a)}return n===e}function Rm(n){return Array.prototype.concat.apply([],n)}function dl(n){return n.length>0?n[n.length-1]:null}function Yn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ks(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):(0,Qe.of)(n)}const tb={exact:function Ji(n,e,t){if(!So(n.segments,e.segments)||!sh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!Ji(n.children[s],e.children[s],t))return!1;return!0},subset:dp},ih={exact:function(n,e){return qs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xm(n[t],e[t]))},ignored:()=>!0};function lc(n,e,t){return tb[t.paths](n.root,e.root,t.matrixParams)&&ih[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dp(n,e,t){return hp(n,e,e.segments,t)}function hp(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!So(a,t)||e.hasChildren()||!sh(a,t,s))}if(n.segments.length===t.length){if(!So(n.segments,t)||!sh(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!dp(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(So(n.segments,a)&&sh(n.segments,a,s)&&n.children[bt])&&hp(n.children[bt],e,l,s)}}function sh(n,e,t){return e.every((s,a)=>ih[t](n[a].parameters,s.parameters))}class Xi{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return ah.serialize(this)}}class Pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yn(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uh(this)}}class oh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=cc(this.parameters)),this._parameterMap}toString(){return fp(this)}}function So(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class Mm{}class dv{parse(e){const t=new mv(e);return new Xi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${gl(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${lh(t)}=${lh(a)}`).join("&"):`${lh(t)}=${lh(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const ah=new dv;function uh(n){return n.segments.map(e=>fp(e)).join("/")}function gl(n,e){if(!n.hasChildren())return uh(n);if(e){const t=n.children[bt]?gl(n.children[bt],!1):"",s=[];return Yn(n.children,(a,l)=>{l!==bt&&s.push(`${l}:${gl(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return Yn(n.children,(s,a)=>{a===bt&&(t=t.concat(e(s,a)))}),Yn(n.children,(s,a)=>{a!==bt&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===bt?[gl(n.children[bt],!1)]:[`${a}:${gl(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${uh(n)}/${t[0]}`:`${uh(n)}/(${t.join("//")})`}}function ch(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lh(n){return ch(n).replace(/%3B/gi,";")}function dc(n){return ch(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ml(n){return decodeURIComponent(n)}function dh(n){return ml(n.replace(/\+/g,"%20"))}function fp(n){return`${dc(n.path)}${function(n){return Object.keys(n).map(e=>`;${dc(e)}=${dc(n[e])}`).join("")}(n.parameters)}`}const fv=/^[^\/()?;=#]+/;function fa(n){const e=n.match(fv);return e?e[0]:""}const hh=/^[^=?&#]+/,gv=/^[^?&#]+/;class mv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[bt]=new Pt(e,t)),s}parseSegment(){const e=fa(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new oh(ml(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fa(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=fa(this.remaining);a&&(s=a,this.capture(s))}e[ml(t)]=ml(s)}parseQueryParam(e){const t=function(n){const e=n.match(hh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const p=function(n){const e=n.match(gv);return e?e[0]:""}(this.remaining);p&&(s=p,this.capture(s))}const a=dh(t),l=dh(s);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=fa(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=bt);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[bt]:new Pt([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Om{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=km(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=km(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return pp(e,this._root).map(t=>t.value)}}function km(n,e){if(n===e.value)return e;for(const t of e.children){const s=km(n,t);if(s)return s}return null}function pp(n,e){if(n===e.value)return[e];for(const t of e.children){const s=pp(n,t);if(s.length)return s.unshift(e),s}return[]}class Ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qn(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ph extends Om{constructor(e,t){super(e),this.snapshot=t,mh(this,e)}toString(){return this.snapshot.toString()}}function gp(n,e){const t=function(n,e){const p=new gh([],{},{},"",{},bt,e,null,n.root,-1,{});return new Lm("",new Ni(p,[]))}(n,e),s=new li([new oh("",{})]),a=new li({}),l=new li({}),p=new li({}),_=new li(""),b=new On(s,a,p,_,l,bt,e,t.root);return b.snapshot=t.root,new ph(new Ni(b,[]),t)}class On{constructor(e,t,s,a,l,p,_,b){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>cc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>cc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uu(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],l=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class gh{constructor(e,t,s,a,l,p,_,b,A,M,O){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this.routeConfig=b,this._urlSegment=A,this._lastPathIndex=M,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lm extends Om{constructor(e,t){super(t),this.url=e,mh(this,t)}toString(){return yp(this._root)}}function mh(n,e){e.value._routerState=n,e.children.forEach(t=>mh(n,t))}function yp(n){const e=n.children.length>0?` { ${n.children.map(yp).join(", ")} } `:"";return`${n.value}${e}`}function hc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _l(n,e){return qs(n.params,e.params)&&function(n,e){return So(n,e)&&n.every((t,s)=>qs(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||_l(n.parent,e.parent))}function yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return yh(n,s,a);return yh(n,s)})}(n,e,t);return new Ni(s,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return _h(e,p),p}}const s=function(n){return new On(new li(n.url),new li(n.params),new li(n.queryParams),new li(n.fragment),new li(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>yh(n,l));return new Ni(s,a)}}function _h(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)_h(n.children[t],e.children[t])}function vl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cu(n){return"object"==typeof n&&null!=n&&n.outlets}function Eh(n,e,t,s,a){let l={};return s&&Yn(s,(p,_)=>{l[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),new Xi(t.root===n?e:vp(t.root,n,e),l,a)}function vp(n,e,t){const s={};return Yn(n.children,(a,l)=>{s[l]=a===e?t:vp(a,e,t)}),new Pt(n.segments,s)}class pc{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&vl(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(cu);if(a&&a!==dl(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zs{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function Fm(n,e,t){if(n||(n=new Pt([],{})),0===n.segments.length&&n.hasChildren())return El(n,e,t);const s=function(n,e,t){let s=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return l;const p=n.segments[a],_=t[s];if(cu(_))break;const b=`${_}`,A=s<t.length-1?t[s+1]:null;if(a>0&&void 0===b)break;if(b&&A&&"object"==typeof A&&void 0===A.outlets){if(!Ys(b,A,p))return l;s+=2}else{if(!Ys(b,{},p))return l;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new Pt(n.segments.slice(0,s.pathIndex),{});return l.children[bt]=new Pt(n.segments.slice(s.pathIndex),n.children),El(l,0,a)}return s.match&&0===a.length?new Pt(n.segments,{}):s.match&&!n.hasChildren()?pa(n,e,t):s.match?El(n,0,a):pa(n,e,t)}function El(n,e,t){if(0===t.length)return new Pt(n.segments,{});{const s=function(n){return cu(n[0])?n[0].outlets:{[bt]:n}}(t),a={};return Yn(s,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=Fm(n.children[p],e,l))}),Yn(n.children,(l,p)=>{void 0===s[p]&&(a[p]=l)}),new Pt(n.segments,a)}}function pa(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(cu(l)){const b=fi(l.outlets);return new Pt(s,b)}if(0===a&&vl(t[0])){s.push(new oh(n.segments[e].path,Ep(t[0]))),a++;continue}const p=cu(l)?l.outlets[bt]:`${l}`,_=a<t.length-1?t[a+1]:null;p&&_&&vl(_)?(s.push(new oh(p,Ep(_))),a+=2):(s.push(new oh(p,{})),a++)}return new Pt(s,{})}function fi(n){const e={};return Yn(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=pa(new Pt([],{}),0,t))}),e}function Ep(n){const e={};return Yn(n,(t,s)=>e[s]=`${t}`),e}function Ys(n,e,t){return n==t.path&&qs(e,t.parameters)}class wp{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),hc(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=Qn(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],s),delete a[p]}),Yn(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=s.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),l=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,l=Qn(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=Qn(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],s),this.forwardEvent(new uv(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Dm(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(hc(a),a===l)if(a.component){const p=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const p=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(_.contexts),p.attachRef=_.componentRef,p.route=_.route.value,p.outlet&&p.outlet.attach(_.componentRef,_.route.value),Vm(_.route)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),b=_?_.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=b,p.outlet&&p.outlet.activateWith(a,b),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,s)}}function Vm(n){hc(n.value),n.children.forEach(Vm)}class bp{constructor(e,t){this.routes=e,this.module=t}}function ga(n){return"function"==typeof n}function es(n){return n instanceof Xi}const D=Symbol("INITIAL_VALUE");function x(){return _n(n=>function(...n){let e,t;return(0,Jd.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,I.k)(n[0])&&(n=n[0]),(0,ue.n)(n,t).lift(new $e(e))}(n.map(e=>e.pipe(Yi(1),ru(D)))).pipe(Xd((e,t)=>{let s=!1;return t.reduce((a,l,p)=>a!==D?a:(l===D&&(s=!0),s||!1!==l&&p!==t.length-1&&!es(l)?a:l),e)},D),sr(e=>e!==D),(0,st.U)(e=>es(e)?e:!0===e),Yi(1)))}let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&v._UZ(0,"router-outlet")},directives:function(){return[ya]},encapsulation:2}),n})();function ne(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];Ne(s,xe(e,s))}}function Ne(n,e){n.children&&ne(n.children,e)}function xe(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function He(n){const e=n.children&&n.children.map(He),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=B),t}function Fe(n){return n.outlet||bt}function Dt(n,e){const t=n.filter(s=>Fe(s)===e);return t.push(...n.filter(s=>Fe(s)!==e)),t}const kn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pi(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},kn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Am)(t,n,e);if(!l)return Object.assign({},kn);const p={};Yn(l.posParams,(b,A)=>{p[A]=b.path});const _=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:_,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function ma(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>bl(n,e,s)&&Fe(s)!==bt)}(n,t,s)){const p=new Pt(e,function(n,e,t,s){const a={};a[bt]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Fe(l)!==bt){const p=new Pt([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[Fe(l)]=p}return a}(n,e,s,new Pt(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>bl(n,e,s))}(n,t,s)){const p=new Pt(n.segments,function(n,e,t,s,a,l){const p={};for(const _ of s)if(bl(n,t,_)&&!a[Fe(_)]){const b=new Pt([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[Fe(_)]=b}return Object.assign(Object.assign({},a),p)}(n,e,t,s,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new Pt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function bl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Il(n,e,t,s){return!!(Fe(n)===s||s!==bt&&bl(e,t,n))&&("**"===n.path||Pi(e,n,t).matched)}function Ch(n,e,t){return 0===e.length&&!n.children[t]}class gc{constructor(e){this.segmentGroup=e||null}}class jm{constructor(e){this.urlTree=e}}function mc(n){return new mn.y(e=>e.error(new gc(n)))}function Bm(n){return new mn.y(e=>e.error(new jm(n)))}function rT(n){return new mn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class rb{constructor(e,t,s,a,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(v.h0i)}apply(){const e=ma(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,bt).pipe((0,st.U)(l=>this.createUrlTree(Iv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(iu(l=>{if(l instanceof jm)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof gc?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,bt).pipe((0,st.U)(a=>this.createUrlTree(Iv(a),e.queryParams,e.fragment))).pipe(iu(a=>{throw a instanceof gc?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new Pt([],{[bt]:e}):e;return new Xi(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,st.U)(l=>new Pt([],l))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const l of Object.keys(s.children))"primary"===l?a.unshift(l):a.push(l);return(0,Dn.D)(a).pipe(ci(l=>{const p=s.children[l],_=Dt(t,l);return this.expandSegmentGroup(e,_,p,l).pipe((0,st.U)(b=>({segment:b,outlet:l})))}),Xd((l,p)=>(l[p.outlet]=p.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?sr((a,l)=>n(a,l,s)):ip.y,mm(1),t?ac(e):cl(()=>new Tn))}())}expandSegment(e,t,s,a,l,p){return(0,Dn.D)(s).pipe(ci(_=>this.expandSegmentAgainstRoute(e,t,s,_,a,l,p).pipe(iu(A=>{if(A instanceof gc)return(0,Qe.of)(null);throw A}))),Qi(_=>!!_),iu((_,b)=>{if(_ instanceof Tn||"EmptyError"===_.name){if(Ch(t,a,l))return(0,Qe.of)(new Pt([],{}));throw new gc(t)}throw _}))}expandSegmentAgainstRoute(e,t,s,a,l,p,_){return Il(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p):mc(t):mc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?Bm(l):this.lineralizeSegments(s,l).pipe((0,ir.zg)(p=>{const _=new Pt(p,{});return this.expandSegment(e,_,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){const{matched:_,consumedSegments:b,lastChild:A,positionalParamSegments:M}=Pi(t,a,l);if(!_)return mc(t);const O=this.applyRedirectCommands(b,a.redirectTo,M);return a.redirectTo.startsWith("/")?Bm(O):this.lineralizeSegments(a,O).pipe((0,ir.zg)(q=>this.expandSegment(e,t,s,q.concat(l.slice(A)),p,!1)))}matchSegmentAgainstRoute(e,t,s,a,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,Qe.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,st.U)(q=>(s._loadedConfig=q,new Pt(a,{})))):(0,Qe.of)(new Pt(a,{}));const{matched:p,consumedSegments:_,lastChild:b}=Pi(t,s,a);if(!p)return mc(t);const A=a.slice(b);return this.getChildConfig(e,s,a).pipe((0,ir.zg)(O=>{const q=O.module,W=O.routes,{segmentGroup:le,slicedSegments:Pe}=ma(t,_,A,W),je=new Pt(le.segments,le.children);if(0===Pe.length&&je.hasChildren())return this.expandChildren(q,W,je).pipe((0,st.U)(kt=>new Pt(_,kt)));if(0===W.length&&0===Pe.length)return(0,Qe.of)(new Pt(_,{}));const ct=Fe(s)===l;return this.expandSegment(q,je,W,Pe,ct?bt:l,!0).pipe((0,st.U)(bn=>new Pt(_.concat(bn.segments),bn.children)))}))}getChildConfig(e,t,s){return t.children?(0,Qe.of)(new bp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Qe.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,ir.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,st.U)(l=>(t._loadedConfig=l,l))):(n=t,new mn.y(e=>e.error(ha(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Qe.of)(new bp([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,Qe.of)(!0);const l=a.map(p=>{const _=e.get(p);let b;if((n=_)&&ga(n.canLoad))b=_.canLoad(t,s);else{if(!ga(_))throw new Error("Invalid CanLoad guard");b=_(t,s)}var n;return Ks(b)});return(0,Qe.of)(l).pipe(x(),(0,ar.b)(p=>{if(!es(p))return;const _=ha(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw _.url=p,_}),(0,st.U)(p=>!0===p))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,Qe.of)(s);if(a.numberOfChildren>1||!a.children[bt])return rT(e.redirectTo);a=a.children[bt]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const l=this.createSegmentGroup(e,t.root,s,a);return new Xi(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return Yn(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const _=a.substring(1);s[l]=t[_]}else s[l]=a}),s}createSegmentGroup(e,t,s,a){const l=this.createSegments(e,t.segments,s,a);let p={};return Yn(t.children,(_,b)=>{p[b]=this.createSegmentGroup(e,_,s,a)}),new Pt(l,p)}createSegments(e,t,s,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function Iv(n){const e={};for(const s of Object.keys(n.children)){const l=Iv(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Pt(n.segments.concat(e.segments),e.children)}return n}(new Pt(n.segments,e))}class Cv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ip{constructor(e,t){this.component=e,this.route=t}}function Cl(n,e,t){const s=n._root;return yc(s,e?e._root:null,t,[s.value])}function Cp(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function yc(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=Qn(e);return n.children.forEach(p=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!So(n.url,e.url);case"pathParamsOrQueryParamsChange":return!So(n.url,e.url)||!qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_l(n,e)||!qs(n.queryParams,e.queryParams);case"paramsChange":default:return!_l(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new Cv(s)):(l.data=p.data,l._resolvedData=p._resolvedData),yc(n,e,l.component?_?_.children:null:t,s,a),b&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new Ip(_.outlet.component,p))}else p&&Dh(e,_,a),a.canActivateChecks.push(new Cv(s)),yc(n,null,l.component?_?_.children:null:t,s,a)})(p,l[p.value.outlet],t,s.concat([p.value]),a),delete l[p.value.outlet]}),Yn(l,(p,_)=>Dh(p,t.getContext(_),a)),a}function Dh(n,e,t){const s=Qn(n),a=n.value;Yn(s,(l,p)=>{Dh(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new Ip(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Sv{}function Th(n){return new mn.y(e=>e.error(n))}class lb{constructor(e,t,s,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=ma(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,bt);if(null===t)return null;const s=new gh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Ni(s,t),l=new Lm(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=uu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const p=t.children[l],_=Dt(e,l),b=this.processSegmentGroup(_,p,l);if(null===b)return null;s.push(...b)}const a=Gm(s);return a.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,s,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,s,a);if(null!==p)return p}return Ch(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!Il(e,t,s,a))return null;let l,p=[],_=[];if("**"===e.path){const W=s.length>0?dl(s).parameters:{};l=new gh(s,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hb(e),Fe(e),e.component,e,dT(t),Av(t)+s.length,xv(e))}else{const W=Pi(t,e,s);if(!W.matched)return null;p=W.consumedSegments,_=s.slice(W.lastChild),l=new gh(p,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hb(e),Fe(e),e.component,e,dT(t),Av(t)+p.length,xv(e))}const b=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:A,slicedSegments:M}=ma(t,p,_,b.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);var n;if(0===M.length&&A.hasChildren()){const W=this.processChildren(b,A);return null===W?null:[new Ni(l,W)]}if(0===b.length&&0===M.length)return[new Ni(l,[])];const O=Fe(e)===a,q=this.processSegment(b,A,M,O?bt:a);return null===q?null:[new Ni(l,q)]}}function db(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gm(n){const e=[],t=new Set;for(const s of n){if(!db(s)){e.push(s);continue}const a=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=Gm(s.children);e.push(new Ni(s.value,a))}return e.filter(s=>!t.has(s))}function dT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Av(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function hb(n){return n.data||{}}function xv(n){return n.resolve||{}}function Rv(n){return _n(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,st.U)(()=>e)):(0,Qe.of)(e)})}class yT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zm=new v.OlP("ROUTES");class pb{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,st.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new bp(Rm(p.injector.get(zm,void 0,v.XFs.Self|v.XFs.Optional)).map(He),p)}),iu(l=>{throw t._loader$=void 0,l}));return t._loader$=new Es.c(a,()=>new xi.xQ).pipe((0,_m.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Dn.D)(this.loader.load(e)):Ks(e()).pipe((0,ir.zg)(t=>t instanceof v.YKP?(0,Qe.of)(t):(0,Dn.D)(this.compiler.compileModuleAsync(t))))}}class _T{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Sh,this.attachRef=null}}class Sh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _T,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class gb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function mb(n){throw n}function Wm(n,e,t){return e.parse("/")}function Qs(n,e){return(0,Qe.of)(null)}const yb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,s,a,l,p,_,b,A){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=l,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xi.xQ,this.errorHandler=mb,this.malformedUriErrorHandler=Wm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qs,afterPreactivation:Qs},this.urlHandlingStrategy=new gb,this.routeReuseStrategy=new yT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(v.h0i),this.console=p.get(v.c2e);const q=p.get(v.R0b);this.isNgZoneEnabled=q instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=new Xi(new Pt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pb(_,b,W=>this.triggerEvent(new rh(W)),W=>this.triggerEvent(new cp(W))),this.routerState=gp(this.currentUrlTree,this.rootComponentType),this.transitions=new li({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(sr(a=>0!==a.id),(0,st.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),_n(a=>{let l=!1,p=!1;return(0,Qe.of)(a).pipe((0,ar.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_n(_=>{const b=this.browserUrlTree.toString(),A=!this.navigated||_.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return Ah(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,Qe.of)(_).pipe(_n(O=>{const q=this.transitions.getValue();return s.next(new op(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),q!==this.transitions.getValue()?Nr.E:Promise.resolve(O)}),function(n,e,t,s){return _n(a=>function(n,e,t,s,a){return new rb(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,st.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ar.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,s,a){return(0,ir.zg)(l=>function(n,e,t,s,a="emptyOnly",l="legacy"){try{const p=new lb(n,e,t,s,a,l).recognize();return null===p?Th(new Sv):(0,Qe.of)(p)}catch(p){return Th(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,a).pipe((0,st.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ar.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const q=new uc(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);s.next(q)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:W,source:le,restoredState:Pe,extras:je}=_,ct=new op(q,this.serializeUrl(W),le,Pe);s.next(ct);const Nt=gp(W,this.rootComponentType).snapshot;return(0,Qe.of)(Object.assign(Object.assign({},_),{targetSnapshot:Nt,urlAfterRedirects:W,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),Nr.E}),Rv(_=>{const{targetSnapshot:b,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:W}}=_;return this.hooks.beforePreactivation(b,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!W})}),(0,ar.b)(_=>{const b=new Im(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),(0,st.U)(_=>Object.assign(Object.assign({},_),{guards:Cl(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,ir.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?(0,Qe.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,Dn.D)(n).pipe((0,ir.zg)(a=>function(n,e,t,s,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Qe.of)(!0);const p=l.map(_=>{const b=Cp(_,e,a);let A;if(function(n){return n&&ga(n.canDeactivate)}(b))A=Ks(b.canDeactivate(n,e,t,s));else{if(!ga(b))throw new Error("Invalid CanDeactivate guard");A=Ks(b(n,e,t,s))}return A.pipe(Qi())});return(0,Qe.of)(p).pipe(x())}(a.component,a.route,t,e,s)),Qi(a=>!0!==a,!0))}(p,s,a,n).pipe((0,ir.zg)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,s){return(0,Dn.D)(e).pipe(ci(a=>di(function(n,e){return null!==n&&e&&e(new Cm(n)),(0,Qe.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new au(n)),(0,Qe.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>Wr(()=>{const _=p.guards.map(b=>{const A=Cp(b,p.node,t);let M;if(function(n){return n&&ga(n.canActivateChild)}(A))M=Ks(A.canActivateChild(s,n));else{if(!ga(A))throw new Error("Invalid CanActivateChild guard");M=Ks(A(s,n))}return M.pipe(Qi())});return(0,Qe.of)(_).pipe(x())}));return(0,Qe.of)(l).pipe(x())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,Qe.of)(!0);const a=s.map(l=>Wr(()=>{const p=Cp(l,e,t);let _;if(function(n){return n&&ga(n.canActivate)}(p))_=Ks(p.canActivate(e,n));else{if(!ga(p))throw new Error("Invalid CanActivate guard");_=Ks(p(e,n))}return _.pipe(Qi())}));return(0,Qe.of)(a).pipe(x())}(n,a.route,t))),Qi(a=>!0!==a,!0))}(s,l,n,e):(0,Qe.of)(_)),(0,st.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,ar.b)(_=>{if(es(_.guardsResult)){const A=ha(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw A.url=_.guardsResult,A}const b=new av(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(b)}),sr(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),Rv(_=>{if(_.guards.canActivateChecks.length)return(0,Qe.of)(_).pipe((0,ar.b)(b=>{const A=new up(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}),_n(b=>{let A=!1;return(0,Qe.of)(b).pipe(function(n,e){return(0,ir.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,Qe.of)(t);let l=0;return(0,Dn.D)(a).pipe(ci(p=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,Qe.of)({});const l={};return(0,Dn.D)(a).pipe((0,ir.zg)(p=>function(n,e,t,s){const a=Cp(n,e,s);return Ks(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,s).pipe((0,ar.b)(_=>{l[p]=_}))),mm(1),(0,ir.zg)(()=>Object.keys(l).length===a.length?(0,Qe.of)(l):Nr.E))}(n._resolve,n,e,s).pipe((0,st.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),uu(n,t).resolve),null)))}(p.route,s,n,e)),(0,ar.b)(()=>l++),mm(1),(0,ir.zg)(p=>l===a.length?(0,Qe.of)(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ar.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,ar.b)(b=>{const A=new nh(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}))}),Rv(_=>{const{targetSnapshot:b,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:W}}=_;return this.hooks.afterPreactivation(b,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!W})}),(0,st.U)(_=>{const b=function(n,e,t){const s=yh(n,e._root,t?t._root:void 0);return new ph(s,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:b})}),(0,ar.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(s=>(new wp(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,ar.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new wm(n))}(()=>{var _;if(!l&&!p){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===a.id&&(this.currentNavigation=null)}),iu(_=>{if(p=!0,function(n){return n&&n[Ws]}(_)){const b=es(_.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const A=new ou(a.id,this.serializeUrl(a.extractedUrl),_.message);s.next(A),b?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ah(a.source)};this.scheduleNavigation(M,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new ap(a.id,this.serializeUrl(a.extractedUrl),_);s.next(b);try{a.resolve(this.errorHandler(_))}catch(A){a.reject(A)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:l,urlTree:p}=s,_={replaceUrl:!0};if(l){const b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(_.state=b)}this.scheduleNavigation(p,a,l,_)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ne(t),this.config=t.map(He),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:_,preserveFragment:b}=s,A=a||this.routerState.root,M=b?this.currentUrlTree.fragment:p;let O=null;switch(_){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=l||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,s,a){if(0===t.length)return Eh(e.root,e.root,e,s,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pc(!0,0,n);let e=0,t=!1;const s=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const _={};return Yn(l.outlets,(b,A)=>{_[A]="string"==typeof b?b.split("/"):b}),[...a,{outlets:_}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((_,b)=>{0==b&&"."===_||(0==b&&""===_?t=!0:".."===_?e++:""!=_&&a.push(_))}),a):[...a,l]},[]);return new pc(t,e,s)}(t);if(l.toRoot())return Eh(e.root,new Pt([],{}),e,s,a);const p=function(n,e,t){if(n.isAbsolute)return new Zs(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Zs(l,l===e.root,0)}const s=vl(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,l=t;for(;l>a;){if(l-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new Zs(s,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),_=p.processChildren?El(p.segmentGroup,p.index,l.commands):Fm(p.segmentGroup,p.index,l.commands);return Eh(p.segmentGroup,_,e,s,a)}(A,this.currentUrlTree,t,O,null!=M?M:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=es(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},yb):!1===s?Object.assign({},vT):s,es(t))return lc(this.currentUrlTree,t,a);const l=this.parseUrl(t);return lc(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const l=t[a];return null!=l&&(s[a]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ll(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,l,p){var _,b;if(this.disposed)return Promise.resolve(!1);const A=this.getTransition(),M=Ah(s)&&A&&!Ah(A.source),W=(this.lastSuccessfulId===A.id||this.currentNavigation?A.rawUrl:A.urlAfterRedirects).toString()===t.toString();if(M&&W)return Promise.resolve(!0);let le,Pe,je;p?(le=p.resolve,Pe=p.reject,je=p.promise):je=new Promise((bn,kt)=>{le=bn,Pe=kt});const ct=++this.navigationId;let Nt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Nt=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):Nt=0,this.setTransition({id:ct,targetPageId:Nt,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:le,reject:Pe,promise:je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),je.catch(bn=>Promise.reject(bn))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,s=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new ou(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.DyG),v.LFG(Mm),v.LFG(Sh),v.LFG(ze),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function Ah(n){return"imperative"!==n}let ya=(()=>{class n{constructor(t,s,a,l,p){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=l||bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,b=new Km(t,_,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(Sh),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Km{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===On?this.route:e===Sh?this.childContexts:this.parent.get(e,t)}}class Sp{}class ET{preload(e,t){return(0,Qe.of)(null)}}let vb=(()=>{class n{constructor(t,s,a,l,p){this.router=t,this.injector=l,this.preloadingStrategy=p,this.loader=new pb(s,a,A=>t.triggerEvent(new rh(A)),A=>t.triggerEvent(new cp(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(sr(t=>t instanceof ll),ci(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(v.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,Dn.D)(a).pipe((0,Pn.J)(),(0,st.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,Qe.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,ir.zg)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(pi),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(Sp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Zm=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ll&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new Tm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(pi),v.LFG(Va),v.LFG(void 0))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Dl=new v.OlP("ROUTER_CONFIGURATION"),wT=new v.OlP("ROUTER_FORROOT_GUARD"),wb=[ze,{provide:Mm,useClass:dv},{provide:pi,useFactory:function(n,e,t,s,a,l,p,_={},b,A){const M=new pi(null,n,e,t,s,a,l,Rm(p));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(_,M),_.enableTracing&&M.events.subscribe(O=>{var q,W;null===(q=console.group)||void 0===q||q.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(W=console.groupEnd)||void 0===W||W.call(console)}),M},deps:[Mm,Sh,ze,v.zs3,v.v3s,v.Sil,zm,Dl,[class{},new v.FiY],[class{},new v.FiY]]},Sh,{provide:On,useFactory:function(n){return n.routerState.root},deps:[pi]},{provide:v.v3s,useClass:v.EAV},vb,ET,class{preload(e,t){return t().pipe(iu(()=>(0,Qe.of)(null)))}},{provide:Dl,useValue:{enableTracing:!1}}];function bT(){return new v.PXZ("Router",pi)}let Ym=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[wb,IT(t),{provide:wT,useFactory:Xx,deps:[[pi,new v.FiY,new v.tp0]]},{provide:Dl,useValue:s||{}},{provide:K,useFactory:Jx,deps:[ae,[new v.tBr(pe),new v.FiY],Dl]},{provide:Zm,useFactory:Qx,deps:[pi,Va,Dl]},{provide:Sp,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:ET},{provide:v.PXZ,multi:!0,useFactory:bT},[bb,{provide:v.ip1,multi:!0,useFactory:rR,deps:[bb]},{provide:CT,useFactory:iR,deps:[bb]},{provide:v.tb,multi:!0,useExisting:CT}]]}}static forChild(t){return{ngModule:n,providers:[IT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(wT,8),v.LFG(pi,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();function Qx(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Zm(n,e,t)}function Jx(n,e,t={}){return t.useHash?new Se(n,e):new fe(n,e)}function Xx(n){return"guarded"}function IT(n){return[{provide:v.deG,multi:!0,useValue:n},{provide:zm,multi:!0,useValue:n}]}let bb=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xi.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(_=>s=_),l=this.injector.get(pi),p=this.injector.get(Dl);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Qe.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(Dl),a=this.injector.get(vb),l=this.injector.get(Zm),p=this.injector.get(pi),_=this.injector.get(v.z2F);t===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.zs3))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function rR(n){return n.appInitializer.bind(n)}function iR(n){return n.bootstrapListener.bind(n)}const CT=new v.OlP("Router Initializer"),DT=[];let Cb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[[Ym.forRoot(DT)],Ym]}),n})();var Tl=(()=>{return(n=Tl||(Tl={})).UKRAINIAN="uk_UA",n.ENGLISH="en_US",n.RUSSIAN="ru_RU",Tl;var n})(),Db=F(3637),vr=F(7229);function Mv(){return n=>n.lift(new vc)}class vc{call(e,t){return t.subscribe(new Tb(e))}}class Tb extends yr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class sR{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Pv(e,this.compare,this.keySelector))}}class Pv extends yr.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}var qe,xo=F(8939),AT=(F(941),F(3394)),_e=F(8239),Ro=F(8026),fu=F(3910),_a=F(5422),It=F(3854),Ap="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ts={},Qm=Qm||{},dt=Ap||self;function xh(){}function xp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ov="closure_uid_"+(1e9*Math.random()>>>0),Sb=0;function oR(n,e,t){return n.call.apply(n.bind,arguments)}function Ab(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oR:Ab).apply(null,arguments)}function Xm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Pr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),_=2;_<arguments.length;_++)p[_-2]=arguments[_];return e.prototype[a].apply(s,p)}}function Ec(){this.s=this.s,this.o=this.o}var bs={};Ec.prototype.s=!1,Ec.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Ov)&&n[Ov]||(n[Ov]=++Sb)}(this);delete bs[n]}},Ec.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Rb=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function RT(n){return Array.prototype.concat.apply([],arguments)}function ey(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function kv(n){return/^[\s\xa0]*$/.test(n)}var Oi,Nb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qr(n,e){return-1!=n.indexOf(e)}function ty(n,e){return n<e?-1:n>e?1:0}e:{var Mb=dt.navigator;if(Mb){var Pb=Mb.userAgent;if(Pb){Oi=Pb;break e}}Oi=""}function ny(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Ob(n){const e={};for(const t in n)e[t]=n[t];return e}var Lv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kb(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<Lv.length;l++)t=Lv[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function Fv(n){return Fv[" "](n),n}Fv[" "]=xh;var Np,n,Fb=qr(Oi,"Opera"),Nh=qr(Oi,"Trident")||qr(Oi,"MSIE"),No=qr(Oi,"Edge"),Rp=No||Nh,Vb=qr(Oi,"Gecko")&&!(qr(Oi.toLowerCase(),"webkit")&&!qr(Oi,"Edge"))&&!(qr(Oi,"Trident")||qr(Oi,"MSIE"))&&!qr(Oi,"Edge"),NT=qr(Oi.toLowerCase(),"webkit")&&!qr(Oi,"Edge");function MT(){var n=dt.document;return n?n.documentMode:void 0}e:{var Vv="",Uv=(n=Oi,Vb?/rv:([^\);]+)(\)|;)/.exec(n):No?/Edge\/([\d\.]+)/.exec(n):Nh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):NT?/WebKit\/(\S+)/.exec(n):Fb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Uv&&(Vv=Uv?Uv[1]:""),Nh){var jv=MT();if(null!=jv&&jv>parseFloat(Vv)){Np=String(jv);break e}}Np=Vv}var Bv={};function PT(){return e=Bv,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Nb(String(Np)).split("."),t=Nb("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=ty(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||ty(0==a[2].length,0==l[2].length)||ty(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var Hv=dt.document&&Nh&&(MT()||parseInt(Np,10))||void 0,OT=function(){if(!dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{dt.addEventListener("test",xh,e),dt.removeEventListener("test",xh,e)}catch(t){}return n}();function Or(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sl(n,e){if(Or.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Vb){e:{try{Fv(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ub[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sl.Z.h.call(this)}}Or.prototype.h=function(){this.defaultPrevented=!0},Pr(Sl,Or);var Ub={2:"touch",3:"pen",4:"mouse"};Sl.prototype.h=function(){Sl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pp="closure_listenable_"+(1e6*Math.random()|0),kT=0;function Gv(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++kT,this.ca=this.fa=!1}function zv(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ry(n){this.src=n,this.g={},this.h=0}function iy(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=xb(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(zv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function sy(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}ry.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=sy(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new Gv(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var oy="closure_lm_"+(1e6*Math.random()|0),ay={};function Wv(n,e,t,s,a){if(s&&s.once)return jb(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Wv(n,e[l],t,s,a);return null}return t=qv(t),n&&n[Pp]?n.N(e,t,Rh(s)?!!s.capture:!!s,a):va(n,e,t,!1,s,a)}function va(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Rh(a)?!!a.capture:!!a,_=xl(n);if(_||(n[oy]=_=new ry(n)),(t=_.add(e,t,s,p,l)).proxy)return t;if(s=function(){var e=Hb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)OT||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Al(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function jb(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)jb(n,e[l],t,s,a);return null}return t=qv(t),n&&n[Pp]?n.O(e,t,Rh(s)?!!s.capture:!!s,a):va(n,e,t,!0,s,a)}function Bb(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)Bb(n,e[l],t,s,a);else s=Rh(s)?!!s.capture:!!s,t=qv(t),n&&n[Pp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=sy(l=n.g[e],t,s,a))&&(zv(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=xl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=sy(e,t,s,a)),(t=-1<n?e[n]:null)&&$b(t))}function $b(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Pp])iy(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Al(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=xl(e))?(iy(t,n),0==t.h&&(t.src=null,e[oy]=null)):zv(n)}}}function Al(n){return n in ay?ay[n]:ay[n]="on"+n}function Hb(n,e){if(n.ca)n=!0;else{e=new Sl(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&$b(n),n=t.call(s,e)}return n}function xl(n){return(n=n[oy])instanceof ry?n:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function qv(n){return"function"==typeof n?n:(n[Rl]||(n[Rl]=function(e){return n.handleEvent(e)}),n[Rl])}function ur(){Ec.call(this),this.i=new ry(this),this.P=this,this.I=null}function kr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Or(e,n);else if(e instanceof Or)e.target=e.target||n;else{var a=e;kb(e=new Or(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=cy(p,s,!0,e)&&a}if(a=cy(p=e.g=n,s,!0,e)&&a,a=cy(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=cy(p=e.g=t[l],s,!1,e)&&a}function cy(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var _=p.listener,b=p.ia||p.src;p.fa&&iy(n.i,p),a=!1!==_.call(b,s)&&a}}return a&&!s.defaultPrevented}Pr(ur,Ec),ur.prototype[Pp]=!0,ur.prototype.removeEventListener=function(n,e,t,s){Bb(this,n,e,t,s)},ur.prototype.M=function(){if(ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)zv(t[s]);delete n.g[e],n.h--}}this.I=null},ur.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},ur.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var ly=dt.JSON.stringify;function LT(){var n=Nl;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var dy,Gb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new FT,n=>n.reset());class FT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zb(n){dt.setTimeout(()=>{throw n},0)}function wc(n,e){dy||function(){var n=dt.Promise.resolve(void 0);dy=function(){n.then(UT)}}(),Zv||(dy(),Zv=!0),Nl.add(n,e)}var Zv=!1,Nl=new class{constructor(){this.h=this.g=null}add(e,t){const s=Gb.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function UT(){for(var n;n=LT();){try{n.h.call(n.g)}catch(t){zb(t)}var e=Gb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zv=!1}function hy(n,e){ur.call(this),this.h=n||1,this.g=e||dt,this.j=Mr(this.kb,this),this.l=Date.now()}function Yv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Qv(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:dt.setTimeout(n,e||0)}function jT(n){n.g=Qv(()=>{n.g=null,n.i&&(n.i=!1,jT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pr(hy,ur),(qe=hy.prototype).da=!1,qe.S=null,qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kr(this,"tick"),this.da&&(Yv(this),this.start()))}},qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.M=function(){hy.Z.M.call(this),Yv(this),delete this.g};class BT extends Ec{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jT(this)}M(){super.M(),this.g&&(dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mh(n){Ec.call(this),this.h=n,this.g={}}Pr(Mh,Ec);var vn=[];function fy(n,e,t,s){Array.isArray(t)||(t&&(vn[0]=t.toString()),t=vn);for(var a=0;a<t.length;a++){var l=Wv(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function $T(n){ny(n.g,function(e,t){this.g.hasOwnProperty(t)&&$b(e)},n),n.g={}}function Js(){this.g=!0}function Op(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return ly(t)}catch(_){return e}}(n,t)+(s?" "+s:"")})}Mh.prototype.M=function(){Mh.Z.M.call(this),$T(this)},Mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Js.prototype.Aa=function(){this.g=!1},Js.prototype.info=function(){};var bc={},eE=null;function kp(){return eE=eE||new ur}function tE(n){Or.call(this,bc.Ma,n)}function Lp(n){const e=kp();kr(e,new tE(e,n))}function Wb(n,e){Or.call(this,bc.STAT_EVENT,n),this.stat=e}function Er(n){const e=kp();kr(e,new Wb(e,n))}function py(n,e){Or.call(this,bc.Na,n),this.size=e}function Ph(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return dt.setTimeout(function(){n()},e)}bc.Ma="serverreachability",Pr(tE,Or),bc.STAT_EVENT="statevent",Pr(Wb,Or),bc.Na="timingevent",Pr(py,Or);var Fp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gy(){}function Kb(){}gy.prototype.h=null;var Zb,Vp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rE(){Or.call(this,"d")}function my(){Or.call(this,"c")}function Up(){}function jp(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Mh(this),this.P=uR,this.W=new hy(n=Rp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Yb}function Yb(){this.i=null,this.g="",this.h=!1}Pr(rE,Or),Pr(my,Or),Pr(Up,gy),Up.prototype.g=function(){return new XMLHttpRequest},Up.prototype.i=function(){return{}},Zb=new Up;var uR=45e3,Qb={},Oh={};function iE(n,e,t){n.K=1,n.v=$p(pu(e)),n.s=t,n.U=!0,sE(n,null)}function sE(n,e){n.F=Date.now(),yy(n),n.A=pu(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),Vl(t.h,"t",s),n.C=0,t=n.l.H,n.h=new Yb,n.g=dI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new BT(Mr(n.Ia,n,n.g),n.O)),fy(n.V,n.g,"readystatechange",n.gb),e=n.H?Ob(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Lp(1),function(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",_=l.split("&"),b=0;b<_.length;b++){var A=_[b].split("=");if(1<A.length){var M=A[0];A=A[1];var O=M.split("_");p=2<=O.length&&"type"==O[1]?p+(M+"=")+A+"&":p+(M+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function oE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function zT(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=Mo(n,t),a==Oh){4==e&&(n.o=4,Er(14),s=!1),Op(n.j,n.m,null,"[Incomplete Response]");break}if(a==Qb){n.o=4,Er(15),Op(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Op(n.j,n.m,a,null),_y(n,a)}oE(n)&&a!=Oh&&a!=Qb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Er(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),vE(e),e.L=!0,Er(11))):(Op(n.j,n.m,t,"[Invalid Chunked Response]"),Ic(n),kh(n))}function Mo(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Oh:(t=Number(e.substring(t,s)),isNaN(t)?Qb:(s+=1)+t>e.length?Oh:(e=e.substr(s,t),n.C=s+t,e))}function yy(n){n.Y=Date.now()+n.P,WT(n,n.P)}function WT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ph(Mr(n.eb,n),e)}function aE(n){n.B&&(dt.clearTimeout(n.B),n.B=null)}function kh(n){0==n.l.G||n.I||uI(n.l,n)}function Ic(n){aE(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Yv(n.W),$T(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _y(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Dy(t.i,n)))if(t.I=n.N,!n.J&&Dy(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(A){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ph(Mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Hl(t),_E(t)}Py(t),Er(18)}if(1>=cE(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else Gl(t,11)}else if((n.J||t.g==n)&&Hl(t),!kv(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let A=a[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const M=A[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const O=A[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const q=A[5];null!=q&&"number"==typeof q&&0<q&&(t.K=s=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const W=n.g;if(W){const le=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var l=s.i;!l.g&&(qr(le,"spdy")||qr(le,"quic")||qr(le,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ty(l,l.h),l.h=null))}if(s.D){const Pe=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(s.sa=Pe,en(s.F,s.D,Pe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=lI(s,s.H?s.la:null,s.W),p.J){lE(s.i,p);var _=p,b=s.K;b&&_.setTimeout(b),_.B&&(aE(_),yy(_)),s.g=p}else aI(s);0<t.l.length&&My(t)}else"stop"!=A[0]&&"close"!=A[0]||Gl(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?Gl(t,7):yE(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}Lp(4)}catch(A){}}function Jb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xp(n)||"string"==typeof n)Rb(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(xp(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(xp(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function Ml(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof Ml)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function vy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];Pl(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Pl(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function Pl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(qe=jp.prototype).setTimeout=function(n){this.P=n},qe.gb=function(n){n=n.target;const e=this.L;e&&3==gu(n)?e.l():this.Ia(n)},qe.Ia=function(n){try{if(n==this.g)e:{const M=gu(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>M)&&(3!=M||Rp||this.g&&(this.h.h||this.g.ga()||eS(this.g)))){this.I||4!=M||7==e||Lp(8==e||0>=O?3:2),aE(this);var t=this.g.ba();this.N=t;t:if(oE(this)){var s=eS(this.g);n="";var a=s.length,l=4==gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ic(this),kh(this);var p="";break t}this.h.i=new dt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,b=this.g;if((_=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kv(_)){var A=_;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,Er(12),Ic(this),kh(this);break e}Op(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_y(this,t)}this.U?(zT(this,M,p),Rp&&this.i&&3==M&&(fy(this.V,this.W,"tick",this.fb),this.W.start())):(Op(this.j,this.m,p,null),_y(this,p)),4==M&&Ic(this),this.i&&!this.I&&(4==M?uI(this.l,this):(this.i=!1,yy(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Er(12)):(this.o=0,Er(13)),Ic(this),kh(this)}}}catch(M){}},qe.fb=function(){if(this.g){var n=gu(this.g),e=this.g.ga();this.C<e.length&&(aE(this),zT(this,n,e),this.i&&4!=n&&yy(this))}},qe.cancel=function(){this.I=!0,Ic(this)},qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lp(3),Er(17)),Ic(this),this.o=2,kh(this)):WT(this,this.Y-n)},(qe=Ml.prototype).R=function(){vy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},qe.T=function(){return vy(this),this.g.concat()},qe.get=function(n,e){return Pl(this.h,n)?this.h[n]:e},qe.set=function(n,e){Pl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},qe.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var Ey=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ol(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ol){this.g=void 0!==e?e:n.g,wy(this,n.j),this.s=n.s,by(this,n.i),Iy(this,n.m),this.l=n.l,e=n.h;var t=new mi;t.i=e.i,e.g&&(t.g=new Ml(e.g),t.h=e.h),Bp(this,t),this.o=n.o}else n&&(t=String(n).match(Ey))?(this.g=!!e,wy(this,t[1]||"",!0),this.s=Gp(t[2]||""),by(this,t[3]||"",!0),Iy(this,t[4]),this.l=Gp(t[5]||"",!0),Bp(this,t[6]||"",!0),this.o=Gp(t[7]||"")):(this.g=!!e,this.h=new mi(null,this.g))}function pu(n){return new Ol(n)}function wy(n,e,t){n.j=t?Gp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function by(n,e,t){n.i=t?Gp(e,!0):e}function Iy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Bp(n,e,t){e instanceof mi?(n.h=e,function(n,e){e&&!n.j&&(Ea(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Ll(this,s),Vl(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zp(e,kl)),n.h=new mi(e,n.g))}function en(n,e,t){n.h.set(e,t)}function $p(n){return en(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Gp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ol.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zp(e,Oo,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zp(e,Oo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zp(t,"/"==t.charAt(0)?gi:Wp,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zp(t,Cy)),n.join("")};var Oo=/[#\/\?@]/g,Wp=/[#\?:]/g,gi=/[#\?]/g,kl=/[#\?@]/g,Cy=/#/g;function mi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ea(n){n.g||(n.g=new Ml,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ll(n,e){Ea(n),e=ko(n,e),Pl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Pl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vy(n)))}function Fl(n,e){return Ea(n),e=ko(n,e),Pl(n.g.h,e)}function Vl(n,e,t){Ll(n,e),0<t.length&&(n.i=null,n.g.set(ko(n,e),ey(t)),n.h+=t.length)}function ko(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ul(n){this.l=n||Vh,n=dt.PerformanceNavigationTiming?0<(n=dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(dt.g&&dt.g.Ea&&dt.g.Ea()&&dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=mi.prototype).add=function(n,e){Ea(this),this.i=null,n=ko(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qe.forEach=function(n,e){Ea(this),this.g.forEach(function(t,s){Rb(t,function(a){n.call(e,a,s,this)},this)},this)},qe.T=function(){Ea(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},qe.R=function(n){Ea(this);var e=[];if("string"==typeof n)Fl(this,n)&&(e=RT(e,this.g.get(ko(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=RT(e,n[t])}return e},qe.set=function(n,e){return Ea(this),this.i=null,Fl(this,n=ko(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var Vh=10;function jl(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cE(n){return n.h?1:n.g?n.g.size:0}function Dy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ty(n,e){n.g?n.g.add(e):n.h=e}function lE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ey(n.i)}function Sy(){}function Xb(){this.g=new Sy}function eI(n,e,t){const s=t||"";try{Jb(n,function(a,l){let p=a;Rh(a)&&(p=ly(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Ay(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Uh(n){this.l=n.$b||null,this.j=n.ib||!1}function xy(n,e){ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ul.prototype.cancel=function(){if(this.i=dE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Sy.prototype.stringify=function(n){return dt.JSON.stringify(n,void 0)},Sy.prototype.parse=function(n){return dt.JSON.parse(n,void 0)},Pr(Uh,gy),Uh.prototype.g=function(){return new xy(this.l,this.j)},Uh.prototype.i=function(n){return function(){return n}}({}),Pr(xy,ur);var hE=0;function fE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function qp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ry(n)}function Ry(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qe=xy.prototype).open=function(n,e){if(this.readyState!=hE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ry(this)},qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qp(this)),this.readyState=hE},qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ry(this)),this.g&&(this.readyState=3,Ry(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qp(this):Ry(this),3==this.readyState&&fE(this)}},qe.Ua=function(n){this.g&&(this.response=this.responseText=n,qp(this))},qe.Ta=function(n){this.g&&(this.response=n,qp(this))},qe.ha=function(){this.g&&qp(this)},qe.setRequestHeader=function(n,e){this.v.append(n,e)},qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ZT=dt.JSON.parse;function Jn(n){ur.call(this),this.headers=new Ml,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nI,this.K=this.L=!1}Pr(Jn,ur);var nI="",rI=/^https?$/i,YT=["POST","PUT"];function cR(n){return"content-type"==n.toLowerCase()}function iI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pE(n),gE(n)}function pE(n){n.D||(n.D=!0,kr(n,"complete"),kr(n,"error"))}function JT(n){if(n.h&&void 0!==Qm&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))Qv(n.Fa,0,n);else if(kr(n,"readystatechange"),4==gu(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===_){var a=String(n.H).match(Ey)[1]||null;if(!a&&dt.self&&dt.self.location){var l=dt.self.location.protocol;a=l.substr(0,l.length-1)}s=!rI.test(a?a.toLowerCase():"")}t=s}if(t)kr(n,"complete"),kr(n,"success");else{n.m=6;try{var p=2<gu(n)?n.g.statusText:""}catch(b){p=""}n.j=p+" ["+n.ba()+"]",pE(n)}}finally{gE(n)}}}function gE(n,e){if(n.g){XT(n);const t=n.g,s=n.C[0]?xh:null;n.g=null,n.C=null,e||kr(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function XT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(dt.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function eS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function mE(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return ny(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):en(n,e,t))}function Bl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ny(n){this.za=0,this.l=[],this.h=new Js,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bl("baseRetryDelayMs",5e3,n),this.$a=Bl("retryDelaySeedMs",1e4,n),this.Ya=Bl("forwardChannelMaxRetries",2,n),this.ra=Bl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ul(n&&n.concurrentRequestLimit),this.Ca=new Xb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function yE(n){if(nS(n),3==n.G){var e=n.V++,t=pu(n.F);en(t,"SID",n.J),en(t,"RID",e),en(t,"TYPE","terminate"),Kp(n,t),(e=new jp(n,n.h,e,void 0)).K=2,e.v=$p(pu(t)),t=!1,dt.navigator&&dt.navigator.sendBeacon&&(t=dt.navigator.sendBeacon(e.v.toString(),"")),!t&&dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=dI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yy(e)}cI(n)}function _E(n){n.g&&(vE(n),n.g.cancel(),n.g=null)}function nS(n){_E(n),n.u&&(dt.clearTimeout(n.u),n.u=null),Hl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&dt.clearTimeout(n.m),n.m=null)}function sI(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&My(n)}function My(n){jl(n.i)||n.m||(n.m=!0,wc(n.Ha,n),n.C=0)}function rS(n,e){var t;t=e?e.m:n.V++;const s=pu(n.F);en(s,"SID",n.J),en(s,"RID",t),en(s,"AID",n.U),Kp(n,s),n.o&&n.s&&mE(s,n.o,n.s),t=new jp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$l(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ty(n.i,t),iE(t,s,e)}function Kp(n,e){n.j&&Jb({},function(t,s){en(e,s,t)})}function $l(n,e,t){t=Math.min(n.l.length,t);var s=n.j?Mr(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let _=!0;for(let b=0;b<t;b++){let A=a[b].h;const M=a[b].g;if(A-=l,0>A)l=Math.max(0,a[b].h-100),_=!1;else try{eI(M,p,"req"+A+"_")}catch(O){s&&s(M)}}if(_){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function aI(n){n.g||n.u||(n.Y=1,wc(n.Ga,n),n.A=0)}function Py(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ph(Mr(n.Ga,n),wE(n,n.A)),n.A++,0))}function vE(n){null!=n.B&&(dt.clearTimeout(n.B),n.B=null)}function EE(n){n.g=new jp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=pu(n.oa);en(e,"RID","rpc"),en(e,"SID",n.J),en(e,"CI",n.N?"0":"1"),en(e,"AID",n.U),Kp(n,e),en(e,"TYPE","xmlhttp"),n.o&&n.s&&mE(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=$p(pu(e)),t.s=null,t.U=!0,sE(t,n)}function Hl(n){null!=n.v&&(dt.clearTimeout(n.v),n.v=null)}function uI(n,e){var t=null;if(n.g==e){Hl(n),vE(n),n.g=null;var s=2}else{if(!Dy(n.i,e))return;t=e.D,lE(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;kr(s=kp(),new py(s,t,e,a)),My(n)}else aI(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(cE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ph(Mr(n.Ha,n,e),wE(n,n.C)),n.C++,0)))}(n,e)||2==s&&Py(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Gl(n,5);break;case 4:Gl(n,10);break;case 3:Gl(n,6);break;default:Gl(n,2)}}function wE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=Mr(n.jb,n);t||(t=new Ol("//www.google.com/images/cleardot.gif"),dt.location&&"http"==dt.location.protocol||wy(t,"https"),$p(t)),function(n,e){const t=new Js;if(dt.Image){const s=new Image;s.onload=Xm(Ay,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Xm(Ay,t,s,"TestLoadImage: error",!1,e),s.onabort=Xm(Ay,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Xm(Ay,t,s,"TestLoadImage: timeout",!1,e),dt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Er(2);n.G=0,n.j&&n.j.va(e),cI(n),nS(n)}function cI(n){n.G=0,n.I=-1,n.j&&((0!=dE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ey(n.l),n.l.length=0),n.j.ua())}function lI(n,e,t){let s=function(n){return n instanceof Ol?pu(n):new Ol(n,void 0)}(t);if(""!=s.i)e&&by(s,e+"."+s.i),Iy(s,s.m);else{const a=dt.location;s=function(n,e,t,s){var a=new Ol(null,void 0);return n&&wy(a,n),e&&by(a,e),t&&Iy(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&ny(n.aa,function(a,l){en(s,l,a)}),t=n.sa,(e=n.D)&&t&&en(s,e,t),en(s,"VER",n.ma),Kp(n,s),s}function dI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&n.Ba&&!n.qa?new Uh({ib:!0}):n.qa)).L=n.H,e}function hI(){}function Zp(){if(Nh&&!(10<=Number(Hv)))throw Error("Environmental error: no available transport.")}function Is(n,e){ur.call(this),this.g=new Ny(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!kv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cc(this)}function bE(n){rE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function IE(){my.call(this),this.status=1}function Cc(n){this.g=n}(qe=Jn.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Zb),this.g.onreadystatechange=Mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void iI(this,l)}n=t||"";const a=new Ml(this.headers);s&&Jb(s,function(l,p){a.set(p,l)}),s=function(n){e:{var e=cR;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=dt.FormData&&n instanceof dt.FormData,!(0<=xb(YT,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{XT(this),0<this.B&&((this.K=function(n){return Nh&&PT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.pa,this)):this.A=Qv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){iI(this,l)}},qe.pa=function(){void 0!==Qm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kr(this,"timeout"),this.abort(8))},qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,kr(this,"complete"),kr(this,"abort"),gE(this))},qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gE(this,!0)),Jn.Z.M.call(this)},qe.Fa=function(){this.s||(this.F||this.v||this.l?JT(this):this.cb())},qe.cb=function(){JT(this)},qe.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch(n){return-1}},qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ZT(e)}},qe.Da=function(){return this.m},qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=Ny.prototype).ma=8,qe.G=1,qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new jp(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Ob(l),kb(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$l(this,a,e),en(t=pu(this.F),"RID",n),en(t,"CVER",22),this.D&&en(t,"X-HTTP-Session-Id",this.D),Kp(this,t),this.o&&l&&mE(t,this.o,l),Ty(this.i,a),this.Ra&&en(t,"TYPE","init"),this.ja?(en(t,"$req",e),en(t,"SID","null"),a.$=!0,iE(a,t,null)):iE(a,t,e),this.G=2}}else 3==this.G&&(n?rS(this,n):0==this.l.length||jl(this.i)||rS(this))},qe.Ga=function(){if(this.u=null,EE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ph(Mr(this.bb,this),n)}},qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Er(10),_E(this),EE(this))},qe.ab=function(){null!=this.v&&(this.v=null,_E(this),Py(this),Er(19))},qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Er(2)):(this.h.info("Failed to ping google.com"),Er(1))},(qe=hI.prototype).xa=function(){},qe.wa=function(){},qe.va=function(){},qe.ua=function(){},qe.Oa=function(){},Zp.prototype.g=function(n,e){return new Is(n,e)},Pr(Is,ur),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wc(Mr(n.hb,n,e))),Er(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=lI(n,null,n.W),My(n)},Is.prototype.close=function(){yE(this.g)},Is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,sI(this.g,e)}else this.v?((e={}).__data__=ly(n),sI(this.g,e)):sI(this.g,n)},Is.prototype.M=function(){this.g.j=null,delete this.j,yE(this.g),delete this.g,Is.Z.M.call(this)},Pr(bE,rE),Pr(IE,my),Pr(Cc,hI),Cc.prototype.xa=function(){kr(this.g,"a")},Cc.prototype.wa=function(n){kr(this.g,new bE(n))},Cc.prototype.va=function(n){kr(this.g,new IE(n))},Cc.prototype.ua=function(){kr(this.g,"b")},Zp.prototype.createWebChannel=Zp.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Fp.NO_ERROR=0,Fp.TIMEOUT=8,Fp.HTTP_ERROR=6,nE.COMPLETE="complete",Kb.EventType=Vp,Vp.OPEN="a",Vp.CLOSE="b",Vp.ERROR="c",Vp.MESSAGE="d",ur.prototype.listen=ur.prototype.N,Jn.prototype.listenOnce=Jn.prototype.O,Jn.prototype.getLastError=Jn.prototype.La,Jn.prototype.getLastErrorCode=Jn.prototype.Da,Jn.prototype.getStatus=Jn.prototype.ba,Jn.prototype.getResponseJson=Jn.prototype.Qa,Jn.prototype.getResponseText=Jn.prototype.ga,Jn.prototype.send=Jn.prototype.ea;var lR=ts.createWebChannelTransport=function(){return new Zp},CE=ts.getStatEventTarget=function(){return kp()},DE=ts.ErrorCode=Fp,dR=ts.EventType=nE,Yp=ts.Event=bc,fI=ts.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},TE=ts.FetchXmlHttpFactory=Uh,jh=ts.WebChannel=Kb,iS=ts.XhrIo=Jn;const Oy="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let zl="9.6.0";const Wl=new _a.Yd("@firebase/firestore");function SE(){return Wl.logLevel}function Me(n,...e){if(Wl.logLevel<=_a.in.DEBUG){const t=e.map(Jp);Wl.debug(`Firestore (${zl}): ${n}`,...t)}}function cr(n,...e){if(Wl.logLevel<=_a.in.ERROR){const t=e.map(Jp);Wl.error(`Firestore (${zl}): ${n}`,...t)}}function Qp(n,...e){if(Wl.logLevel<=_a.in.WARN){const t=e.map(Jp);Wl.warn(`Firestore (${zl}): ${n}`,...t)}}function Jp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function rt(n,e){n||Xe()}function Le(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ky{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wr.UNAUTHENTICATED))}shutdown(){}}class oS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aS{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=A=>this.i!==a?(a=this.i,t(A)):Promise.resolve();let p=new br;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new br,e.enqueueRetryable(()=>l(this.currentUser))};const _=()=>{const A=p;e.enqueueRetryable((0,_e.Z)(function*(){yield A.promise,yield l(s.currentUser)}))},b=A=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(A=>b(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?b(A):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new br)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rt("string"==typeof s.accessToken),new ky(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new wr(e)}}class uS{constructor(e,t,s){this.type="FirstParty",this.user=wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class gI{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new uS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=a=>{e.enqueueRetryable(()=>{return null!=(l=a).error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const s=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?s(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),new Ly(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.p(s),this.T=s=>t.writeSequenceNumber(s))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function yI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}ns.I=-1;class xE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=yI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Ot(n,e){return n<e?-1:n>e?1:0}function ql(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function RE(n){return n+"\0"}class Kr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Kr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Kr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _I(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ln{constructor(e,t,s){void 0===t?t=0:t>e.length&&Xe(),void 0===s?s=e.length-t:s>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ln.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Ln{construct(e,t,s){return new qt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const lS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Ln{construct(e,t,s){return new Zr(e,t,s)}static isValidIdentifier(e){return lS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Ae(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Ae(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Ae(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,a+=2}else"`"===_?(p=!p,a++):"."!==_||p?(s+=_,a++):(l(),a++)}if(l(),p)throw new Ae(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}class Kl{constructor(e){this.fields=e,e.sort(Zr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Ir(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const EI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(n){if(rt(!!n),"string"==typeof n){let e=0;const t=EI.exec(n);if(rt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bh(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Fy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wI(n){const e=n.mapValue.fields.__previous_value__;return Fy(e)?wI(e):e}function $h(n){const e=Cs(n.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}function Hh(n){return null==n}function Xp(n){return 0===n&&1/n==-1/0}function NE(n){return"number"==typeof n&&Number.isInteger(n)&&!Xp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(qt.fromString(e))}static fromName(e){return new Ge(qt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new qt(e.slice()))}}function Zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fy(n)?4:10:Xe()}function wa(n,e){const t=Zl(n);if(t!==Zl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $h(n).isEqual($h(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Cs(s.timestampValue),p=Cs(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Bh(n.bytesValue).isEqual(Bh(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return lr(s.geoPointValue.latitude)===lr(a.geoPointValue.latitude)&&lr(s.geoPointValue.longitude)===lr(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return lr(s.integerValue)===lr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=lr(s.doubleValue),p=lr(a.doubleValue);return l===p?Xp(l)===Xp(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return ql(n.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(_I(l)!==_I(p))return!1;for(const _ in l)if(l.hasOwnProperty(_)&&(void 0===p[_]||!wa(l[_],p[_])))return!1;return!0}(n,e);default:return Xe()}var a}function rs(n,e){return void 0!==(n.values||[]).find(t=>wa(t,e))}function yi(n,e){const t=Zl(n),s=Zl(e);if(t!==s)return Ot(t,s);switch(t){case 0:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=lr(a.integerValue||a.doubleValue),_=lr(l.integerValue||l.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1}(n,e);case 3:return Xs(n.timestampValue,e.timestampValue);case 4:return Xs($h(n),$h(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(a,l){const p=Bh(a),_=Bh(l);return p.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),_=l.split("/");for(let b=0;b<p.length&&b<_.length;b++){const A=Ot(p[b],_[b]);if(0!==A)return A}return Ot(p.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Ot(lr(a.latitude),lr(l.latitude));return 0!==p?p:Ot(lr(a.longitude),lr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],_=l.values||[];for(let b=0;b<p.length&&b<_.length;++b){const A=yi(p[b],_[b]);if(A)return A}return Ot(p.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const p=a.fields||{},_=Object.keys(p),b=l.fields||{},A=Object.keys(b);_.sort(),A.sort();for(let M=0;M<_.length&&M<A.length;++M){const O=Ot(_[M],A[M]);if(0!==O)return O;const q=yi(p[_[M]],b[A[M]]);if(0!==q)return q}return Ot(_.length,A.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function Xs(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Cs(n),s=Cs(e),a=Ot(t.seconds,s.seconds);return 0!==a?a:Ot(t.nanos,s.nanos)}function Vy(n){return Uy(n)}function Uy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Cs(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bh(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Uy(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const _ of a)p?p=!1:l+=",",l+=`${_}:${Uy(s.fields[_])}`;return l+"}"}(n.mapValue):Xe();var e}function jy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ME(n){return!!n&&"integerValue"in n}function PE(n){return!!n&&"arrayValue"in n}function bI(n){return!!n&&"nullValue"in n}function By(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function eg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dc(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=eg(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eg(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eg(t)}setAll(e){let t=Zr.emptyPath(),s={},a=[];e.forEach((p,_)=>{if(!t.isImmediateParentOf(_)){const b=this.getFieldsMap(t);this.applyChanges(b,s,a),s={},a=[],t=_.popLast()}p?s[_.lastSegment()]=eg(p):a.push(_.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Tc(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Dc(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Yr(eg(this.value))}}function II(n){const e=[];return Dc(n.fields,(t,s)=>{const a=new Zr([t]);if(Tc(s)){const l=II(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new Kl(e)}class En{constructor(e,t,s,a,l){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new En(e,0,Ct.min(),Yr.empty(),0)}static newFoundDocument(e,t,s){return new En(e,1,t,s,0)}static newNoDocument(e,t){return new En(e,2,t,Yr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Yr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new En(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CI{constructor(e,t=null,s=[],a=[],l=null,p=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=_,this.R=null}}function tg(n,e=null,t=[],s=[],a=null,l=null,p=null){return new CI(n,e,t,s,a,l,p)}function ng(n){const e=Le(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+Vy(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=$y(e.startAt)),e.endAt&&(t+="|ub:",t+=$y(e.endAt)),e.R=t}return e.R}function rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!fS(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!wa(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OI(n.startAt,e.startAt)&&OI(n.endAt,e.endAt)}function Gh(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Qr extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,s):new SI(e,t,s):"array-contains"===t?new RI(e,s):"in"===t?new NI(e,s):"not-in"===t?new MI(e,s):"array-contains-any"===t?new hS(e,s):new Qr(e,t,s)}static P(e,t,s){return"in"===t?new AI(e,s):new xI(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(yi(t,this.value)):null!==t&&Zl(this.value)===Zl(t)&&this.v(yi(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SI extends Qr{constructor(e,t,s){super(e,t,s),this.key=Ge.fromName(s.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class AI extends Qr{constructor(e,t){super(e,"in",t),this.keys=OE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xI extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=OE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function OE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ge.fromName(s.referenceValue))}class RI extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return PE(t)&&rs(t.arrayValue,this.value)}}class NI extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rs(this.value.arrayValue,t)}}class MI extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(rs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rs(this.value.arrayValue,t)}}class hS extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!PE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>rs(this.value.arrayValue,s))}}class ig{constructor(e,t){this.position=e,this.before=t}}function $y(n){return`${n.before?"b":"a"}:${n.position.map(e=>Vy(e)).join(",")}`}class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function fS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function PI(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?Ge.comparator(Ge.fromName(p.referenceValue),t.key):yi(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function OI(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wa(n.position[t],e.position[t]))return!1;return!0}class mu{constructor(e,t=null,s=[],a=[],l=null,p="F",_=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=_,this.endAt=b,this.S=null,this.D=null}}function kI(n,e,t,s,a,l,p,_){return new mu(n,e,t,s,a,l,p,_)}function Wh(n){return new mu(n)}function Hy(n){return!Hh(n.limit)&&"F"===n.limitType}function Gy(n){return!Hh(n.limit)&&"L"===n.limitType}function kE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function LE(n){for(const e of n.filters)if(e.V())return e.field;return null}function FE(n){return null!==n.collectionGroup}function qh(n){const e=Le(n);if(null===e.S){e.S=[];const t=LE(e),s=kE(e);if(null!==t&&null===s)t.isKeyField()||e.S.push(new zh(t)),e.S.push(new zh(Zr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new zh(Zr.keyField(),l))}}}return e.S}function eo(n){const e=Le(n);if(!e.D)if("F"===e.limitType)e.D=tg(e.path,e.collectionGroup,qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of qh(e))t.push(new zh(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new ig(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ig(e.startAt.position,!e.startAt.before):null;e.D=tg(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.D}function LI(n,e,t){return new mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kh(n,e){return rg(eo(n),eo(e))&&n.limitType===e.limitType}function VE(n){return`${ng(eo(n))}|lt:${n.limitType}`}function zy(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Vy(s.value)}`;var s}).join(", ")}]`),Hh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+$y(n.startAt)),n.endAt&&(e+=", endAt: "+$y(n.endAt)),`Target(${e})`}(eo(n))}; limitType=${n.limitType})`}function Zh(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ge.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!PI(t.startAt,qh(t),s)||t.endAt&&PI(t.endAt,qh(t),s)));var t,s}function UE(n){return(e,t)=>{let s=!1;for(const a of qh(n)){const l=FI(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function FI(n,e,t){const s=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(a,l,p){const _=l.data.field(a),b=p.data.field(a);return null!==_&&null!==b?yi(_,b):Xe()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Xe()}}function jE(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(e)?"-0":e}}function BE(n){return{integerValue:""+n}}function $E(n,e){return NE(e)?BE(e):jE(n,e)}class Yh{constructor(){this._=void 0}}function VI(n,e,t){return n instanceof Qh?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof to?pS(n,e):n instanceof yu?gS(n,e):function(s,a){const l=UI(s,a),p=HE(l)+HE(s.N);return ME(l)&&ME(s.N)?BE(p):jE(s.k,p)}(n,e)}function Yl(n,e,t){return n instanceof to?pS(n,e):n instanceof yu?gS(n,e):t}function UI(n,e){return n instanceof Ql?ME(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Qh extends Yh{}class to extends Yh{constructor(e){super(),this.elements=e}}function pS(n,e){const t=mS(e);for(const s of n.elements)t.some(a=>wa(a,s))||t.push(s);return{arrayValue:{values:t}}}class yu extends Yh{constructor(e){super(),this.elements=e}}function gS(n,e){let t=mS(e);for(const s of n.elements)t=t.filter(a=>!wa(a,s));return{arrayValue:{values:t}}}class Ql extends Yh{constructor(e,t){super(),this.k=e,this.N=t}}function HE(n){return lr(n.integerValue||n.doubleValue)}function mS(n){return PE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tt{constructor(e,t){this.field=e,this.transform=t}}class _S{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wy{}function qy(n,e,t){n instanceof Xl?function(s,a,l){const p=s.value.clone(),_=WE(s.fieldTransforms,a,l.transformResults);p.setAll(_),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Sc?function(s,a,l){if(!Jl(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=WE(s.fieldTransforms,a,l.transformResults),_=a.data;_.setAll(zE(s)),_.setAll(p),a.convertToFoundDocument(l.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jh(n,e,t){var a;n instanceof Xl?function(s,a,l){if(!Jl(s.precondition,a))return;const p=s.value.clone(),_=qE(s.fieldTransforms,l,a);p.setAll(_),a.convertToFoundDocument(GE(a),p).setHasLocalMutations()}(n,e,t):n instanceof Sc?function(s,a,l){if(!Jl(s.precondition,a))return;const p=qE(s.fieldTransforms,l,a),_=a.data;_.setAll(zE(s)),_.setAll(p),a.convertToFoundDocument(GE(a),_).setHasLocalMutations()}(n,e,t):Jl(n.precondition,a=e)&&a.convertToNoDocument(Ct.min())}function Hn(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=UI(s.transform,a||null);null!=l&&(null==t&&(t=Yr.empty()),t.set(s.field,l))}return t||null}function vS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&ql(t,s,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof to&&s instanceof to||t instanceof yu&&s instanceof yu?ql(t.elements,s.elements,wa):t instanceof Ql&&s instanceof Ql?wa(t.N,s.N):t instanceof Qh&&s instanceof Qh);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function GE(n){return n.isFoundDocument()?n.version:Ct.min()}class Xl extends Wy{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class Sc extends Wy{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function zE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function WE(n,e,t){const s=new Map;rt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,_=e.data.field(l.field);s.set(l.field,Yl(p,_,t[a]))}return s}function qE(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,VI(l,p,e))}return s}class Xh extends Wy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class KE extends Wy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ES{constructor(e){this.count=e}}var hr,xt;function jI(n){switch(n){default:return Xe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function BI(n){if(void 0===n)return cr("GRPC error has no .code"),de.UNKNOWN;switch(n){case hr.OK:return de.OK;case hr.CANCELLED:return de.CANCELLED;case hr.UNKNOWN:return de.UNKNOWN;case hr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case hr.INTERNAL:return de.INTERNAL;case hr.UNAVAILABLE:return de.UNAVAILABLE;case hr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case hr.NOT_FOUND:return de.NOT_FOUND;case hr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case hr.ABORTED:return de.ABORTED;case hr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case hr.DATA_LOSS:return de.DATA_LOSS;default:return Xe()}}(xt=hr||(hr={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";class Cr{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:Lr.RED,this.left=null!=a?a:Lr.EMPTY,this.right=null!=l?l:Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Lr(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Lr.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Lr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZE(this.data.getIterator())}getIteratorFrom(e){return new ZE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class ZE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const wS=new Cr(Ge.comparator);function _i(){return wS}const sg=new Cr(Ge.comparator);function YE(){return sg}const bS=new Cr(Ge.comparator);function $I(){return bS}const HI=new Fn(Ge.comparator);function Jt(...n){let e=HI;for(const t of n)e=e.add(t);return e}const GI=new Fn(Ot);function Ky(){return GI}class ef{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,og.createSynthesizedTargetChangeForCurrentChange(e,t)),new ef(Ct.min(),s,Ky(),_i(),Jt())}}class og{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new og(Ir.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class Zy{constructor(e,t,s,a){this.$=e,this.removedTargetIds=t,this.key=s,this.F=a}}class IS{constructor(e,t){this.targetId=e,this.O=t}}class CS{constructor(e,t,s=Ir.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class DS{constructor(){this.M=0,this.L=ag(),this.B=Ir.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Jt(),t=Jt(),s=Jt();return this.L.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Xe()}}),new og(this.B,this.U,e,t,s)}H(){this.q=!1,this.L=ag()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class hR{constructor(e){this.et=e,this.nt=new Map,this.st=_i(),this.it=QE(),this.rt=new Fn(Ot)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const s=this.ht(t);switch(e.state){case 0:this.lt(t)&&s.W(e.resumeToken);break;case 1:s.Z(),s.K||s.H(),s.W(e.resumeToken);break;case 2:s.Z(),s.K||this.removeTarget(t);break;case 3:this.lt(t)&&(s.tt(),s.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),s.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((s,a)=>{this.lt(a)&&t(a)})}dt(e){const t=e.targetId,s=e.O.count,a=this.wt(t);if(a){const l=a.target;if(Gh(l))if(0===s){const p=new Ge(l.path);this.ct(t,p,En.newNoDocument(p,Ct.min()))}else rt(1===s);else this._t(t)!==s&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,p)=>{const _=this.wt(p);if(_){if(l.current&&Gh(_.target)){const b=new Ge(_.target.path);null!==this.st.get(b)||this.yt(p,b)||this.ct(p,b,En.newNoDocument(b,e))}l.j&&(t.set(p,l.G()),l.H())}});let s=Jt();this.it.forEach((l,p)=>{let _=!0;p.forEachWhile(b=>{const A=this.wt(b);return!A||2===A.purpose||(_=!1,!1)}),_&&(s=s.add(l))});const a=new ef(e,t,this.rt,this.st,s);return this.st=_i(),this.it=QE(),this.rt=new Fn(Ot),a}at(e,t){if(!this.lt(e))return;const s=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,s),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,s){if(!this.lt(e))return;const a=this.ht(e);this.yt(e,t)?a.J(t,1):a.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),s&&(this.st=this.st.insert(t,s))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new DS,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Fn(Ot),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new DS),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function QE(){return new Cr(Ge.comparator)}function ag(){return new Cr(Ge.comparator)}const TS={asc:"ASCENDING",desc:"DESCENDING"},SS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zI{constructor(e,t){this.databaseId=e,this.C=t}}function _u(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WI(n,e){return n.C?e.toBase64():e.toUint8Array()}function AS(n,e){return _u(n,e.toTimestamp())}function Fr(n){return rt(!!n),Ct.fromTimestamp(function(e){const t=Cs(e);return new Kr(t.seconds,t.nanos)}(n))}function JE(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qI(n){const e=qt.fromString(n);return rt(eC(e)),e}function tf(n,e){return JE(n.databaseId,e.path)}function ba(n,e){const t=qI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(ew(t))}function XE(n,e){return JE(n.databaseId,e)}function td(n){const e=qI(n);return 4===e.length?qt.emptyPath():ew(e)}function ug(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ew(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KI(n,e,t){return{name:tf(n,e),fields:t.value.mapValue.fields}}function tw(n,e,t){const s=ba(n,e.name),a=Fr(e.updateTime),l=new Yr({mapValue:{fields:e.fields}}),p=En.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function Yy(n,e){let t;if(e instanceof Xl)t={update:KI(n,e.key,e.value)};else if(e instanceof Xh)t={delete:tf(n,e.key)};else if(e instanceof Sc)t={update:KI(n,e.key,e.data),updateMask:kS(e.fieldMask)};else{if(!(e instanceof KE))return Xe();t={verify:tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Qh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof to)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ql)return{fieldPath:l.field.canonicalString(),increment:p.N};throw Xe()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:AS(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Xe()),t;var a}function Qy(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?dr.updateTime(Fr(a.updateTime)):void 0!==a.exists?dr.exists(a.exists):dr.none():dr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let _=null;"setToServerValue"in p?(rt("REQUEST_TIME"===p.setToServerValue),_=new Qh):"appendMissingElements"in p?_=new to(p.appendMissingElements.values||[]):"removeAllFromArray"in p?_=new yu(p.removeAllFromArray.values||[]):"increment"in p?_=new Ql(l,p.increment):Xe();const b=Zr.fromServerFormat(p.fieldPath);return new tt(b,_)}(n,a)):[];var a;if(e.update){const a=ba(n,e.update.name),l=new Yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Kl((e.updateMask.fieldPaths||[]).map(A=>Zr.fromServerFormat(A)));return new Sc(a,l,p,t,s)}return new Xl(a,l,t,s)}if(e.delete){const a=ba(n,e.delete);return new Xh(a,t)}if(e.verify){const a=ba(n,e.verify);return new KE(a,t)}return Xe()}function nw(n,e){return{documents:[XE(n,e.path)]}}function rw(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=XE(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=XE(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(_){if(0===_.length)return;const b=_.map(A=>function(M){if("=="===M.op){if(By(M.value))return{unaryFilter:{field:nf(M.field),op:"IS_NAN"}};if(bI(M.value))return{unaryFilter:{field:nf(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(By(M.value))return{unaryFilter:{field:nf(M.field),op:"IS_NOT_NAN"}};if(bI(M.value))return{unaryFilter:{field:nf(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nf(M.field),op:MS(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(_){if(0!==_.length)return _.map(b=>{return{field:nf((A=b).field),direction:XI(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(b=e.limit,n.C||Hh(b)?b:{value:b});var b;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=Jy(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Jy(e.endAt)),t}function YI(n){let e=td(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){rt(1===s);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=QI(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(M=>{return new zh(rf((O=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let _=null;t.limit&&(_=function(M){let O;return O="object"==typeof M?M.value:M,Hh(O)?null:O}(t.limit));let b=null;t.startAt&&(b=JI(t.startAt));let A=null;return t.endAt&&(A=JI(t.endAt)),kI(e,a,p,l,_,"F",b,A)}function QI(n){return n?void 0!==n.unaryFilter?[OS(n)]:void 0!==n.fieldFilter?[PS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>QI(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function Jy(n){return{before:n.before,values:n.position}}function JI(n){return new ig(n.values||[],!!n.before)}function XI(n){return TS[n]}function MS(n){return SS[n]}function nf(n){return{fieldPath:n.canonicalString()}}function rf(n){return Zr.fromServerFormat(n.fieldPath)}function PS(n){return Qr.create(rf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function OS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=rf(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rf(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rf(n.unaryFilter.field);return Qr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rf(n.unaryFilter.field);return Qr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function kS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Lo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iw(e)),e=tC(n.get(t),e);return iw(e)}function tC(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function iw(n){return n+"\x01\x01"}function vu(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&Xe(),n.charAt(p+1)){case"\x01":const _=n.substring(l,p);let b;0===a.length?b=_:(a+=_,b=a,a=""),s.push(b);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:Xe()}l=p+2}return new qt(s)}class LS{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class is{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}is.store="owner",is.key="owner";class Ac{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Ac.store="mutationQueues",Ac.keyPath="userId";class wn{constructor(e,t,s,a,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=l}}wn.store="mutations",wn.keyPath="batchId",wn.userMutationsIndex="userMutationsIndex",wn.userMutationsKeyPath=["userId","batchId"];class vi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Lo(t)]}static key(e,t,s){return[e,Lo(t),s]}}vi.store="documentMutations",vi.PLACEHOLDER=new vi;class sw{constructor(e,t){this.path=e,this.readTime=t}}class ow{constructor(e,t){this.path=e,this.version=t}}class Vn{constructor(e,t,s,a,l,p){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=p}}Vn.store="remoteDocuments",Vn.readTimeIndex="readTimeIndex",Vn.readTimeIndexPath="readTime",Vn.collectionReadTimeIndex="collectionReadTimeIndex",Vn.collectionReadTimeIndexPath=["parentPath","readTime"];class no{constructor(e){this.byteSize=e}}no.store="remoteDocumentGlobal",no.key="remoteDocumentGlobalKey";class ss{constructor(e,t,s,a,l,p,_){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=p,this.query=_}}ss.store="targets",ss.keyPath="targetId",ss.queryTargetsIndexName="queryTargetsIndex",ss.queryTargetsKeyPath=["canonicalId","targetId"];class Jr{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}Jr.store="targetDocuments",Jr.keyPath=["targetId","path"],Jr.documentTargetsIndex="documentTargetsIndex",Jr.documentTargetsKeyPath=["path","targetId"];class ki{constructor(e,t,s,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}ki.key="targetGlobalKey",ki.store="targetGlobal";class nd{constructor(e,t){this.collectionId=e,this.parent=t}}nd.store="collectionParents",nd.keyPath=["collectionId","parent"];class Eu{constructor(e,t,s,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=a}}Eu.store="clientMetadata",Eu.keyPath="clientId";class sf{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}sf.store="bundles",sf.keyPath="bundleId";class rd{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}rd.store="namedQueries",rd.keyPath="name";const nC=[Ac.store,wn.store,vi.store,Vn.store,ss.store,is.store,ki.store,Jr.store,Eu.store,no.store,nd.store,sf.store,rd.store],aw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,s)=>{t(e)})}static reject(e){return new Te((t,s)=>{s(e)})}static waitFor(e){return new Te((t,s)=>{let a=0,l=0,p=!1;e.forEach(_=>{++a,_.next(()=>{++l,p&&l===a&&t()},b=>s(b))}),p=!0,l===a&&t()})}static or(e){let t=Te.resolve(!1);for(const s of e)t=t.next(a=>a?Te.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class wu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new br,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new xc(e,t.error)):this.It.resolve()},this.transaction.onerror=s=>{const a=cw(s.target.error);this.It.reject(new xc(e,a))}}static open(e,t,s,a){try{return new wu(t,e.transaction(a,s))}catch(l){throw new xc(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new of(t)}}class Ia{constructor(e,t,s){this.name=e,this.version=t,this.Rt=s,12.2===Ia.Pt((0,It.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),sd(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,It.hl)())return!1;if(Ia.vt())return!0;const e=(0,It.z$)(),t=Ia.Pt(e),s=0<t&&t<10,a=Ia.Vt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Ct(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new xc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const _=p.target.error;a("VersionError"===_.name?new Ae(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Ae(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new xc(e,_))},l.onupgradeneeded=p=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.Rt.Nt(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=s=>t.kt(s)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,_e.Z)(function*(){const p="readonly"===t;let _=0;for(;;){++_;try{l.db=yield l.Ct(e);const b=wu.open(l.db,e,p?"readonly":"readwrite",s),A=a(b).catch(M=>(b.abort(M),Te.reject(M))).toPromise();return A.catch(()=>{}),yield b.At,A}catch(b){const A="FirebaseError"!==b.name&&_<3;if(Me("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),l.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uw{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return sd(this.$t.delete())}}class xc extends Ae{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function id(n){return"IndexedDbTransactionError"===n.name}class of{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),sd(s)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),sd(this.store.add(e))}get(e){return sd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),sd(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),sd(this.store.count())}Bt(e,t){const s=this.cursor(this.options(e,t)),a=[];return this.Ut(s,(l,p)=>{a.push(p)}).next(()=>a)}qt(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Kt=!1;const a=this.cursor(s);return this.Ut(a,(l,p,_)=>_.delete())}jt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Ut(a,t)}Qt(e){const t=this.cursor({});return new Te((s,a)=>{t.onerror=l=>{const p=cw(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(_=>{_?p.continue():s()}):s()}})}Ut(e,t){const s=[];return new Te((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const _=p.target.result;if(!_)return void a();const b=new uw(_),A=t(_.primaryKey,_.value,b);if(A instanceof Te){const M=A.catch(O=>(b.done(),Te.reject(O)));s.push(M)}b.isDone?a():null===b.Mt?_.continue():_.continue(b.Mt)}}).next(()=>Te.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Kt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sd(n){return new Te((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=cw(s.target.error);t(a)}})}let VS=!1;function cw(n){const e=Ia.Pt((0,It.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VS||(VS=!0,setTimeout(()=>{throw s},0)),s}}return n}class Fo extends FS{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Li(n,e){const t=Le(n);return Ia.Dt(t.Wt,e)}class rC{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&qy(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Jh(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Jh(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(t,s)=>vS(t,s))&&ql(this.baseMutations,e.baseMutations,(t,s)=>vS(t,s))}}class af{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){rt(e.mutations.length===s.length);let a=$I();const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new af(e,t,s,a)}}class Rc{constructor(e,t,s,a,l=Ct.min(),p=Ct.min(),_=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class iC{constructor(e){this.Gt=e}}function sC(n,e){if(e.document)return tw(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ge.fromSegments(e.noDocument.path),s=od(e.noDocument.readTime),a=En.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Ge.fromSegments(e.unknownDocument.path),s=od(e.unknownDocument.version);return En.newUnknownDocument(t,s)}return Xe()}function oC(n,e,t){const s=lw(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:tf(_=n.Gt,(b=e).key),fields:b.data.value.mapValue.fields,updateTime:_u(_,b.version.toTimestamp())};return new Vn(null,null,l,e.hasCommittedMutations,s,a)}var _,b;if(e.isNoDocument()){const l=e.key.path.toArray(),p=Nc(e.version),_=e.hasCommittedMutations;return new Vn(null,new sw(l,p),null,_,s,a)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),p=Nc(e.version);return new Vn(new ow(l,p),null,null,!0,s,a)}return Xe()}function lw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function aC(n){const e=new Kr(n[0],n[1]);return Ct.fromTimestamp(e)}function Nc(n){const e=n.toTimestamp();return new LS(e.seconds,e.nanoseconds)}function od(n){const e=new Kr(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Mc(n,e){const t=(e.baseMutations||[]).map(l=>Qy(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Qy(n.Gt,l)),a=Kr.fromMillis(e.localWriteTimeMs);return new rC(e.batchId,a,t,s)}function uf(n){const e=od(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?od(n.lastLimboFreeSnapshotVersion):Ct.min();let s;var a;return void 0!==n.query.documents?(rt(1===(a=n.query).documents.length),s=eo(Wh(td(a.documents[0])))):s=eo(YI(n.query)),new Rc(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function uC(n,e){const t=Nc(e.snapshotVersion),s=Nc(e.lastLimboFreeSnapshotVersion);let a;a=Gh(e.target)?nw(n.Gt,e.target):rw(n.Gt,e.target);const l=e.resumeToken.toBase64();return new ss(e.targetId,ng(e.target),t,l,e.sequenceNumber,s,a)}function cC(n){const e=YI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LI(e,e.limit,"L"):e}class US{getBundleMetadata(e,t){return lC(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:od(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return lC(e).put({bundleId:(s=t).id,createTime:Nc(Fr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return dC(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:cC(a.bundledQuery),readTime:od(a.readTime)};var a})}saveNamedQuery(e,t){return dC(e).put({name:(s=t).name,readTime:Nc(Fr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function lC(n){return Li(n,sf.store)}function dC(n){return Li(n,rd.store)}class hC{constructor(){this.zt=new Xy}addToCollectionParentIndex(e,t){return this.zt.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.zt.getEntries(t))}}class Xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Fn(qt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Fn(qt.comparator)).toArray()}}class fC{constructor(){this.Ht=new Xy}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:s,parent:Lo(a)};return pC(e).put(l)}return Te.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[RE(t),""],!1,!0);return pC(e).Bt(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(vu(p.parent))}return s})}}function pC(n){return Li(n,nd.store)}const gC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cg(n,e,t){const s=n.store(wn.store),a=n.store(vi.store),l=[],p=IDBKeyRange.only(t.batchId);let _=0;const b=s.jt({range:p},(M,O,q)=>(_++,q.delete()));l.push(b.next(()=>{rt(1===_)}));const A=[];for(const M of t.mutations){const O=vi.key(e,M.key.path,t.batchId);l.push(a.delete(O)),A.push(M.key)}return Te.waitFor(l).next(()=>A)}function e_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class t_{constructor(e,t,s,a){this.userId=e,this.k=t,this.Jt=s,this.referenceDelegate=a,this.Yt={}}static Xt(e,t,s,a){rt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new t_(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).jt({index:wn.userMutationsIndex,range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Ca(e),p=Vo(e);return p.add({}).next(_=>{rt("number"==typeof _);const b=new rC(_,t,s,a),A=function(q,W,le){const Pe=le.baseMutations.map(ct=>Yy(q.Gt,ct)),je=le.mutations.map(ct=>Yy(q.Gt,ct));return new wn(W,le.batchId,le.localWriteTime.toMillis(),Pe,je)}(this.k,this.userId,b),M=[];let O=new Fn((q,W)=>Ot(q.canonicalString(),W.canonicalString()));for(const q of a){const W=vi.key(this.userId,q.key.path,_);O=O.add(q.key.path.popLast()),M.push(p.put(A)),M.push(l.put(W,vi.PLACEHOLDER))}return O.forEach(q=>{M.push(this.Jt.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.Yt[_]=b.keys()}),Te.waitFor(M).next(()=>b)})}lookupMutationBatch(e,t){return Vo(e).get(t).next(s=>s?(rt(s.userId===this.userId),Mc(this.k,s)):null)}Zt(e,t){return this.Yt[t]?Te.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Yt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Vo(e).jt({index:wn.userMutationsIndex,range:a},(p,_,b)=>{_.userId===this.userId&&(rt(_.batchId>=s),l=Mc(this.k,_)),b.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Vo(e).jt({index:wn.userMutationsIndex,range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).Bt(wn.userMutationsIndex,t).next(s=>s.map(a=>Mc(this.k,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=vi.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Ca(e).jt({range:a},(p,_,b)=>{const[A,M,O]=p,q=vu(M);if(A===this.userId&&t.path.isEqual(q))return Vo(e).get(O).next(W=>{if(!W)throw Xe();rt(W.userId===this.userId),l.push(Mc(this.k,W))});b.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Fn(Ot);const a=[];return t.forEach(l=>{const p=vi.prefixForPath(this.userId,l.path),_=IDBKeyRange.lowerBound(p),b=Ca(e).jt({range:_},(A,M,O)=>{const[q,W,le]=A,Pe=vu(W);q===this.userId&&l.path.isEqual(Pe)?s=s.add(le):O.done()});a.push(b)}),Te.waitFor(a).next(()=>this.te(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=vi.prefixForPath(this.userId,s),p=IDBKeyRange.lowerBound(l);let _=new Fn(Ot);return Ca(e).jt({range:p},(b,A,M)=>{const[O,q,W]=b,le=vu(q);O===this.userId&&s.isPrefixOf(le)?le.length===a&&(_=_.add(W)):M.done()}).next(()=>this.te(e,_))}te(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Vo(e).get(l).next(p=>{if(null===p)throw Xe();rt(p.userId===this.userId),s.push(Mc(this.k,p))}))}),Te.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return cg(e.Wt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Te.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const s=IDBKeyRange.lowerBound(vi.prefixForUser(this.userId)),a=[];return Ca(e).jt({range:s},(l,p,_)=>{if(l[0]===this.userId){const b=vu(l[1]);a.push(b)}else _.done()}).next(()=>{rt(0===a.length)})})}containsKey(e,t){return lg(e,this.userId,t)}ne(e){return mC(e).get(this.userId).next(t=>t||new Ac(this.userId,-1,""))}}function lg(n,e,t){const s=vi.prefixForPath(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Ca(n).jt({range:l,Kt:!0},(_,b,A)=>{const[M,O,q]=_;M===e&&O===a&&(p=!0),A.done()}).next(()=>p)}function Vo(n){return Li(n,wn.store)}function Ca(n){return Li(n,vi.store)}function mC(n){return Li(n,Ac.store)}class ad{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new ad(0)}static re(){return new ad(-1)}}class fR{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const s=new ad(t.highestTargetId);return t.highestTargetId=s.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Ct.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.oe(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.ae(e,a)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(s=>(s.targetCount+=1,this.ue(t,s),this.ae(e,s))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cf(e).delete(t.targetId)).next(()=>this.oe(e)).next(s=>(rt(s.targetCount>0),s.targetCount-=1,this.ae(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return cf(e).jt((p,_)=>{const b=uf(_);b.sequenceNumber<=t&&null===s.get(b.targetId)&&(a++,l.push(this.removeTargetData(e,b)))}).next(()=>Te.waitFor(l)).next(()=>a)}forEachTarget(e,t){return cf(e).jt((s,a)=>{const l=uf(a);t(l)})}oe(e){return yC(e).get(ki.key).next(t=>(rt(null!==t),t))}ae(e,t){return yC(e).put(ki.key,t)}ce(e,t){return cf(e).put(uC(this.k,t))}ue(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ng(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return cf(e).jt({range:a,index:ss.queryTargetsIndexName},(p,_,b)=>{const A=uf(_);rg(t,A.target)&&(l=A,b.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Pc(e);return t.forEach(p=>{const _=Lo(p.path);a.push(l.put(new Jr(s,_))),a.push(this.referenceDelegate.addReference(e,s,p))}),Te.waitFor(a)}removeMatchingKeys(e,t,s){const a=Pc(e);return Te.forEach(t,l=>{const p=Lo(l.path);return Te.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Pc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Pc(e);let l=Jt();return a.jt({range:s,Kt:!0},(p,_,b)=>{const A=vu(p[1]),M=new Ge(A);l=l.add(M)}).next(()=>l)}containsKey(e,t){const s=Lo(t.path),a=IDBKeyRange.bound([s],[RE(s)],!1,!0);let l=0;return Pc(e).jt({index:Jr.documentTargetsIndex,Kt:!0,range:a},([p,_],b,A)=>{0!==p&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return cf(e).get(t).next(s=>s?uf(s):null)}}function cf(n){return Li(n,ss.store)}function yC(n){return Li(n,ki.store)}function Pc(n){return Li(n,Jr.store)}function ud(n){return dw.apply(this,arguments)}function dw(){return(dw=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==aw)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function _C([n,e],[t,s]){const a=Ot(n,t);return 0===a?Ot(e,s):a}class jS{constructor(e){this.he=e,this.buffer=new Fn(_C),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();_C(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const s=this.we?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,_e.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){id(a)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ud(a)}yield t.me(e)}))}}class $S{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(ns.I);const s=new jS(t);return this.ge.forEachTarget(e,a=>s.de(a.sequenceNumber)).next(()=>this.ge.pe(e,a=>s.de(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.ge.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(gC)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gC):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let s,a,l,p,_,b,A;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,p=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(s=O,_=Date.now(),this.removeTargets(e,s,t))).next(O=>(l=O,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(O=>(A=Date.now(),SE()<=_a.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-M}ms\n\tDetermined least recently used ${a} in `+(_-p)+`ms\n\tRemoved ${l} targets in `+(b-_)+`ms\n\tRemoved ${O} documents in `+(A-b)+`ms\nTotal Duration: ${A-M}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:O})))}}class pR{constructor(e,t){this.db=e,this.garbageCollector=new $S(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Ee(e){let t=0;return this.pe(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(s,a)=>t(a))}addReference(e,t,s){return n_(e,s)}removeReference(e,t,s){return n_(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return n_(e,t)}Ae(e,t){return function(s,a){let l=!1;return mC(s).Qt(p=>lg(s,p,a).next(_=>(_&&(l=!0),Te.resolve(!_)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ie(e,(p,_)=>{if(_<=t){const b=this.Ae(e,p).next(A=>{if(!A)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p),Pc(e).delete([0,Lo(p.path)])))});a.push(b)}}).next(()=>Te.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return n_(e,t)}Ie(e,t){const s=Pc(e);let a,l=ns.I;return s.jt({index:Jr.documentTargetsIndex},([p,_],{path:b,sequenceNumber:A})=>{0===p?(l!==ns.I&&t(new Ge(vu(a)),l),l=A,a=b):l=ns.I}).next(()=>{l!==ns.I&&t(new Ge(vu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function n_(n,e){return Pc(n).put((s=n.currentSequenceNumber,new Jr(0,Lo(e.path),s)));var s}class Da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1}forEach(e){Dc(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return vI(this.inner)}}class vC{constructor(){this.changes=new Da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ct.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:En.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Te.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HS{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,s){return os(e).put(hg(t),s)}removeEntry(e,t){const s=os(e),a=hg(t);return s.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Re(e,s)))}getEntry(e,t){return os(e).get(hg(t)).next(s=>this.Pe(t,s))}be(e,t){return os(e).get(hg(t)).next(s=>({document:this.Pe(t,s),size:e_(s)}))}getEntries(e,t){let s=_i();return this.ve(e,t,(a,l)=>{const p=this.Pe(a,l);s=s.insert(a,p)}).next(()=>s)}Ve(e,t){let s=_i(),a=new Cr(Ge.comparator);return this.ve(e,t,(l,p)=>{const _=this.Pe(l,p);s=s.insert(l,_),a=a.insert(l,e_(p))}).next(()=>({documents:s,Se:a}))}ve(e,t,s){if(t.isEmpty())return Te.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let p=l.getNext();return os(e).jt({range:a},(_,b,A)=>{const M=Ge.fromSegments(_);for(;p&&Ge.comparator(p,M)<0;)s(p,null),p=l.getNext();p&&p.isEqual(M)&&(s(p,b),p=l.hasNext()?l.getNext():null),p?A.Lt(p.path.toArray()):A.done()}).next(()=>{for(;p;)s(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let a=_i();const l=t.path.length+1,p={};if(s.isEqual(Ct.min())){const _=t.path.toArray();p.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),b=lw(s);p.range=IDBKeyRange.lowerBound([_,b],!0),p.index=Vn.collectionReadTimeIndex}return os(e).jt(p,(_,b,A)=>{if(_.length!==l)return;const M=sC(this.k,b);t.path.isPrefixOf(M.key.path)?Zh(t,M)&&(a=a.insert(M.key,M)):A.done()}).next(()=>a)}newChangeBuffer(e){return new GS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dg(e).get(no.key).next(t=>(rt(!!t),t))}Re(e,t){return dg(e).put(no.key,t)}Pe(e,t){if(t){const s=sC(this.k,t);if(!s.isNoDocument()||!s.version.isEqual(Ct.min()))return s}return En.newInvalidDocument(e)}}class GS extends vC{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Da(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Fn((l,p)=>Ot(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const _=this.Ce.get(l);if(p.document.isValidDocument()){const b=oC(this.De.k,p.document,this.getReadTime(l));a=a.add(l.path.popLast()),s+=e_(b)-_,t.push(this.De.addEntry(e,l,b))}else if(s-=_,this.trackRemovals){const b=oC(this.De.k,En.newNoDocument(l,Ct.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,b))}else t.push(this.De.removeEntry(e,l))}),a.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,s)),Te.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(s=>(this.Ce.set(t,s.size),s.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:s,Se:a})=>(a.forEach((l,p)=>{this.Ce.set(l,p)}),s))}}function dg(n){return Li(n,no.store)}function os(n){return Li(n,Vn.store)}function hg(n){return n.path.toArray()}class zS{constructor(e){this.k=e}Nt(e,t,s,a){rt(s<a&&s>=0&&a<=11);const l=new wu("createOrUpgrade",t);var _;s<1&&a>=1&&(e.createObjectStore(is.store),(_=e).createObjectStore(Ac.store,{keyPath:Ac.keyPath}),_.createObjectStore(wn.store,{keyPath:wn.keyPath,autoIncrement:!0}).createIndex(wn.userMutationsIndex,wn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(vi.store),WS(e),function(_){_.createObjectStore(Vn.store)}(e));let p=Te.resolve();return s<3&&a>=3&&(0!==s&&(function(_){_.deleteObjectStore(Jr.store),_.deleteObjectStore(ss.store),_.deleteObjectStore(ki.store)}(e),WS(e)),p=p.next(()=>function(_){const b=_.store(ki.store),A=new ki(0,0,Ct.min().toTimestamp(),0);return b.put(ki.key,A)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(_,b){return b.store(wn.store).Bt().next(A=>{_.deleteObjectStore(wn.store),_.createObjectStore(wn.store,{keyPath:wn.keyPath,autoIncrement:!0}).createIndex(wn.userMutationsIndex,wn.userMutationsKeyPath,{unique:!0});const M=b.store(wn.store),O=A.map(q=>M.put(q));return Te.waitFor(O)})}(e,l))),p=p.next(()=>{!function(_){_.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ne(l))),s<6&&a>=6&&(p=p.next(()=>(function(_){_.createObjectStore(no.store)}(e),this.ke(l)))),s<7&&a>=7&&(p=p.next(()=>this.xe(l))),s<8&&a>=8&&(p=p.next(()=>this.$e(e,l))),s<9&&a>=9&&(p=p.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const b=_.objectStore(Vn.store);b.createIndex(Vn.readTimeIndex,Vn.readTimeIndexPath,{unique:!1}),b.createIndex(Vn.collectionReadTimeIndex,Vn.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(p=p.next(()=>this.Fe(l))),s<11&&a>=11&&(p=p.next(()=>{(function(_){_.createObjectStore(sf.store,{keyPath:sf.keyPath})})(e),function(_){_.createObjectStore(rd.store,{keyPath:rd.keyPath})}(e)})),p}ke(e){let t=0;return e.store(Vn.store).jt((s,a)=>{t+=e_(a)}).next(()=>{const s=new no(t);return e.store(no.store).put(no.key,s)})}Ne(e){const t=e.store(Ac.store),s=e.store(wn.store);return t.Bt().next(a=>Te.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Bt(wn.userMutationsIndex,p).next(_=>Te.forEach(_,b=>{rt(b.userId===l.userId);const A=Mc(this.k,b);return cg(e,l.userId,A).next(()=>{})}))}))}xe(e){const t=e.store(Jr.store),s=e.store(Vn.store);return e.store(ki.store).get(ki.key).next(a=>{const l=[];return s.jt((p,_)=>{const b=new qt(p),A=[0,Lo(b)];l.push(t.get(A).next(M=>M?Te.resolve():t.put(new Jr(0,Lo(b),a.highestListenSequenceNumber))))}).next(()=>Te.waitFor(l))})}$e(e,t){e.createObjectStore(nd.store,{keyPath:nd.keyPath});const s=t.store(nd.store),a=new Xy,l=p=>{if(a.add(p)){const _=p.lastSegment(),b=p.popLast();return s.put({collectionId:_,parent:Lo(b)})}};return t.store(Vn.store).jt({Kt:!0},(p,_)=>{const b=new qt(p);return l(b.popLast())}).next(()=>t.store(vi.store).jt({Kt:!0},([p,_,b],A)=>{const M=vu(_);return l(M.popLast())}))}Fe(e){const t=e.store(ss.store);return t.jt((s,a)=>{const l=uf(a),p=uC(this.k,l);return t.put(p)})}}function WS(n){n.createObjectStore(Jr.store,{keyPath:Jr.keyPath}).createIndex(Jr.documentTargetsIndex,Jr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ss.store,{keyPath:ss.keyPath}).createIndex(ss.queryTargetsIndexName,ss.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ki.store)}const hw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lf{constructor(e,t,s,a,l,p,_,b,A,M){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=p,this.document=_,this.Me=A,this.Le=M,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=O=>Promise.resolve(),!lf.bt())throw new Ae(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pR(this,a),this.Ge=t+"main",this.k=new iC(b),this.ze=new Ia(this.Ge,11,new zS(this.k)),this.He=new fR(this.referenceDelegate,this.k),this.Jt=new fC,this.Je=new HS(this.k,this.Jt),this.Ye=new US,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===M&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(de.FAILED_PRECONDITION,hw);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ns(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var s=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,_e.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>r_(e).put(new Eu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(id(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return fg(e).get(is.key).next(t=>Te.resolve(this.un(t)))}hn(e){return r_(e).delete(this.clientId)}ln(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Li(s,Eu.store);return a.Bt().next(l=>{const p=e.dn(l,18e5),_=l.filter(b=>-1===p.indexOf(b));return Te.forEach(_,b=>a.delete(b.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const s of t)e.Xe.removeItem(e.wn(s.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Te.resolve(!0):fg(e).get(is.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Ae(de.FAILED_PRECONDITION,hw);return!1}}return!(!this.networkEnabled||!this.inForeground)||r_(e).Bt().next(s=>void 0===this.dn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[is.store,Eu.store],t=>{const s=new Fo(t,ns.I);return e.an(s).next(()=>e.hn(s))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(s=>this.fn(s.updateTimeMs,t)&&!this._n(s.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>r_(e).Bt().next(t=>this.dn(t,18e5).map(s=>s.clientId)))}get started(){return this.Ue}getMutationQueue(e){return t_.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,s){let l;return Me("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",nC,p=>(l=new Fo(p,this.Be?this.Be.next():ns.I),"readwrite-primary"===t?this.rn(l).next(_=>!!_||this.on(l)).next(_=>{if(!_)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Ae(de.FAILED_PRECONDITION,aw);return s(l)}).next(_=>this.cn(l).next(()=>_)):this.En(l).next(()=>s(l)))).then(p=>(l.raiseOnCommittedEvent(),p))}En(e){return fg(e).get(is.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(de.FAILED_PRECONDITION,hw)})}cn(e){const t=new is(this.clientId,this.allowTabSynchronization,Date.now());return fg(e).put(is.key,t)}static bt(){return Ia.bt()}an(e){const t=fg(e);return t.get(is.key).next(s=>this.un(s)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete(is.key)):Te.resolve())}fn(e,t){const s=Date.now();return!(e<s-t||e>s&&(cr(`Detected an update time that is in the future: ${e} > ${s}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,It.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const s=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Me("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return cr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fg(n){return Li(n,is.store)}function r_(n){return Li(n,Eu.store)}function i_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EC{constructor(e,t){this.progress=e,this.In=t}}class s_{constructor(e,t,s){this.Je=e,this.An=t,this.Jt=s}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Pn(e,t,s))}Pn(e,t,s){return this.Je.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}bn(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}vn(e,t){return this.Je.getEntries(e,t).next(s=>this.Vn(e,s).next(()=>s))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return Ge.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Sn(e,t.path):FE(t)?this.Dn(e,t,s):this.Cn(e,t,s);var a}Sn(e,t){return this.Rn(e,new Ge(t)).next(s=>{let a=YE();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Dn(e,t,s){const a=t.collectionGroup;let l=YE();return this.Jt.getCollectionParents(e,a).next(p=>Te.forEach(p,_=>{const b=(A=t,M=_.child(a),new mu(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,M;return this.Cn(e,b,s).next(A=>{A.forEach((M,O)=>{l=l.insert(M,O)})})}).next(()=>l))}Cn(e,t,s){let a,l;return this.Je.getDocumentsMatchingQuery(e,t,s).next(p=>(a=p,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(p=>(l=p,this.Nn(e,l,a).next(_=>{a=_;for(const b of l)for(const A of b.mutations){const M=A.key;let O=a.get(M);null==O&&(O=En.newInvalidDocument(M),a=a.insert(M,O)),Jh(A,O,b.localWriteTime),O.isFoundDocument()||(a=a.remove(M))}}))).next(()=>(a.forEach((p,_)=>{Zh(t,_)||(a=a.remove(p))}),a))}Nn(e,t,s){let a=Jt();for(const p of t)for(const _ of p.mutations)_ instanceof Sc&&null===s.get(_.key)&&(a=a.add(_.key));let l=s;return this.Je.getEntries(e,a).next(p=>(p.forEach((_,b)=>{b.isFoundDocument()&&(l=l.insert(_,b))}),l))}}class o_{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.kn=s,this.xn=a}static $n(e,t){let s=Jt(),a=Jt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new o_(e,t.fromCache,s,a)}}class fw{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(Ct.min())?this.Mn(e,t):this.On.vn(e,a).next(l=>{const p=this.Ln(t,l);return(Hy(t)||Gy(t))&&this.Bn(t.limitType,p,a,s)?this.Mn(e,t):(SE()<=_a.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zy(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(_=>(p.forEach(b=>{_=_.insert(b.key,b)}),_)))});var l}Ln(e,t){let s=new Fn(UE(e));return t.forEach((a,l)=>{Zh(e,l)&&(s=s.add(l))}),s}Bn(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mn(e,t){return SE()<=_a.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",zy(t)),this.On.getDocumentsMatchingQuery(e,t,Ct.min())}}class qS{constructor(e,t,s,a){this.persistence=e,this.Un=t,this.k=a,this.qn=new Cr(Ot),this.Kn=new Da(l=>ng(l),rg),this.jn=Ct.min(),this.An=e.getMutationQueue(s),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new s_(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function wC(n,e,t,s){return new qS(n,e,t,s)}function pw(n,e){return gw.apply(this,arguments)}function gw(){return(gw=(0,_e.Z)(function*(n,e){const t=Le(n);let s=t.An,a=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",p=>{let _;return t.An.getAllMutationBatches(p).next(b=>(_=b,s=t.persistence.getMutationQueue(e),a=new s_(t.Qn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(p))).next(b=>{const A=[],M=[];let O=Jt();for(const q of _){A.push(q.batchId);for(const W of q.mutations)O=O.add(W.key)}for(const q of b){M.push(q.batchId);for(const W of q.mutations)O=O.add(W.key)}return a.vn(p,O).next(q=>({Gn:q,removedBatchIds:A,addedBatchIds:M}))})});return t.An=s,t.Wn=a,t.Un.Fn(t.Wn),l})).apply(this,arguments)}function bC(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(p,_,b,A){const M=b.batch,O=M.keys();let q=Te.resolve();return O.forEach(W=>{q=q.next(()=>A.getEntry(_,W)).next(le=>{const Pe=b.docVersions.get(W);rt(null!==Pe),le.version.compareTo(Pe)<0&&(M.applyToRemoteDocument(le,b),le.isValidDocument()&&A.addEntry(le,b.commitVersion))})}),q.next(()=>p.An.removeMutationBatch(_,M))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.An.performConsistencyCheck(s)).next(()=>t.Wn.vn(s,a))})}function pg(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function a_(n,e){const t=Le(n),s=e.snapshotVersion;let a=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Qn.newChangeBuffer({trackRemovals:!0});a=t.qn;const _=[];e.targetChanges.forEach((A,M)=>{const O=a.get(M);if(!O)return;_.push(t.He.removeMatchingKeys(l,A.removedDocuments,M).next(()=>t.He.addMatchingKeys(l,A.addedDocuments,M)));const q=A.resumeToken;if(q.approximateByteSize()>0){const W=O.withResumeToken(q,s).withSequenceNumber(l.currentSequenceNumber);a=a.insert(M,W),le=O,je=A,rt((Pe=W).resumeToken.approximateByteSize()>0),(0===le.resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&_.push(t.He.updateTargetData(l,W))}var le,Pe,je});let b=_i();if(e.documentUpdates.forEach((A,M)=>{e.resolvedLimboDocuments.has(A)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),_.push(KS(l,p,e.documentUpdates,s,void 0).next(A=>{b=A})),!s.isEqual(Ct.min())){const A=t.He.getLastRemoteSnapshotVersion(l).next(M=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,s));_.push(A)}return Te.waitFor(_).next(()=>p.apply(l)).next(()=>t.Wn.Vn(l,b)).next(()=>b)}).then(l=>(t.qn=a,l))}function KS(n,e,t,s,a){let l=Jt();return t.forEach(p=>l=l.add(p)),e.getEntries(n,l).next(p=>{let _=_i();return t.forEach((b,A)=>{const M=p.get(b),O=(null==a?void 0:a.get(b))||s;A.isNoDocument()&&A.version.isEqual(Ct.min())?(e.removeEntry(b,O),_=_.insert(b,A)):!M.isValidDocument()||A.version.compareTo(M.version)>0||0===A.version.compareTo(M.version)&&M.hasPendingWrites?(e.addEntry(A,O),_=_.insert(b,A)):Me("LocalStore","Ignoring outdated watch update for ",b,". Current version:",M.version," Watch version:",A.version)}),_})}function gg(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(s,e)))}function Bt(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.He.getTargetData(s,e).next(l=>l?(a=l,Te.resolve(a)):t.He.allocateTargetId(s).next(p=>(a=new Rc(e,p,0,s.currentSequenceNumber),t.He.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.qn.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qn=t.qn.insert(s.targetId,s),t.Kn.set(e,s.targetId)),s})}function Ds(n,e,t){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,_e.Z)(function*(n,e,t){const s=Le(n),a=s.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!id(p))throw p;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.qn=s.qn.remove(e),s.Kn.delete(a.target)})).apply(this,arguments)}function kc(n,e,t){const s=Le(n);let a=Ct.min(),l=Jt();return s.persistence.runTransaction("Execute query","readonly",p=>function(_,b,A){const M=Le(_),O=M.Kn.get(A);return void 0!==O?Te.resolve(M.qn.get(O)):M.He.getTargetData(b,A)}(s,p,eo(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(p,_.targetId).next(b=>{l=b})}).next(()=>s.Un.getDocumentsMatchingQuery(p,e,t?a:Ct.min(),t?l:Jt())).next(_=>({documents:_,zn:l})))}function ZS(n,e){const t=Le(n),s=Le(t.He),a=t.qn.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Et(l,e).next(p=>p?p.target:null))}function ht(n){const e=Le(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,a,l){const p=Le(s);let _=_i(),b=lw(l);const A=os(a),M=IDBKeyRange.lowerBound(b,!0);return A.jt({index:Vn.readTimeIndex,range:M},(O,q)=>{const W=sC(p.k,q);_=_.insert(W.key,W),b=q.readTime}).next(()=>({In:_,readTime:aC(b)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:s})=>(e.jn=s,t))}function mg(){return(mg=(0,_e.Z)(function*(n){const e=Le(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const a=os(s);let l=Ct.min();return a.jt({index:Vn.readTimeIndex,reverse:!0},(p,_,b)=>{_.readTime&&(l=aC(_.readTime)),b.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function IC(){return(IC=(0,_e.Z)(function*(n,e,t,s){const a=Le(n);let l=Jt(),p=_i(),_=$I();for(const M of t){const O=e.Hn(M.metadata.name);M.document&&(l=l.add(O)),p=p.insert(O,e.Jn(M)),_=_.insert(O,e.Yn(M.metadata.readTime))}const b=a.Qn.newChangeBuffer({trackRemovals:!0}),A=yield Bt(a,(M=s,eo(Wh(qt.fromString(`__bundle__/docs/${M}`)))));var M;return a.persistence.runTransaction("Apply bundle documents","readwrite",M=>KS(M,b,p,Ct.min(),_).next(O=>(b.apply(M),O)).next(O=>a.He.removeMatchingKeysForTargetId(M,A.targetId).next(()=>a.He.addMatchingKeys(M,l,A.targetId)).next(()=>a.Wn.Vn(M,O)).next(()=>O)))})).apply(this,arguments)}function CC(n,e){return u_.apply(this,arguments)}function u_(){return(u_=(0,_e.Z)(function*(n,e,t=Jt()){const s=yield Bt(n,eo(cC(e.bundledQuery))),a=Le(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Fr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Ye.saveNamedQuery(l,e);const _=s.withResumeToken(Ir.EMPTY_BYTE_STRING,p);return a.qn=a.qn.insert(_.targetId,_),a.He.updateTargetData(l,_).next(()=>a.He.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.He.addMatchingKeys(l,t,s.targetId)).next(()=>a.Ye.saveNamedQuery(l,e))})})).apply(this,arguments)}class gR{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Te.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var s;return this.Xn.set(t.id,{id:(s=t).id,version:s.version,createTime:Fr(s.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(s=t).name,query:cC(s.bundledQuery),readTime:Fr(s.readTime)}),Te.resolve();var s}}class mw{constructor(){this.ts=new Fn(Vr.es),this.ns=new Fn(Vr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const s=new Vr(e,t);this.ts=this.ts.add(s),this.ns=this.ns.add(s)}rs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.os(new Vr(e,t))}cs(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Ge(new qt([])),s=new Vr(t,e),a=new Vr(t,e+1),l=[];return this.ns.forEachInRange([s,a],p=>{this.os(p),l.push(p.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Ge(new qt([])),s=new Vr(t,e),a=new Vr(t,e+1);let l=Jt();return this.ns.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Vr(e,0),s=this.ts.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Vr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Ge.comparator(e.key,t.key)||Ot(e.fs,t.fs)}static ss(e,t){return Ot(e.fs,t.fs)||Ge.comparator(e.key,t.key)}}class io{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Fn(Vr.es)}checkEmpty(e){return Te.resolve(0===this.An.length)}addMutationBatch(e,t,s,a){const l=this.ds;this.ds++;const p=new rC(l,t,s,a);this.An.push(p);for(const _ of a)this.ws=this.ws.add(new Vr(_.key,l)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return Te.resolve(p)}lookupMutationBatch(e,t){return Te.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.gs(t+1),l=a<0?0:a;return Te.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Te.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Vr(t,0),a=new Vr(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([s,a],p=>{const _=this._s(p.fs);l.push(_)}),Te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Fn(Ot);return t.forEach(a=>{const l=new Vr(a,0),p=new Vr(a,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,p],_=>{s=s.add(_.fs)})}),Te.resolve(this.ys(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ge.isDocumentKey(l)||(l=l.child(""));const p=new Vr(new Ge(l),0);let _=new Fn(Ot);return this.ws.forEachWhile(b=>{const A=b.key.path;return!!s.isPrefixOf(A)&&(A.length===a&&(_=_.add(b.fs)),!0)},p),Te.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(s=>{const a=this._s(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){rt(0===this.ps(t.batchId,"removed")),this.An.shift();let s=this.ws;return Te.forEach(t.mutations,a=>{const l=new Vr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ws=s})}ee(e){}containsKey(e,t){const s=new Vr(t,0),a=this.ws.firstAfterOrEqual(s);return Te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Te.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class Un{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Cr(Ge.comparator),this.size=0}addEntry(e,t,s){const a=t.key,l=this.docs.get(a),p=l?l.size:0,_=this.Ts(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:_,readTime:s}),this.size+=_-p,this.Jt.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Te.resolve(s?s.document.clone():En.newInvalidDocument(t))}getEntries(e,t){let s=_i();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.clone():En.newInvalidDocument(a))}),Te.resolve(s)}getDocumentsMatchingQuery(e,t,s){let a=_i();const l=new Ge(t.path.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:_,value:{document:b,readTime:A}}=p.getNext();if(!t.path.isPrefixOf(_.path))break;A.compareTo(s)<=0||Zh(t,b)&&(a=a.insert(b.key,b.clone()))}return Te.resolve(a)}Es(e,t){return Te.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Uo(this)}getSize(e){return Te.resolve(this.size)}}class Uo extends vC{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?t.push(this.De.addEntry(e,a.document,this.getReadTime(s))):this.De.removeEntry(s)}),Te.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class DC{constructor(e){this.persistence=e,this.Is=new Da(t=>ng(t),rg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.As=0,this.Rs=new mw,this.targetCount=0,this.Ps=ad.ie()}forEachTarget(e,t){return this.Is.forEach((s,a)=>t(a)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.As&&(this.As=t),Te.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new ad(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.ce(t),Te.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Is.forEach((p,_)=>{_.sequenceNumber<=t&&null===s.get(_.targetId)&&(this.Is.delete(p),l.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),Te.waitFor(l).next(()=>a)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const s=this.Is.get(t)||null;return Te.resolve(s)}addMatchingKeys(e,t,s){return this.Rs.rs(t,s),Te.resolve()}removeMatchingKeys(e,t,s){this.Rs.cs(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Rs.ls(t);return Te.resolve(s)}containsKey(e,t){return Te.resolve(this.Rs.containsKey(t))}}class YS{constructor(e,t){this.bs={},this.Be=new ns(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new DC(this),this.Jt=new hC,this.Je=new Un(this.Jt,s=>this.referenceDelegate.vs(s)),this.k=new iC(t),this.Ye=new gR(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new io(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,s){Me("MemoryPersistence","Starting transaction:",e);const a=new TC(this.Be.next());return this.referenceDelegate.Vs(),s(a).next(l=>this.referenceDelegate.Ss(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ds(e,t){return Te.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class TC extends FS{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Cs=new mw,this.Ns=null}static ks(e){return new yg(e)}get xs(){if(this.Ns)return this.Ns;throw Xe()}addReference(e,t,s){return this.Cs.addReference(s,t),this.xs.delete(s.toString()),Te.resolve()}removeReference(e,t,s){return this.Cs.removeReference(s,t),this.xs.add(s.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.xs,s=>{const a=Ge.fromPath(s);return this.$s(e,a).next(l=>{l||t.removeEntry(a)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Te.or([()=>Te.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function ld(n,e){return`firestore_clients_${n}_${e}`}function df(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function yw(n,e){return`firestore_targets_${n}_${e}`}class Ta{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Fs(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new Ae(a.error.code,a.error.message))),p?new Ta(e,t,a.state,l):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Fs(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Ae(s.error.code,s.error.message))),l?new _g(e,s.state,a):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=Ky();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=NE(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new vg(e,l):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Eg{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Eg(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dd{constructor(){this.activeTargetIds=Ky()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wg{constructor(e,t,s,a,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Bs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Cr(Ot),this.started=!1,this.js=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=ld(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new dd),this.Gs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Tn();for(const a of t){if(a===e.Bs)continue;const l=e.getItem(ld(e.persistenceKey,a));if(l){const p=vg.Fs(a,l);p&&(e.Ks=e.Ks.insert(p.clientId,p))}}e.Xs();const s=e.storage.getItem(e.Js);if(s){const a=e.Zs(s);a&&e.ti(a)}for(const a of e.js)e.qs(a);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,s){this.ni(e,t,s),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(yw(this.persistenceKey,e));if(s){const a=_g.Fs(e,s);a&&(t=a.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yw(this.persistenceKey,e))}updateQueryState(e,t,s){this.ri(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.si(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Me("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Qs)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==s.key)if(t.Gs.test(s.key)){if(null==s.newValue){const a=t.ci(s.key);return t.ui(a,null)}{const a=t.hi(s.key,s.newValue);if(a)return t.ui(a.clientId,a)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const a=t.li(s.key,s.newValue);if(a)return t.fi(a)}}else if(t.Hs.test(s.key)){if(null!==s.newValue){const a=t.di(s.key,s.newValue);if(a)return t.wi(a)}}else if(s.key===t.Js){if(null!==s.newValue){const a=t.Zs(s.newValue);if(a)return t.ti(a)}}else if(s.key===t.Ws){const a=function(l){let p=ns.I;if(null!=l)try{const _=JSON.parse(l);rt("number"==typeof _),p=_}catch(_){cr("SharedClientState","Failed to read sequence number from WebStorage",_)}return p}(s.newValue);a!==ns.I&&t.sequenceNumberHandler(a)}else if(s.key===t.Ys)return t.syncEngine._i()}else t.js.push(s)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,s){const a=new Ta(this.currentUser,e,t,s),l=df(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Os())}si(e){const t=df(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,s){const a=yw(this.persistenceKey,e),l=new _g(e,t,s);this.setItem(a,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const s=this.ci(e);return vg.Fs(s,t)}li(e,t){const s=this.zs.exec(e),a=Number(s[1]);return Ta.Fs(new wr(void 0!==s[2]?s[2]:null),a,t)}di(e,t){const s=this.Hs.exec(e),a=Number(s[1]);return _g.Fs(a,t)}Zs(e){return Eg.Fs(e)}fi(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const s=t?this.Ks.insert(e,t):this.Ks.remove(e),a=this.ei(this.Ks),l=this.ei(s),p=[],_=[];return l.forEach(b=>{a.has(b)||p.push(b)}),a.forEach(b=>{l.has(b)||_.push(b)}),this.syncEngine.yi(p,_).then(()=>{this.Ks=s})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Ky();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class _w{constructor(){this.pi=new dd,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,s){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new dd,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class hf{Ei(e){}shutdown(){}}class SC{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const c_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class AC{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class xC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,s,a,l){const p=this.Ui(e,t);Me("RestConnection","Sending: ",p,s);const _={};return this.qi(_,a,l),this.Ki(e,p,_,s).then(b=>(Me("RestConnection","Received: ",b),b),b=>{throw Qp("RestConnection",`${e} failed with error: `,b,"url: ",p,"request:",s),b})}ji(e,t,s,a,l){return this.Bi(e,t,s,a,l)}qi(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}Ui(e,t){return`${this.Mi}/v1/${t}:${c_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,s,a){return new Promise((l,p)=>{const _=new iS;_.listenOnce(dR.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case DE.NO_ERROR:const A=_.getResponseJson();Me("Connection","XHR received:",JSON.stringify(A)),l(A);break;case DE.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),p(new Ae(de.DEADLINE_EXCEEDED,"Request time out"));break;case DE.HTTP_ERROR:const M=_.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',M,"response text:",_.getResponseText()),M>0){const O=_.getResponseJson().error;if(O&&O.status&&O.message){const q=function(W){const le=W.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(le)>=0?le:de.UNKNOWN}(O.status);p(new Ae(q,O.message))}else p(new Ae(de.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new Ae(de.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(a);_.send(t,"POST",b,s,15)})}Qi(e,t,s){const a=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lR(),p=CE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new TE({})),this.qi(_.initMessageHeaders,t,s),(0,It.uI)()||(0,It.b$)()||(0,It.d)()||(0,It.w1)()||(0,It.Mn)()||(0,It.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const b=a.join("");Me("Connection","Creating WebChannel: "+b,_);const A=l.createWebChannel(b,_);let M=!1,O=!1;const q=new AC({Vi:le=>{O?Me("Connection","Not sending because WebChannel is closed:",le):(M||(Me("Connection","Opening WebChannel transport."),A.open(),M=!0),Me("Connection","WebChannel sending:",le),A.send(le))},Si:()=>A.close()}),W=(le,Pe,je)=>{le.listen(Pe,ct=>{try{je(ct)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return W(A,jh.EventType.OPEN,()=>{O||Me("Connection","WebChannel transport opened.")}),W(A,jh.EventType.CLOSE,()=>{O||(O=!0,Me("Connection","WebChannel transport closed"),q.Fi())}),W(A,jh.EventType.ERROR,le=>{O||(O=!0,Qp("Connection","WebChannel transport errored:",le),q.Fi(new Ae(de.UNAVAILABLE,"The operation could not be completed")))}),W(A,jh.EventType.MESSAGE,le=>{var Pe;if(!O){const je=le.data[0];rt(!!je);const ct=je,Nt=ct.error||(null===(Pe=ct[0])||void 0===Pe?void 0:Pe.error);if(Nt){Me("Connection","WebChannel received error:",Nt);const bn=Nt.status;let kt=function(Du){const nT=hr[Du];if(void 0!==nT)return BI(nT)}(bn),Xn=Nt.message;void 0===kt&&(kt=de.INTERNAL,Xn="Unknown error status: "+bn+" with message "+Nt.message),O=!0,q.Fi(new Ae(kt,Xn)),A.close()}else Me("Connection","WebChannel received:",je),q.Oi(je)}}),W(p,Yp.STAT_EVENT,le=>{le.stat===fI.PROXY?Me("Connection","Detected buffering proxy"):le.stat===fI.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.$i()},0),q}}function vw(){return"undefined"!=typeof window?window:null}function hd(){return"undefined"!=typeof document?document:null}function bg(n){return new zI(n,!0)}class Ig{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Wi=s,this.Gi=a,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),s=Math.max(0,Date.now()-this.Yi),a=Math.max(0,t-s);a>0&&Me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class l_{constructor(e,t,s,a,l,p,_,b){this.Oe=e,this.nr=s,this.sr=a,this.ir=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=b,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Ig(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,_e.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,_e.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var s=this;return(0,_e.Z)(function*(){s.yr(),s.pr(),s.ur.cancel(),s.rr++,4!==e?s.ur.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),s.ur.Xi()):t&&t.code===de.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Tr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.rr===t&&this.Ir(s,a)},s=>{e(()=>{const a=new Ae(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ar(a)})})}Ir(e,t){const s=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{s(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(a=>{s(()=>this.Ar(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}dr(){var e=this;this.state=5,this.ur.Zi((0,_e.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mR extends l_{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:Xe(),a=e.targetChange.targetIds||[],l=function(b,A){return b.C?(rt(void 0===A||"string"==typeof A),Ir.fromBase64String(A||"")):(rt(void 0===A||A instanceof Uint8Array),Ir.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&function(b){const A=void 0===b.code?de.UNKNOWN:BI(b.code);return new Ae(A,b.message||"")}(p);t=new CS(s,a,l,_||null)}else if("documentChange"in e){const s=e.documentChange,a=ba(n,s.document.name),l=Fr(s.document.updateTime),p=new Yr({mapValue:{fields:s.document.fields}}),_=En.newFoundDocument(a,l,p);t=new Zy(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const s=e.documentDelete,a=ba(n,s.document),l=s.readTime?Fr(s.readTime):Ct.min(),p=En.newNoDocument(a,l);t=new Zy([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=ba(n,s.document);t=new Zy([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Xe();{const s=e.filter,l=new ES(s.count||0);t=new IS(s.targetId,l)}}var b;return t}(this.k,e),s=function(a){if(!("targetChange"in a))return Ct.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ct.min():l.readTime?Fr(l.readTime):Ct.min()}(e);return this.listener.Pr(t,s)}br(e){const t={};t.database=ug(this.k),t.addTarget=function(a,l){let p;const _=l.target;return p=Gh(_)?{documents:nw(a,_)}:{query:rw(a,_)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=WI(a,l.resumeToken):l.snapshotVersion.compareTo(Ct.min())>0&&(p.readTime=_u(a,l.snapshotVersion.toTimestamp())),p}(this.k,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.gr(t)}vr(e){const t={};t.database=ug(this.k),t.removeTarget=e,this.gr(t)}}class yR extends l_{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(s,a){let l=Fr(s.updateTime?s.updateTime:a);return l.isEqual(Ct.min())&&(l=Fr(a)),new _S(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Fr(e.commitTime);return this.listener.Cr(s,t)}return rt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=ug(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Yy(this.k,s))};this.gr(t)}}class ft extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=s,this.k=a,this.$r=!1}Fr(){if(this.$r)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.Bi(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(de.UNKNOWN,a.toString())})}ji(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.ji(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(de.UNKNOWN,a.toString())})}terminate(){this.$r=!0}}class _R{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(cr(t),this.Lr=!1):Me("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Cg{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(_=>{s.enqueueAndForget((0,_e.Z)(function*(){var b;Lc(p)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,_e.Z)(function*(A){const M=Le(A);M.Gr.add(4),yield ff(M),M.Jr.set("Unknown"),M.Gr.delete(4),yield Dg(M)}),function(A){return b.apply(this,arguments)})(p))}))}),this.Jr=new _R(s,a)}}function Dg(n){return Ew.apply(this,arguments)}function Ew(){return(Ew=(0,_e.Z)(function*(n){if(Lc(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function ff(n){return RC.apply(this,arguments)}function RC(){return(RC=(0,_e.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function ww(n,e){const t=Le(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),Sg(t)?bw(t):gf(t).lr()&&Ur(t,e))}function Tg(n,e){const t=Le(n),s=gf(t);t.Wr.delete(e),s.lr()&&NC(t,e),0===t.Wr.size&&(s.lr()?s._r():Lc(t)&&t.Jr.set("Unknown"))}function Ur(n,e){n.Yr.X(e.targetId),gf(n).br(e)}function NC(n,e){n.Yr.X(e),gf(n).vr(e)}function bw(n){n.Yr=new hR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),gf(n).start(),n.Jr.Br()}function Sg(n){return Lc(n)&&!gf(n).hr()&&n.Wr.size>0}function Lc(n){return 0===Le(n).Gr.size}function MC(n){n.Yr=void 0}function QS(n){return Iw.apply(this,arguments)}function Iw(){return(Iw=(0,_e.Z)(function*(n){n.Wr.forEach((e,t)=>{Ur(n,e)})})).apply(this,arguments)}function JS(n,e){return Cw.apply(this,arguments)}function Cw(){return(Cw=(0,_e.Z)(function*(n,e){MC(n),Sg(n)?(n.Jr.Kr(e),bw(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function Dw(n,e,t){return Tw.apply(this,arguments)}function Tw(){return(Tw=(0,_e.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof CS&&2===e.state&&e.cause)try{yield(s=(0,_e.Z)(function*(a,l){const p=l.cause;for(const _ of l.targetIds)a.Wr.has(_)&&(yield a.remoteSyncer.rejectListen(_,p),a.Wr.delete(_),a.Yr.removeTarget(_))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield d_(n,s)}else if(e instanceof Zy?n.Yr.ot(e):e instanceof IS?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Ct.min()))try{const s=yield pg(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Yr.gt(l);return p.targetChanges.forEach((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const A=a.Wr.get(b);A&&a.Wr.set(b,A.withResumeToken(_.resumeToken,l))}}),p.targetMismatches.forEach(_=>{const b=a.Wr.get(_);if(!b)return;a.Wr.set(_,b.withResumeToken(Ir.EMPTY_BYTE_STRING,b.snapshotVersion)),NC(a,_);const A=new Rc(b.target,_,1,b.sequenceNumber);Ur(a,A)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Me("RemoteStore","Failed to raise snapshot:",s),yield d_(n,s)}var s})).apply(this,arguments)}function d_(n,e,t){return h_.apply(this,arguments)}function h_(){return(h_=(0,_e.Z)(function*(n,e,t){if(!id(e))throw e;n.Gr.add(1),yield ff(n),n.Jr.set("Offline"),t||(t=()=>pg(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Dg(n)}))})).apply(this,arguments)}function f_(n,e){return e().catch(t=>d_(n,t,e))}function pf(n){return PC.apply(this,arguments)}function PC(){return(PC=(0,_e.Z)(function*(n){const e=Le(n),t=Fc(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;XS(e);)try{const a=yield gg(e.localStore,s);if(null===a){0===e.Qr.length&&t._r();break}s=a.batchId,eA(e,a)}catch(a){yield d_(e,a)}OC(e)&&kC(e)})).apply(this,arguments)}function XS(n){return Lc(n)&&n.Qr.length<10}function eA(n,e){n.Qr.push(e);const t=Fc(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function OC(n){return Lc(n)&&!Fc(n).hr()&&n.Qr.length>0}function kC(n){Fc(n).start()}function tA(n){return Sw.apply(this,arguments)}function Sw(){return(Sw=(0,_e.Z)(function*(n){Fc(n).kr()})).apply(this,arguments)}function Ag(n){return Aw.apply(this,arguments)}function Aw(){return(Aw=(0,_e.Z)(function*(n){const e=Fc(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function nA(n,e,t){return p_.apply(this,arguments)}function p_(){return(p_=(0,_e.Z)(function*(n,e,t){const s=n.Qr.shift(),a=af.from(s,e,t);yield f_(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield pf(n)})).apply(this,arguments)}function xg(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,_e.Z)(function*(n,e){var t;e&&Fc(n).Sr&&(yield(t=(0,_e.Z)(function*(s,a){if(jI(l=a.code)&&l!==de.ABORTED){const p=s.Qr.shift();Fc(s).wr(),yield f_(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield pf(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),OC(n)&&kC(n)})).apply(this,arguments)}function g_(n,e){return xw.apply(this,arguments)}function xw(){return(xw=(0,_e.Z)(function*(n,e){const t=Le(n);e?(t.Gr.delete(2),yield Dg(t)):e||(t.Gr.add(2),yield ff(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function gf(n){return n.Xr||(n.Xr=function(e,t,s){const a=Le(e);return a.Fr(),new mR(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:QS.bind(null,n),Ni:JS.bind(null,n),Pr:Dw.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Xr.wr(),Sg(n)?bw(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),MC(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Fc(n){return n.Zr||(n.Zr=function(e,t,s){const a=Le(e);return a.Fr(),new yR(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:tA.bind(null,n),Ni:xg.bind(null,n),Nr:Ag.bind(null,n),Cr:nA.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Zr.wr(),yield pf(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Rw{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,_=new Rw(e,t,p,a,l);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mf(n,e){if(cr("AsyncQueue",`${e}: ${n}`),id(n))return new Ae(de.UNAVAILABLE,`${e}: ${n}`);throw n}class fd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ge.comparator(t.key,s.key):(t,s)=>Ge.comparator(t.key,s.key),this.keyedMap=YE(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new fd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class FC{constructor(){this.eo=new Cr(Ge.comparator)}track(e){const t=e.doc.key,s=this.eo.get(t);s?0!==e.type&&3===s.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==s.type?this.eo=this.eo.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.eo=this.eo.remove(t):1===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Xe():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,s)=>{e.push(s)}),e}}class yf{constructor(e,t,s,a,l,p,_,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new yf(e,t,fd.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class vR{constructor(){this.so=void 0,this.listeners=[]}}class ER{constructor(){this.queries=new Da(e=>VE(e),Kh),this.onlineState="Unknown",this.io=new Set}}function VC(n,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,_e.Z)(function*(n,e){const t=Le(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new vR),a)try{l.so=yield t.onListen(s)}catch(p){const _=mf(p,`Initialization of query '${zy(e.query)}' failed`);return void e.onError(_)}t.queries.set(s,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&Pw(t)})).apply(this,arguments)}function Nw(n,e){return Mw.apply(this,arguments)}function Mw(){return(Mw=(0,_e.Z)(function*(n,e){const t=Le(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function rA(n,e){const t=Le(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const _ of p.listeners)_.oo(a)&&(s=!0);p.so=a}}s&&Pw(t)}function iA(n,e,t){const s=Le(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Pw(n){n.io.forEach(e=>{e.next()})}class Ow{constructor(e,t,s){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=s||{}}oo(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new yf(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class UC{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class m_{constructor(e){this.k=e}Hn(e){return ba(this.k,e)}Jn(e){return e.metadata.exists?tw(this.k,e.document,!1):En.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Fr(e)}}class sA{constructor(e,t,s){this.mo=e,this.localStore=t,this.k=s,this.queries=[],this.documents=[],this.progress=pd(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,s=new m_(this.k);for(const a of e)if(a.metadata.queries){const l=s.Hn(a.metadata.name);for(const p of a.metadata.queries){const _=(t.get(p)||Jt()).add(l);t.set(p,_)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function(n,e,t,s){return IC.apply(this,arguments)}(e.localStore,new m_(e.k),e.documents,e.mo.id),s=e.po(e.documents);for(const a of e.queries)yield CC(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",new EC(Object.assign({},e.progress),t)})()}}function pd(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Xr{constructor(e){this.key=e}}class kw{constructor(e){this.key=e}}class so{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Jt(),this.mutatedKeys=Jt(),this.Ao=UE(e),this.Ro=new fd(this.Ao)}get Po(){return this.To}bo(e,t){const s=t?t.vo:new FC,a=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,_=!1;const b=Hy(this.query)&&a.size===this.query.limit?a.last():null,A=Gy(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const q=a.get(M),W=Zh(this.query,O)?O:null,le=!!q&&this.mutatedKeys.has(q.key),Pe=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let je=!1;q&&W?q.data.isEqual(W.data)?le!==Pe&&(s.track({type:3,doc:W}),je=!0):this.Vo(q,W)||(s.track({type:2,doc:W}),je=!0,(b&&this.Ao(W,b)>0||A&&this.Ao(W,A)<0)&&(_=!0)):!q&&W?(s.track({type:0,doc:W}),je=!0):q&&!W&&(s.track({type:1,doc:q}),je=!0,(b||A)&&(_=!0)),je&&(W?(p=p.add(W),l=Pe?l.add(M):l.delete(M)):(p=p.delete(M),l=l.delete(M)))}),Hy(this.query)||Gy(this.query))for(;p.size>this.query.limit;){const M=Hy(this.query)?p.last():p.first();p=p.delete(M.key),l=l.delete(M.key),s.track({type:1,doc:M})}return{Ro:p,vo:s,Bn:_,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((A,M)=>function(O,q){const W=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return W(O)-W(q)}(A.type,M.type)||this.Ao(A.doc,M.doc)),this.So(s);const p=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,b=_!==this.Eo;return this.Eo=_,0!==l.length||b?{snapshot:new yf(this.query,e.Ro,a,l,e.mutatedKeys,0===_,b,!1),Co:p}:{Co:p}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new FC,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Jt(),this.Ro.forEach(s=>{this.No(s.key)&&(this.Io=this.Io.add(s.key))});const t=[];return e.forEach(s=>{this.Io.has(s)||t.push(new kw(s))}),this.Io.forEach(s=>{e.has(s)||t.push(new Xr(s))}),t}ko(e){this.To=e.zn,this.Io=Jt();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return yf.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Lw{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class oA{constructor(e){this.key=e,this.$o=!1}}class jC{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Fo={},this.Oo=new Da(_=>VE(_),Kh),this.Mo=new Map,this.Lo=new Set,this.Bo=new Cr(Ge.comparator),this.Uo=new Map,this.qo=new mw,this.Ko={},this.jo=new Map,this.Qo=ad.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function BC(n,e){return y_.apply(this,arguments)}function y_(){return(y_=(0,_e.Z)(function*(n,e){const t=Ef(n);let s,a;const l=t.Oo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.xo();else{const p=yield Bt(t.localStore,eo(e)),_=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Fw(t,e,s,"current"===_),t.isPrimaryClient&&ww(t.remoteStore,p)}return a})).apply(this,arguments)}function Fw(n,e,t,s){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,_e.Z)(function*(n,e,t,s){n.Go=(M,O,q)=>{return(W=(0,_e.Z)(function*(le,Pe,je,ct){let Nt=Pe.view.bo(je);Nt.Bn&&(Nt=yield kc(le.localStore,Pe.query,!1).then(({documents:Xn})=>Pe.view.bo(Xn,Nt)));const bn=ct&&ct.targetChanges.get(Pe.targetId),kt=Pe.view.applyChanges(Nt,le.isPrimaryClient,bn);return zw(le,Pe.targetId,kt.Co),kt.snapshot}),function(le,Pe,je,ct){return W.apply(this,arguments)})(n,M,O,q);var W};const a=yield kc(n.localStore,e,!0),l=new so(e,a.zn),p=l.bo(a.documents),_=og.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),b=l.applyChanges(p,n.isPrimaryClient,_);zw(n,t,b.Co);const A=new Lw(e,t,l);return n.Oo.set(e,A),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),b.snapshot})).apply(this,arguments)}function aA(n,e){return __.apply(this,arguments)}function __(){return(__=(0,_e.Z)(function*(n,e){const t=Le(n),s=t.Oo.get(e),a=t.Mo.get(s.targetId);if(a.length>1)return t.Mo.set(s.targetId,a.filter(l=>!Kh(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ds(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Tg(t.remoteStore,s.targetId),_f(t,s.targetId)}).catch(ud))):(_f(t,s.targetId),yield Ds(t.localStore,s.targetId,!0))})).apply(this,arguments)}function $C(){return($C=(0,_e.Z)(function*(n,e,t){const s=Qw(n);try{const a=yield function(l,p){const _=Le(l),b=Kr.now(),A=p.reduce((O,q)=>O.add(q.key),Jt());let M;return _.persistence.runTransaction("Locally write mutations","readwrite",O=>_.Wn.vn(O,A).next(q=>{M=q;const W=[];for(const le of p){const Pe=Hn(le,M.get(le.key));null!=Pe&&W.push(new Sc(le.key,Pe,II(Pe.value.mapValue),dr.exists(!0)))}return _.An.addMutationBatch(O,b,W,p)})).then(O=>(O.applyToLocalDocumentSet(M),{batchId:O.batchId,changes:M}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,_){let b=l.Ko[l.currentUser.toKey()];b||(b=new Cr(Ot)),b=b.insert(p,_),l.Ko[l.currentUser.toKey()]=b}(s,a.batchId,t),yield bu(s,a.changes),yield pf(s.remoteStore)}catch(a){const l=mf(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function HC(n,e){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,_e.Z)(function*(n,e){const t=Le(n);try{const s=yield a_(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.Uo.get(l);p&&(rt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.$o=!0:a.modifiedDocuments.size>0?rt(p.$o):a.removedDocuments.size>0&&(rt(p.$o),p.$o=!1))}),yield bu(t,s,e)}catch(s){yield ud(s)}})).apply(this,arguments)}function gd(n,e,t){const s=Le(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.Oo.forEach((l,p)=>{const _=p.view.ro(e);_.snapshot&&a.push(_.snapshot)}),function(l,p){const _=Le(l);_.onlineState=p;let b=!1;_.queries.forEach((A,M)=>{for(const O of M.listeners)O.ro(p)&&(b=!0)}),b&&Pw(_)}(s.eventManager,e),a.length&&s.Fo.Pr(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function wR(n,e,t){return v_.apply(this,arguments)}function v_(){return(v_=(0,_e.Z)(function*(n,e,t){const s=Le(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Uo.get(e),l=a&&a.key;if(l){let p=new Cr(Ge.comparator);p=p.insert(l,En.newNoDocument(l,Ct.min()));const _=Jt().add(l),b=new ef(Ct.min(),new Map,new Fn(Ot),p,_);yield HC(s,b),s.Bo=s.Bo.remove(l),s.Uo.delete(e),Ww(s)}else yield Ds(s.localStore,e,!1).then(()=>_f(s,e,t)).catch(ud)})).apply(this,arguments)}function cA(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,_e.Z)(function*(n,e){const t=Le(n),s=e.batch.batchId;try{const a=yield bC(t.localStore,e);Gw(t,s,null),Hw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield bu(t,a)}catch(a){yield ud(a)}})).apply(this,arguments)}function zC(n,e,t){return jw.apply(this,arguments)}function jw(){return(jw=(0,_e.Z)(function*(n,e,t){const s=Le(n);try{const a=yield function(l,p){const _=Le(l);return _.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let A;return _.An.lookupMutationBatch(b,p).next(M=>(rt(null!==M),A=M.keys(),_.An.removeMutationBatch(b,M))).next(()=>_.An.performConsistencyCheck(b)).next(()=>_.Wn.vn(b,A))})}(s.localStore,e);Gw(s,e,t),Hw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield bu(s,a)}catch(a){yield ud(a)}})).apply(this,arguments)}function $w(){return($w=(0,_e.Z)(function*(n,e){const t=Le(n);Lc(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Le(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>p.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===s)return void e.resolve();const a=t.jo.get(s)||[];a.push(e),t.jo.set(s,a)}catch(s){const a=mf(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Hw(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function Gw(n,e,t){const s=Le(n);let a=s.Ko[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ko[s.currentUser.toKey()]=a}}function _f(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Mo.get(e))n.Oo.delete(s),t&&n.Fo.zo(s,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(s=>{n.qo.containsKey(s)||WC(n,s)})}function WC(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Tg(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),Ww(n))}function zw(n,e,t){for(const s of t)s instanceof Xr?(n.qo.addReference(s.key,e),lA(n,s)):s instanceof kw?(Me("SyncEngine","Document no longer in limbo: "+s.key),n.qo.removeReference(s.key,e),n.qo.containsKey(s.key)||WC(n,s.key)):Xe()}function lA(n,e){const t=e.key,s=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(s)||(Me("SyncEngine","New document in limbo: "+t),n.Lo.add(s),Ww(n))}function Ww(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Ge(qt.fromString(e)),s=n.Qo.next();n.Uo.set(s,new oA(t)),n.Bo=n.Bo.insert(t,s),ww(n.remoteStore,new Rc(eo(Wh(t.path)),s,2,ns.I))}}function bu(n,e,t){return qw.apply(this,arguments)}function qw(){return(qw=(0,_e.Z)(function*(n,e,t){const s=Le(n),a=[],l=[],p=[];var _;s.Oo.isEmpty()||(s.Oo.forEach((_,b)=>{p.push(s.Go(b,e,t).then(A=>{if(A){s.isPrimaryClient&&s.sharedClientState.updateQueryState(b.targetId,A.fromCache?"not-current":"current"),a.push(A);const M=o_.$n(b.targetId,A);l.push(M)}}))}),yield Promise.all(p),s.Fo.Pr(a),yield(_=(0,_e.Z)(function*(b,A){const M=Le(b);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Te.forEach(A,q=>Te.forEach(q.kn,W=>M.persistence.referenceDelegate.addReference(O,q.targetId,W)).next(()=>Te.forEach(q.xn,W=>M.persistence.referenceDelegate.removeReference(O,q.targetId,W)))))}catch(O){if(!id(O))throw O;Me("LocalStore","Failed to update sequence numbers: "+O)}for(const O of A){const q=O.targetId;if(!O.fromCache){const W=M.qn.get(q),Pe=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);M.qn=M.qn.insert(q,Pe)}}}),function(b,A){return _.apply(this,arguments)})(s.localStore,l))})).apply(this,arguments)}function Ng(n,e){return E_.apply(this,arguments)}function E_(){return(E_=(0,_e.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const s=yield pw(t.localStore,e);t.currentUser=e,(a=t).jo.forEach(p=>{p.forEach(_=>{_.reject(new Ae(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.jo.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield bu(t,s.Gn)}var a})).apply(this,arguments)}function qC(n,e){const t=Le(n),s=t.Uo.get(e);if(s&&s.$o)return Jt().add(s.key);{let a=Jt();const l=t.Mo.get(e);if(!l)return a;for(const p of l){const _=t.Oo.get(p);a=a.unionWith(_.view.Po)}return a}}function KC(n,e){return w_.apply(this,arguments)}function w_(){return(w_=(0,_e.Z)(function*(n,e){const t=Le(n),s=yield kc(t.localStore,e.query,!0),a=e.view.ko(s);return t.isPrimaryClient&&zw(t,e.targetId,a.Co),a})).apply(this,arguments)}function ZC(n){return b_.apply(this,arguments)}function b_(){return(b_=(0,_e.Z)(function*(n){const e=Le(n);return ht(e.localStore).then(t=>bu(e,t))})).apply(this,arguments)}function dA(n,e,t,s){return I_.apply(this,arguments)}function I_(){return(I_=(0,_e.Z)(function*(n,e,t,s){const a=Le(n),l=yield function(p,_){const b=Le(p),A=Le(b.An);return b.persistence.runTransaction("Lookup mutation documents","readonly",M=>A.Zt(M,_).next(O=>O?b.Wn.vn(M,O):Te.resolve(null)))}(a.localStore,e);var _;null!==l?("pending"===t?yield pf(a.remoteStore):"acknowledged"===t||"rejected"===t?(Gw(a,e,s||null),Hw(a,e),_=e,Le(Le(a.localStore).An).ee(_)):Xe(),yield bu(a,l)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Kw(){return(Kw=(0,_e.Z)(function*(n,e){const t=Le(n);if(Ef(t),Qw(t),!0===e&&!0!==t.Wo){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield YC(t,s.toArray());t.Wo=!0,yield g_(t.remoteStore,!0);for(const l of a)ww(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const s=[];let a=Promise.resolve();t.Mo.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(_f(t,p),Ds(t.localStore,p,!0))),Tg(t.remoteStore,p)}),yield a,yield YC(t,s),function(l){const p=Le(l);p.Uo.forEach((_,b)=>{Tg(p.remoteStore,b)}),p.qo.hs(),p.Uo=new Map,p.Bo=new Cr(Ge.comparator)}(t),t.Wo=!1,yield g_(t.remoteStore,!1)}})).apply(this,arguments)}function YC(n,e,t){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,_e.Z)(function*(n,e,t){const s=Le(n),a=[],l=[];for(const p of e){let _;const b=s.Mo.get(p);if(b&&0!==b.length){_=yield Bt(s.localStore,eo(b[0]));for(const A of b){const M=s.Oo.get(A),O=yield KC(s,M);O.snapshot&&l.push(O.snapshot)}}else{const A=yield ZS(s.localStore,p);_=yield Bt(s.localStore,A),yield Fw(s,vf(A),p,!1)}a.push(_)}return s.Fo.Pr(l),a})).apply(this,arguments)}function vf(n){return kI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Mg(n){const e=Le(n);return Le(Le(e.localStore).persistence).Tn()}function fA(n,e,t,s){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,_e.Z)(function*(n,e,t,s){const a=Le(n);if(a.Wo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(a.Mo.has(e))switch(t){case"current":case"not-current":{const l=yield ht(a.localStore),p=ef.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield bu(a,l,p);break}case"rejected":yield Ds(a.localStore,e,!0),_f(a,e,s);break;default:Xe()}})).apply(this,arguments)}function Sa(n,e,t){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,_e.Z)(function*(n,e,t){const s=Ef(n);if(s.Wo){for(const a of e){if(s.Mo.has(a)){Me("SyncEngine","Adding an already active target "+a);continue}const l=yield ZS(s.localStore,a),p=yield Bt(s.localStore,l);yield Fw(s,vf(l),p.targetId,!1),ww(s.remoteStore,p)}for(const a of t)s.Mo.has(a)&&(yield Ds(s.localStore,a,!1).then(()=>{Tg(s.remoteStore,a),_f(s,a)}).catch(ud))}})).apply(this,arguments)}function Ef(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wR.bind(null,e),e.Fo.Pr=rA.bind(null,e.eventManager),e.Fo.zo=iA.bind(null,e.eventManager),e}function Qw(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zC.bind(null,e),e}class gA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.k=bg(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return wC(this.persistence,new fw,e.initialUser,this.k)}Yo(e){return new YS(yg.ks,this.k)}Jo(e){return new _w}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class C_ extends gA{constructor(e,t,s){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e),yield function(n){return mg.apply(this,arguments)}(s.localStore),yield s.ta.initialize(s,e),yield Qw(s.ta.syncEngine),yield pf(s.ta.remoteStore),yield s.persistence.sn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Zo(e){return wC(this.persistence,new fw,e.initialUser,this.k)}Xo(e){return new BS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new lf(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,vw(),hd(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new _w}}class Jw extends C_{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e);const a=s.ta.syncEngine;s.sharedClientState instanceof wg&&(s.sharedClientState.syncEngine={mi:dA.bind(null,a),gi:fA.bind(null,a),yi:Sa.bind(null,a),Tn:Mg.bind(null,a),_i:ZC.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.sn(function(){var l=(0,_e.Z)(function*(p){yield function(n,e){return Kw.apply(this,arguments)}(s.ta.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):p||s.gcScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}Jo(e){const t=vw();if(!wg.bt(t))throw new Ae(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=i_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class D_{initialize(e,t){var s=this;return(0,_e.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>gd(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ng.bind(null,s.syncEngine),yield g_(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ER}createDatastore(e){const t=bg(e.databaseInfo.databaseId),s=new xC(e.databaseInfo);return new ft(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=_=>gd(this.syncEngine,_,0),p=SC.bt()?new SC:new hf,new Cg(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,_,b,A){const M=new jC(s,a,l,p,_,b);return A&&(M.Wo=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const s=Le(t);Me("RemoteStore","RemoteStore shutting down."),s.Gr.add(5),yield ff(s),s.Hr.shutdown(),s.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function T_(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mA{constructor(e,t){this.sa=e,this.k=t,this.metadata=new br,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(s=>{s&&s._o()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,_e.Z)(function*(){const t=yield e.oa();if(null===t)return null;const s=e.ia.decode(t),a=Number(s);isNaN(a)&&e.aa(`length string (${s}) is not valid number`);const l=yield e.ca(a);return new UC(JSON.parse(l),t.length+a)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,_e.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ca(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const s=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,_e.Z)(function*(){const t=yield e.sa.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class yA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,_e.Z)(function*(l,p){const _=Le(l),b=ug(_.k)+"/documents",A={documents:p.map(W=>tf(_.k,W))},M=yield _.ji("BatchGetDocuments",b,A),O=new Map;M.forEach(W=>{const le=function(n,e){return"found"in e?function(t,s){rt(!!s.found);const a=ba(t,s.found.name),l=Fr(s.found.updateTime),p=new Yr({mapValue:{fields:s.found.fields}});return En.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){rt(!!s.missing),rt(!!s.readTime);const a=ba(t,s.missing),l=Fr(s.readTime);return En.newNoDocument(a,l)}(n,e):Xe()}(_.k,W);O.set(le.key.toString(),le)});const q=[];return p.forEach(W=>{const le=O.get(W.toString());rt(!!le),q.push(le)}),q}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Ge.fromPath(a);e.mutations.push(new KE(l,e.precondition(l)))}),yield(s=(0,_e.Z)(function*(a,l){const p=Le(a),_=ug(p.k)+"/documents",b={writes:l.map(A=>Yy(p.k,A))};yield p.Bi("Commit",_,b)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=Ct.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Ae(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Ae(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _A{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.la=5,this.ur=new Ig(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,_e.Z)(function*(){const t=new yA(e.datastore),s=e.da(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.wa(l)}))}).catch(a=>{e.wa(a)})}))}da(e){try{const t=this.updateFunction(e);return!Hh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jI(t)}return!1}}class vA{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=wr.UNAUTHENTICATED,this.clientId=xE.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,_e.Z)(function*(_){Me("FirestoreClient","Received user=",_.uid),yield l.authCredentialListener(_),l.user=_});return function(_){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=mf(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Xw(n,e){return Og.apply(this,arguments)}function Og(){return(Og=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(l){s.isEqual(l)||(yield pw(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function e0(n,e){return t0.apply(this,arguments)}function t0(){return(t0=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield S_(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>{return(l=(0,_e.Z)(function*(p,_){const b=Le(p);b.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const A=Lc(b);b.Gr.add(3),yield ff(b),A&&b.Jr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(_),b.Gr.delete(3),yield Dg(b)}),function(p,_){return l.apply(this,arguments)})(e.remoteStore,a);var l}),n.onlineComponents=e})).apply(this,arguments)}function S_(n){return A_.apply(this,arguments)}function A_(){return(A_=(0,_e.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield Xw(n,new gA)),n.offlineComponents})).apply(this,arguments)}function x_(n){return R_.apply(this,arguments)}function R_(){return(R_=(0,_e.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield e0(n,new D_)),n.onlineComponents})).apply(this,arguments)}function n0(n){return S_(n).then(e=>e.persistence)}function r0(n){return S_(n).then(e=>e.localStore)}function s0(n){return x_(n).then(e=>e.remoteStore)}function o0(n){return x_(n).then(e=>e.syncEngine)}function kg(n){return ei.apply(this,arguments)}function ei(){return(ei=(0,_e.Z)(function*(n){const e=yield x_(n),t=e.eventManager;return t.onListen=BC.bind(null,e.syncEngine),t.onUnlisten=aA.bind(null,e.syncEngine),t})).apply(this,arguments)}function bA(n,e,t={}){const s=new br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,p,_,b){const A=new wf({next:O=>{l.enqueueAndForget(()=>Nw(a,M));const q=O.docs.has(p);!q&&O.fromCache?b.reject(new Ae(de.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&O.fromCache&&_&&"server"===_.source?b.reject(new Ae(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(O)},error:O=>b.reject(O)}),M=new Ow(Wh(p.path),A,{includeMetadataChanges:!0,wo:!0});return VC(a,M)}(yield kg(n),n.asyncQueue,e,t,s)})),s.promise}function QC(n,e,t={}){const s=new br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,p,_,b){const A=new wf({next:O=>{l.enqueueAndForget(()=>Nw(a,M)),O.fromCache&&"server"===_.source?b.reject(new Ae(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(O)},error:O=>b.reject(O)}),M=new Ow(p,A,{includeMetadataChanges:!0,wo:!0});return VC(a,M)}(yield kg(n),n.asyncQueue,e,t,s)})),s.promise}class DA{constructor(e,t,s,a,l,p,_,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.useFetchStreams=b}}class Vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}const u0=new Map;function N_(n,e,t){if(!t)throw new Ae(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Fg(n,e,t,s){if(!0===e&&!0===s)throw new Ae(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M_(n){if(!Ge.isDocumentKey(n))throw new Ae(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TA(n){if(Ge.isDocumentKey(n))throw new Ae(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vg(n);throw new Ae(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function c0(n,e){if(e<=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Ug{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class If{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ug({}),this._settingsFrozen=!1,e instanceof Vc?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ae(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(a.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ug(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new sS;switch(t.type){case"gapi":const s=t.client;return rt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new gI(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=u0.get(e);t&&(Me("ComponentProvider","Removing Datastore"),u0.delete(e),t.terminate())}(this),Promise.resolve()}}class sn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class jr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Aa extends jr{constructor(e,t,s){super(e,t,Wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Ge(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function XC(n,e,...t){if(n=(0,It.m9)(n),N_("collection","path",e),n instanceof If){const s=qt.fromString(e,...t);return TA(s),new Aa(n,null,s)}{if(!(n instanceof sn||n instanceof Aa))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(qt.fromString(e,...t));return TA(s),new Aa(n.firestore,null,s)}}function jg(n,e,...t){if(n=(0,It.m9)(n),1===arguments.length&&(e=xE.A()),N_("doc","path",e),n instanceof If){const s=qt.fromString(e,...t);return M_(s),new sn(n,null,new Ge(s))}{if(!(n instanceof sn||n instanceof Aa))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(qt.fromString(e,...t));return M_(s),new sn(n.firestore,n instanceof Aa?n.converter:null,new Ge(s))}}function l0(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),(n instanceof sn||n instanceof Aa)&&(e instanceof sn||e instanceof Aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tD(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),n instanceof jr&&e instanceof jr&&n.firestore===e.firestore&&Kh(n._query,e._query)&&n.converter===e.converter}class nD{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Ig(this,"async_queue_retry"),this.Ra=()=>{const t=hd();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=hd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=hd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new br;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!id(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(s=>{throw this.Ta=s,this.Ea=!1,cr("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Ea=!1,s))));return this.ma=t,t}enqueueAfterDelay(e,t,s){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const a=Rw.createAndSchedule(this,e,t,s,l=>this.Va(l));return this.pa.push(a),a}Pa(){this.Ta&&Xe()}verifyOperationInProgress(){}Sa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function P_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class AA{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class An extends If{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new nD,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||d0(this),this._firestoreClient.terminate()}}function fr(n){return n._firestoreClient||d0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function d0(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new DA(n._databaseId,l,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var l,_;n._firestoreClient=new vA(n._authCredentials,n._appCheckCredentials,n._queue,s)}function iD(n,e,t){const s=new br;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Xw(n,t),yield e0(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function PA(n){if(n._initialized||n._terminated)throw new Ae(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Ir.fromBase64String(e))}catch(t){throw new Ae(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Iu(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cf{constructor(e){this._methodName=e}}class h0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const SR=/^__.*__$/;class AR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class OA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class f0{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.k=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new f0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.Ma(e),a}La(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.ka(),a}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return $g(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(kA(this.xa)&&SR.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class xR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=s||bg(e)}ja(e,t,s,a=!1){return new f0({xa:e,methodName:t,Ka:s,path:Zr.emptyPath(),Oa:!1,qa:a},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function md(n){const e=n._freezeSettings(),t=bg(n._databaseId);return new xR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function O_(n,e,t,s,a,l={}){const p=n.ja(l.merge||l.mergeFields?2:0,e,t,a);cD("Data must be an object, but it was:",p,s);const _=jA(s,p);let b,A;if(l.merge)b=new Kl(p.fieldMask),A=p.fieldTransforms;else if(l.mergeFields){const M=[];for(const O of l.mergeFields){const q=g0(e,O,t);if(!p.contains(q))throw new Ae(de.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);lD(M,q)||M.push(q)}b=new Kl(M),A=p.fieldTransforms.filter(O=>b.covers(O.field))}else b=null,A=p.fieldTransforms;return new AR(new Yr(_),b,A)}class Bg extends Cf{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bg}}function LA(n,e,t){return new f0({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class oD extends Cf{_toFieldTransform(e){return new tt(e.path,new Qh)}isEqual(e){return e instanceof oD}}class RR extends Cf{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=LA(this,e,!0),s=this.Qa.map(l=>Df(l,t)),a=new to(s);return new tt(e.path,a)}isEqual(e){return this===e}}class FA extends Cf{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=LA(this,e,!0),s=this.Qa.map(l=>Df(l,t)),a=new yu(s);return new tt(e.path,a)}isEqual(e){return this===e}}class VA extends Cf{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Ql(e.k,$E(e.k,this.Wa));return new tt(e.path,t)}isEqual(e){return this===e}}function p0(n,e,t,s){const a=n.ja(1,e,t);cD("Data must be an object, but it was:",a,s);const l=[],p=Yr.empty();Dc(s,(b,A)=>{const M=jc(e,b,t);A=(0,It.m9)(A);const O=a.La(M);if(A instanceof Bg)l.push(M);else{const q=Df(A,O);null!=q&&(l.push(M),p.set(M,q))}});const _=new Kl(l);return new OA(p,_,a.fieldTransforms)}function aD(n,e,t,s,a,l){const p=n.ja(1,e,t),_=[g0(e,s,t)],b=[a];if(l.length%2!=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<l.length;q+=2)_.push(g0(e,l[q])),b.push(l[q+1]);const A=[],M=Yr.empty();for(let q=_.length-1;q>=0;--q)if(!lD(A,_[q])){const W=_[q];let le=b[q];le=(0,It.m9)(le);const Pe=p.La(W);if(le instanceof Bg)A.push(W);else{const je=Df(le,Pe);null!=je&&(A.push(W),M.set(W,je))}}const O=new Kl(A);return new OA(M,O,p.fieldTransforms)}function UA(n,e,t,s=!1){return Df(t,n.ja(s?4:3,e))}function Df(n,e){if(uD(n=(0,It.m9)(n)))return cD("Unsupported field value:",e,n),jA(n,e);if(n instanceof Cf)return function(t,s){if(!kA(s.xa))throw s.Ua(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Ua(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let _=Df(p,s.Ba(l));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,It.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $E(s.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Kr.fromDate(t);return{timestampValue:_u(s.k,a)}}if(t instanceof Kr){const a=new Kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_u(s.k,a)}}if(t instanceof h0)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Iu)return{bytesValue:WI(s.k,t._byteString)};if(t instanceof sn){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:JE(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Ua(`Unsupported field value: ${Vg(t)}`)}(n,e)}function jA(n,e){const t={};return vI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dc(n,(s,a)=>{const l=Df(a,e.Fa(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function uD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kr||n instanceof h0||n instanceof Iu||n instanceof sn||n instanceof Cf)}function cD(n,e,t){if(!uD(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Vg(t);throw e.Ua("an object"===s?n+" a custom object":n+" "+s)}var s}function g0(n,e,t){if((e=(0,It.m9)(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return jc(n,e);throw $g("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const m0=new RegExp("[~\\*/\\[\\]]");function jc(n,e,t){if(e.search(m0)>=0)throw $g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch(s){throw $g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $g(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let b="";return(l||p)&&(b+=" (found",l&&(b+=` in field ${s}`),p&&(b+=` in document ${a}`),b+=")"),new Ae(de.INVALID_ARGUMENT,_+n+b)}function lD(n,e){return n.some(t=>t.isEqual(e))}class Hg{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new y0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class y0 extends Hg{data(){return super.data()}}function Gg(n,e){return"string"==typeof e?jc(n,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}class Bc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends Hg{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new k_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Gg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class k_ extends xa{data(e={}){return super.data(e)}}class Cu{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Bc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new k_(this._firestore,this._userDataWriter,s.key,s,new Bc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new k_(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Bc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const _=new k_(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Bc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let b=-1,A=-1;return 0!==p.type&&(b=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),A=l.indexOf(p.doc.key)),{type:L_(p.type),doc:_,oldIndex:b,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function _0(n,e){return n instanceof xa&&e instanceof xa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cu&&e instanceof Cu&&n._firestore===e._firestore&&tD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function BA(n){if(Gy(n)&&0===n.explicitOrderBy.length)throw new Ae(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F_{}function yd(n,...e){for(const t of e)n=t._apply(n);return n}class $A extends F_{constructor(e,t,s){super(),this.Ga=e,this.za=t,this.Ha=s,this.type="where"}_apply(e){const t=md(e.firestore),s=function(a,l,p,_,b,A,M){let O;if(b.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on FieldPath.documentId().`);if("in"===A||"not-in"===A){WA(M,A);const W=[];for(const le of M)W.push(zA(_,a,le));O={arrayValue:{values:W}}}else O=zA(_,a,M)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||WA(M,A),O=UA(p,"where",M,"in"===A||"not-in"===A);const q=Qr.create(b,A,O);return function(W,le){if(le.V()){const je=LE(W);if(null!==je&&!je.isEqual(le.field))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${le.field.toString()}'`);const ct=kE(W);null!==ct&&gD(0,le.field,ct)}const Pe=function(je,ct){for(const Nt of je.filters)if(ct.indexOf(Nt.op)>=0)return Nt.op;return null}(W,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(le.op));if(null!==Pe)throw new Ae(de.INVALID_ARGUMENT,Pe===le.op?`Invalid query. You cannot use more than one '${le.op.toString()}' filter.`:`Invalid query. You cannot use '${le.op.toString()}' filters with '${Pe.toString()}' filters.`)}(a,q),q}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new jr(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new mu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class V_ extends F_{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new zh(a,l);return function(_,b){if(null===kE(_)){const A=LE(_);null!==A&&gD(0,A,b.field)}}(s,p),p}(e._query,this.Ga,this.Ja);return new jr(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new mu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class GA extends F_{constructor(e,t,s){super(),this.type=e,this.Ya=t,this.Xa=s}_apply(e){return new jr(e.firestore,e.converter,LI(e._query,this.Ya,this.Xa))}}class dD extends F_{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=pD(e,this.type,this.Za,this.tc);return new jr(e.firestore,e.converter,(a=t,new mu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class hD extends F_{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=pD(e,this.type,this.Za,this.tc);return new jr(e.firestore,e.converter,(a=t,new mu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function pD(n,e,t,s){if(t[0]=(0,It.m9)(t[0]),t[0]instanceof Hg)return function(a,l,p,_,b){if(!_)throw new Ae(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const A=[];for(const M of qh(a))if(M.field.isKeyField())A.push(jy(l,_.key));else{const O=_.data.field(M.field);if(Fy(O))throw new Ae(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const q=M.field.canonicalString();throw new Ae(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}A.push(O)}return new ig(A,b)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=md(n.firestore);return function(l,p,_,b,A,M){const O=l.explicitOrderBy;if(A.length>O.length)throw new Ae(de.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let W=0;W<A.length;W++){const le=A[W];if(O[W].field.isKeyField()){if("string"!=typeof le)throw new Ae(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof le}`);if(!FE(l)&&-1!==le.indexOf("/"))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${le}' contains a slash.`);const Pe=l.path.child(qt.fromString(le));if(!Ge.isDocumentKey(Pe))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const je=new Ge(Pe);q.push(jy(p,je))}else{const Pe=UA(_,b,le);q.push(Pe)}}return new ig(q,M)}(n._query,n.firestore._databaseId,a,e,t,s)}}function zA(n,e,t){if("string"==typeof(t=(0,It.m9)(t))){if(""===t)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(e)&&-1!==t.indexOf("/"))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(qt.fromString(t));if(!Ge.isDocumentKey(s))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jy(n,new Ge(s))}if(t instanceof sn)return jy(n,t._key);throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vg(t)}.`)}function WA(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gD(n,e,t){if(!t.isEqual(e))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _d{convertValue(e,t="none"){switch(Zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const s={};return Dc(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new h0(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=wI(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp($h(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=qt.fromString(e);rt(eC(s));const a=new Vc(s.get(1),s.get(3)),l=new Ge(s.popFirst(5));return a.isEqual(t)||cr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function U_(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class qA extends _d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}class mD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,t,s){this._verifyNotCommitted();const a=Ra(e,this._firestore),l=U_(a.converter,t,s),p=O_(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,dr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Ra(e,this._firestore);let p;return p="string"==typeof(t=(0,It.m9)(t))||t instanceof Uc?aD(this._dataReader,"WriteBatch.update",l._key,t,s,a):p0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ra(e,this._firestore);return this._mutations=this._mutations.concat(new Xh(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ra(n,e){if((n=(0,It.m9)(n)).firestore!==e)throw new Ae(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dr extends _d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function b0(n,e,t){n=Ht(n,sn);const s=Ht(n.firestore,An),a=U_(n.converter,e,t);return Tf(s,[O_(md(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,dr.none())])}function I0(n,e,t,...s){n=Ht(n,sn);const a=Ht(n.firestore,An),l=md(a);let p;return p="string"==typeof(e=(0,It.m9)(e))||e instanceof Uc?aD(l,"updateDoc",n._key,e,t,s):p0(l,"updateDoc",n._key,e),Tf(a,[p.toMutation(n._key,dr.exists(!0))])}function C0(n,...e){var t,s,a;n=(0,It.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||P_(e[p])||(l=e[p],p++);const _={includeMetadataChanges:l.includeMetadataChanges};if(P_(e[p])){const O=e[p];e[p]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[p+1]=null===(s=O.error)||void 0===s?void 0:s.bind(O),e[p+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let b,A,M;if(n instanceof sn)A=Ht(n.firestore,An),M=Wh(n._key.path),b={next:O=>{e[p]&&e[p](zg(A,n,O))},error:e[p+1],complete:e[p+2]};else{const O=Ht(n,jr);A=Ht(O.firestore,An),M=O._query;const q=new Dr(A);b={next:W=>{e[p]&&e[p](new Cu(A,q,O,W))},error:e[p+1],complete:e[p+2]},BA(n._query)}return function(O,q,W,le){const Pe=new wf(le),je=new Ow(q,Pe,W);return O.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return VC(yield kg(O),je)})),()=>{Pe.na(),O.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Nw(yield kg(O),je)}))}}(fr(A),M,_,b)}function Tf(n,e){return function(t,s){const a=new br;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e,t){return $C.apply(this,arguments)}(yield o0(t),s,a)})),a.promise}(fr(n),e)}function zg(n,e,t){const s=t.docs.get(e._key),a=new Dr(n);return new xa(n,a,e._key,s,new Bc(t.hasPendingWrites,t.fromCache),e.converter)}class _D extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=md(e)}get(e){const t=Ra(e,this._firestore),s=new qA(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Xe();const l=a[0];if(l.isFoundDocument())return new Hg(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Hg(this._firestore,s,t._key,null,t.converter);throw Xe()})}set(e,t,s){const a=Ra(e,this._firestore),l=U_(a.converter,t,s),p=O_(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=Ra(e,this._firestore);let p;return p="string"==typeof(t=(0,It.m9)(t))||t instanceof Uc?aD(this._dataReader,"Transaction.update",l._key,t,s,a):p0(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=Ra(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ra(e,this._firestore),s=new Dr(this._firestore);return super.get(e).then(a=>new xa(this._firestore,s,t._key,a._document,new Bc(!1,!1),t.converter))}}function T0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ED(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function rx(){if("undefined"==typeof atob)throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zl=Ro.SDK_VERSION,(0,Ro._registerComponent)(new fu.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new An(a,new aS(t.getProvider("auth-internal")),new mI(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,Ro.registerVersion)(Oy,"3.4.0",n),(0,Ro.registerVersion)(Oy,"3.4.0","esm2017")}();class Wg{constructor(e){this._delegate=e}static fromBase64String(e){return rx(),new Wg(Iu.fromBase64String(e))}static fromUint8Array(e){return ED(),new Wg(Iu.fromUint8Array(e))}toBase64(){return rx(),this._delegate.toBase64()}toUint8Array(){return ED(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function j_(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class sx{enableIndexedDbPersistence(e,t){return function(n,e){PA(n=Ht(n,An));const t=fr(n),s=n._freezeSettings(),a=new D_;return iD(t,a,new C_(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){PA(n=Ht(n,An));const e=fr(n),t=n._freezeSettings(),s=new D_;return iD(e,s,new Jw(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ae(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(s){if(!Ia.bt())return Promise.resolve();const a=s+"main";yield Ia.delete(a)}),function(s){return t.apply(this,arguments)})(i_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class S0{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const l=(n=Ht(n,If))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Qp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,_;if("string"==typeof s.mockUserToken)p=s.mockUserToken,_=wr.MOCK_USER;else{p=(0,It.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Ae(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wr(b)}n._authCredentials=new oS(new ky(p,_))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield n0(n),t=yield s0(n);return e.setNetworkEnabled(!0),function(s){const a=Le(s);return a.Gr.delete(0),Dg(a)}(t)}))}(fr(n=Ht(n,An)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield n0(n),t=yield s0(n);return e.setNetworkEnabled(!1),(s=(0,_e.Z)(function*(a){const l=Le(a);l.Gr.add(0),yield ff(l),l.Jr.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(fr(n=Ht(n,An)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Fg("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e){return $w.apply(this,arguments)}(yield o0(e),t)})),t.promise}(fr(n=Ht(n,An)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new wf(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield kg(n),a=t,Le(s).io.add(a),void a.next();var s,a})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield kg(n),a=t,void Le(s).io.delete(a);var s,a}))}}(fr(n=Ht(n,An)),P_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kg(this,XC(this._delegate,e))}catch(t){throw Ei(t,"collection()","Firestore.collection()")}}doc(e){try{return new oo(this,jg(this._delegate,e))}catch(t){throw Ei(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vi(this,function(n,e){if(n=Ht(n,If),N_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jr(n,null,(t=e,new mu(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ei(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const s=yield(a=n,x_(a).then(l=>l.datastore));var a;new _A(n.asyncQueue,s,e,t).run()})),t.promise}(fr(n=Ht(n,An)),t=>e(new _D(n,t)))}(this._delegate,t=>e(new A0(this,t)))}batch(){return fr(this._delegate),new x0(new mD(this._delegate,e=>Tf(this._delegate,e)))}loadBundle(e){return function(n,e){const t=fr(n=Ht(n,An)),s=new AA;return function(n,e,t,s){const a=function(l,p){let _;return _="string"==typeof l?(new TextEncoder).encode(l):l,b=function(b,A){if(b instanceof Uint8Array)return T_(b,A);if(b instanceof ArrayBuffer)return T_(new Uint8Array(b),A);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new mA(b,p);var b}(t,bg(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function(n,e,t){const s=Le(n);var a;(a=(0,_e.Z)(function*(l,p,_){try{const b=yield p.getMetadata();if(yield function(q,W){const le=Le(q),Pe=Fr(W.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",je=>le.Ye.getBundleMetadata(je,W.id)).then(je=>!!je&&je.createTime.compareTo(Pe)>=0)}(l.localStore,b))return yield p.close(),void _._completeWith((q=b,{taskState:"Success",documentsLoaded:q.totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}));_._updateProgress(pd(b));const A=new sA(b,l.localStore,p.k);let M=yield p.Ho();for(;M;){const q=yield A.yo(M);q&&_._updateProgress(q),M=yield p.Ho()}const O=yield A.complete();yield bu(l,O.In,void 0),yield function(q,W){const le=Le(q);return le.persistence.runTransaction("Save bundle","readwrite",Pe=>le.Ye.saveBundleMetadata(Pe,W))}(l.localStore,b),_._completeWith(O.progress)}catch(b){Qp("SyncEngine",`Loading bundle failed with ${b}`),_._failWith(b)}var q}),function(l,p,_){return a.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield o0(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,s){const a=Le(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ye.getNamedQuery(l,s))}(yield r0(n),e)}))}(fr(n=Ht(n,An)),e).then(t=>t?new jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vi(this,t):null)}}class B_ extends _d{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wg(new Iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oo.forKey(t,this.firestore,null)}}class A0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}get(e){const t=$c(e);return this._delegate.get(t).then(s=>new Af(this._firestore,new xa(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=$c(e);return s?(T0("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=$c(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}}class x0{constructor(e){this._delegate=e}set(e,t,s){const a=$c(e);return s?(T0("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=$c(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new k_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qg(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=vd.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new vd(e,new B_(e),t),a.set(t,l)),l}}vd.INSTANCES=new WeakMap;class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oo(t,new sn(t._delegate,s,new Ge(e)))}static forKey(e,t,s){return new oo(t,new sn(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Kg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kg(this.firestore,XC(this._delegate,e))}catch(t){throw Ei(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,It.m9)(e))instanceof sn&&l0(this._delegate,e)}set(e,t){t=T0("DocumentReference.set",t);try{return t?b0(this._delegate,e,t):b0(this._delegate,e)}catch(s){throw Ei(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?I0(this._delegate,e):I0(this._delegate,e,t,...s)}catch(a){throw Ei(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Tf(Ht(n.firestore,An),[new Xh(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=Sf(e),s=$_(e,a=>new Af(this.firestore,new xa(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return C0(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,sn);const e=Ht(n.firestore,An),t=fr(e),s=new Dr(e);return function(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,l,p){try{const _=yield function(b,A){const M=Le(b);return M.persistence.runTransaction("read document","readonly",O=>M.Wn.Rn(O,A))}(a,l);_.isFoundDocument()?p.resolve(_):_.isNoDocument()?p.resolve(null):p.reject(new Ae(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const b=mf(_,`Failed to get document '${l} from cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield r0(n),e,t);var s})),t.promise}(t,n._key).then(a=>new xa(e,s,n._key,a,new Bc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,sn);const e=Ht(n.firestore,An);return bA(fr(e),n._key,{source:"server"}).then(t=>zg(e,n,t))}(this._delegate):function(n){n=Ht(n,sn);const e=Ht(n.firestore,An);return bA(fr(e),n._key).then(t=>zg(e,n,t))}(this._delegate),t.then(s=>new Af(this.firestore,new xa(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new oo(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function Ei(n,e,t){return n.message=n.message.replace(e,t),n}function Sf(n){for(const e of n)if("object"==typeof e&&!j_(e))return e;return{}}function $_(n,e){var t,s;let a;return a=j_(n[0])?n[0]:j_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Af{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _0(this._delegate,e._delegate)}}class qg extends Af{data(e){const t=this._delegate.data(e);return function(n,e){n||Xe()}(void 0!==t),t}}class Vi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}where(e,t,s){try{return new Vi(this.firestore,yd(this._delegate,function(n,e,t){const s=e,a=Gg("where",n);return new $A(a,s,t)}(e,t,s)))}catch(a){throw Ei(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vi(this.firestore,yd(this._delegate,function(n,e="asc"){const t=e,s=Gg("orderBy",n);return new V_(s,t)}(e,t)))}catch(s){throw Ei(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vi(this.firestore,yd(this._delegate,function(n){return c0("limit",n),new GA("limit",n,"F")}(e)))}catch(t){throw Ei(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vi(this.firestore,yd(this._delegate,function(n){return c0("limitToLast",n),new GA("limitToLast",n,"L")}(e)))}catch(t){throw Ei(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vi(this.firestore,yd(this._delegate,function(...n){return new dD("startAt",n,!0)}(...e)))}catch(t){throw Ei(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vi(this.firestore,yd(this._delegate,function(...n){return new dD("startAfter",n,!1)}(...e)))}catch(t){throw Ei(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vi(this.firestore,yd(this._delegate,function(...n){return new hD("endBefore",n,!0)}(...e)))}catch(t){throw Ei(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vi(this.firestore,yd(this._delegate,function(...n){return new hD("endAt",n,!1)}(...e)))}catch(t){throw Ei(t,"endAt()","Query.endAt()")}}isEqual(e){return tD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,jr);const e=Ht(n.firestore,An),t=fr(e),s=new Dr(e);return function(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,l,p){try{const _=yield kc(a,l,!0),b=new so(l,_.zn),A=b.bo(_.documents),M=b.applyChanges(A,!1);p.resolve(M.snapshot)}catch(_){const b=mf(_,`Failed to execute query '${l} against cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield r0(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Cu(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,jr);const e=Ht(n.firestore,An),t=fr(e),s=new Dr(e);return QC(t,n._query,{source:"server"}).then(a=>new Cu(e,s,n,a))}(this._delegate):function(n){n=Ht(n,jr);const e=Ht(n.firestore,An),t=fr(e),s=new Dr(e);return BA(n._query),QC(t,n._query).then(a=>new Cu(e,s,n,a))}(this._delegate),t.then(s=>new wD(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Sf(e),s=$_(e,a=>new wD(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return C0(this._delegate,t,s)}withConverter(e){return new Vi(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}class jR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jR(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new qg(this._firestore,s))})}isEqual(e){return _0(this._delegate,e._delegate)}}class Kg extends Vi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oo(this.firestore,e):null}doc(e){try{return new oo(this.firestore,void 0===e?jg(this._delegate):jg(this._delegate,e))}catch(t){throw Ei(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Ht(n.firestore,An),s=jg(n),a=U_(n.converter,e);return Tf(t,[O_(md(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,dr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new oo(this.firestore,t))}isEqual(e){return l0(this._delegate,e._delegate)}withConverter(e){return new Kg(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function $c(n){return Ht(n,sn)}class H_{constructor(...e){this._delegate=new Uc(...e)}static documentId(){return new H_(Zr.keyField().canonicalString())}isEqual(e){return(e=(0,It.m9)(e))instanceof Uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ed{constructor(e){this._delegate=e}static serverTimestamp(){const e=new oD("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ed(e)}static delete(){const e=new Bg("deleteField");return e._methodName="FieldValue.delete",new Ed(e)}static arrayUnion(...e){const t=function(...n){return new RR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ed(t)}static arrayRemove(...e){const t=function(...n){return new FA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ed(t)}static increment(e){const t=function(n){return new VA("increment",n)}(e);return t._methodName="FieldValue.increment",new Ed(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ox={Firestore:S0,GeoPoint:h0,Timestamp:Kr,Blob:Wg,Transaction:A0,WriteBatch:x0,DocumentReference:oo,DocumentSnapshot:Af,Query:Vi,QueryDocumentSnapshot:qg,QuerySnapshot:wD,CollectionReference:Kg,FieldPath:H_,FieldValue:Ed,setLogLevel:function(n){!function(n){Wl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new fu.wA("firestore-compat",t=>((e,t)=>new S0(e,t,new sx))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},ox)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(AT.Z);var bD=F(6682),G_=F(309),BR=F(7771),cx=F(8858);class R0 extends xi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Br(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=s.length;let p;if(this.closed)throw new tp.N;if(this.isStopped||this.hasError?p=vm.w.EMPTY:(this.observers.push(e),p=new cx.W(this,e)),a&&e.add(e=new G_.ht(e,a)),t)for(let _=0;_<l&&!e.closed;_++)e.next(s[_]);else for(let _=0;_<l&&!e.closed;_++)e.next(s[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),p}_getNow(){return(this.scheduler||BR.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,l=a.length;let p=0;for(;p<l&&!(e-a[p].time<s);)p++;return l>t&&(p=Math.max(p,l-t)),p>0&&a.splice(0,p),a}}class Br{constructor(e,t){this.time=e,this.value=t}}function N0(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,p,l=0,_=!1,b=!1;return function(M){let O;l++,!a||_?(_=!1,a=new R0(n,e,s),O=a.subscribe(this),p=M.subscribe({next(q){a.next(q)},error(q){_=!0,a.error(q)},complete(){b=!0,p=void 0,a.complete()}}),b&&(p=void 0)):O=a.subscribe(this),this.add(()=>{l--,O.unsubscribe(),O=void 0,p&&!b&&t&&0===l&&(p.unsubscribe(),p=void 0,a=void 0)})}}(s))}function M0(n,e){return e?_n(()=>n,e):_n(()=>n)}var P0=F(3101);F(2329);const Yg=new Map,px={activated:!1,tokenObservers:[]},zR={initialized:!1,enabled:!1};function ni(n){return Yg.get(n)||px}function Na(n,e){Yg.set(n,e)}function K_(){return zR}class Ex{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new It.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new It.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const as=new It.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function SD(n){if(!ni(n).activated)throw as.create("use-before-activation",{appName:n.name})}function Ts(n,e){return L0.apply(this,arguments)}function L0(){return(L0=(0,_e.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,l)}catch(O){throw as.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==p.status)throw as.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(O){throw as.create("fetch-parse-error",{originalErrorMessage:O.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw as.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const A=1e3*Number(b[1]),M=Date.now();return{token:_.attestationToken,expireTimeMillis:M+A,issuedAtTimeMillis:M}})).apply(this,arguments)}function Dx(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Qg="firebase-app-check-store";let Hc=null;function F0(){return Hc||(Hc=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(as.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Qg,{keyPath:"compositeKey"})}}}catch(t){e(as.create("storage-open",{originalErrorMessage:t.message}))}}),Hc)}function Jg(){return(Jg=(0,_e.Z)(function*(n,e){const s=(yield F0()).transaction(Qg,"readwrite"),l=s.objectStore(Qg).put({compositeKey:n,value:e});return new Promise((p,_)=>{l.onsuccess=b=>{p()},s.onerror=b=>{var A;_(as.create("storage-set",{originalErrorMessage:null===(A=b.target.error)||void 0===A?void 0:A.message}))}})})).apply(this,arguments)}const Q_=new _a.Yd("@firebase/app-check");function ND(n,e){return(0,It.hl)()?function(n,e){return function(n,e){return Jg.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Q_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function j0(){return K_().enabled}function PD(){return J_.apply(this,arguments)}function J_(){return(J_=(0,_e.Z)(function*(){const n=K_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kD={error:"UNKNOWN_ERROR"};function B0(n){return It.US.encodeString(JSON.stringify(n),!1)}function xf(n){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,_e.Z)(function*(n,e=!1){const t=n.app;SD(t);const s=ni(t);let l,a=s.token;if(!a){const b=yield s.cachedTokenPromise;b&&X_(b)&&(a=b)}if(!e&&a&&X_(a))return{token:a.token};let _,p=!1;if(j0()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Ts(Dx(t,yield PD()),n.platformLoggerProvider).then(A=>(s.exchangeTokenPromise=void 0,A)),p=!0);const b=yield s.exchangeTokenPromise;return yield ND(t,b),Na(t,Object.assign(Object.assign({},s),{token:b})),{token:b.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(b=>(s.exchangeTokenPromise=void 0,b)),p=!0),a=yield s.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Q_.warn(b.message):Q_.error(b),l=b}return a?(_={token:a.token},Na(t,Object.assign(Object.assign({},s),{token:a})),yield ND(t,a)):_=VD(l),p&&FD(t,_),_})).apply(this,arguments)}function Nf(n,e){const t=ni(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Na(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function $0(n){const{app:e}=n,t=ni(e);let s=t.tokenRefresher;s||(s=function(n){const{app:e}=n;return new Ex((0,_e.Z)(function*(){let s;if(s=ni(e).token?yield xf(n,!0):yield xf(n),s.error)throw s.error}),()=>!0,()=>{const t=ni(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),Na(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function FD(n,e){const t=ni(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function X_(n){return n.expireTimeMillis-Date.now()>0}function VD(n){return{token:B0(kD),error:n}}class Rx{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ni(this.app);for(const t of e)Nf(this.app,t.next);return Promise.resolve()}}const zD="app-check-internal";(0,Ro._registerComponent)(new fu.wA("app-check",n=>function(n,e){return new Rx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zD).initialize()})),(0,Ro._registerComponent)(new fu.wA(zD,n=>function(n){return{getToken:e=>xf(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,l=ni(a),p={next:t,error:s,type:e};if(Na(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&X_(l.token)){const _=l.token;Promise.resolve().then(()=>{t({token:_.token}),$0(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>$0(n))}(n,"INTERNAL",e),removeTokenListener:e=>Nf(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ro.registerVersion)("@firebase/app-check","0.5.2");class Y0{constructor(){return(0,vr.vb)("app-check")}}"undefined"!=typeof window&&window;var Bx=F(7841);const Gc=new v.OlP("angularfire2.auth.use-emulator"),rv=new v.OlP("angularfire2.auth.settings"),YD=new v.OlP("angularfire2.auth.tenant-id"),QD=new v.OlP("angularfire2.auth.langugage-code"),$x=new v.OlP("angularfire2.auth.use-device-language"),Hx=new v.OlP("angularfire.auth.persistence"),Gx=(n,e,t,s,a,l,p,_)=>(0,xo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),s&&(b.tenantId=s),b.languageCode=a,l&&b.useDeviceLanguage(),p)for(const[A,M]of Object.entries(p))b.settings[A]=M;return _&&b.setPersistence(_),b},[t,s,a,l,p,_]);let zx=(()=>{class n{constructor(t,s,a,l,p,_,b,A,M,O,q,W){const le=new xi.xQ,Pe=(0,Qe.of)(void 0).pipe((0,G_.QV)(p.outsideAngular),_n(()=>l.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,941)))),(0,st.U)(()=>(0,xo.on)(t,l,s)),(0,st.U)(je=>Gx(je,l,_,A,M,O,b,q)),N0({bufferSize:1,refCount:!1}));if(Fa(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qe.of)(null);else{Pe.pipe(Qi()).subscribe();const ct=Pe.pipe(_n(kt=>kt.getRedirectResult().then(Xn=>Xn,()=>null)),vr.iC,N0({bufferSize:1,refCount:!1})),Nt=Pe.pipe(_n(kt=>new mn.y(Xn=>({unsubscribe:l.runOutsideAngular(()=>kt.onAuthStateChanged(Du=>Xn.next(Du),Du=>Xn.error(Du),()=>Xn.complete()))})))),bn=Pe.pipe(_n(kt=>new mn.y(Xn=>({unsubscribe:l.runOutsideAngular(()=>kt.onIdTokenChanged(Du=>Xn.next(Du),Du=>Xn.error(Du),()=>Xn.complete()))}))));this.authState=ct.pipe(M0(Nt),(0,P0.R)(p.outsideAngular),(0,G_.QV)(p.insideAngular)),this.user=ct.pipe(M0(bn),(0,P0.R)(p.outsideAngular),(0,G_.QV)(p.insideAngular)),this.idToken=this.user.pipe(_n(kt=>kt?(0,Dn.D)(kt.getIdToken()):(0,Qe.of)(null))),this.idTokenResult=this.user.pipe(_n(kt=>kt?(0,Dn.D)(kt.getIdTokenResult()):(0,Qe.of)(null))),this.credential=(0,bD.T)(ct,le,this.authState.pipe(sr(kt=>!kt))).pipe((0,st.U)(kt=>(null==kt?void 0:kt.user)?kt:null),(0,P0.R)(p.outsideAngular),(0,G_.QV)(p.insideAngular))}return(0,xo.pX)(this,Pe,l,{spy:{apply:(je,ct,Nt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&Nt.then(bn=>le.next(bn))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(xo.Dh),v.LFG(xo.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vr.HU),v.LFG(Gc,8),v.LFG(rv,8),v.LFG(YD,8),v.LFG(QD,8),v.LFG($x,8),v.LFG(Hx,8),v.LFG(Y0,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function qx(n,e){return function(n,e=Db.z){return new mn.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function JD(n,e){return qx(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function J0(n,e){return JD(n,e).pipe(ru(void 0),Mv(),(0,st.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,_)=>{const b=a.find(M=>M.doc.ref.isEqual(p.ref)),A=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(p.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(p.metadata)||!b&&A&&JSON.stringify(A.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:p}})}),l}))}function XD(n,e,t){return J0(n,t).pipe(Xd((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eT(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),t=>t.lift(new sR(void 0,void 0)),(0,st.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function eT(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Kx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class r{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=J0(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(ru(void 0),Mv(),sr(([s,a])=>a.length>0||!s),(0,st.U)(([s,a])=>a),vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xd((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Kx(e);return XD(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),vr.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(vr.iC)}add(e){return this.ref.add(e)}doc(e){return new i(this.ref.doc(e),this.afs)}}class i{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=y(s,t);return new r(a,l,this.afs)}snapshotChanges(){return function(n,e){return qx(n,e).pipe(ru(void 0),Mv(),(0,st.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(vr.iC)}}class o{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?J0(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),sr(t=>t.length>0),vr.iC):J0(this.query,this.afs.schedulers.outsideAngular).pipe(vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xd((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Kx(e);return XD(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),vr.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(vr.iC)}}const u=new v.OlP("angularfire2.enableFirestorePersistence"),c=new v.OlP("angularfire2.firestore.persistenceSettings"),d=new v.OlP("angularfire2.firestore.settings"),g=new v.OlP("angularfire2.firestore.use-emulator");function y(n,e=(t=>t)){return{query:e(n),ref:n}}let w=(()=>{class n{constructor(t,s,a,l,p,_,b,A,M,O,q,W,le,Pe,je,ct,Nt){this.schedulers=b;const bn=(0,xo.on)(t,_,s),kt=M;O&&Gx(bn,_,q,le,Pe,je,W,ct),[this.firestore,this.persistenceEnabled$]=(0,xo.cc)(`${bn.name}.firestore`,"AngularFirestore",bn.name,()=>{const Xn=_.runOutsideAngular(()=>bn.firestore());if(l&&Xn.settings(l),kt&&Xn.useEmulator(...kt),a&&!Fa(p)){const Du=()=>{try{return(0,Dn.D)(Xn.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(nT){return"undefined"!=typeof console&&console.warn(nT),(0,Qe.of)(!1)}};return[Xn,_.runOutsideAngular(Du)]}return[Xn,(0,Qe.of)(!1)]},[l,kt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=y(a,s),_=this.schedulers.ngZone.run(()=>l);return new r(_,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new o(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new i(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(xo.Dh),v.LFG(xo.xv,8),v.LFG(u,8),v.LFG(d,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vr.HU),v.LFG(c,8),v.LFG(g,8),v.LFG(zx,8),v.LFG(Gc,8),v.LFG(rv,8),v.LFG(YD,8),v.LFG(QD,8),v.LFG($x,8),v.LFG(Hx,8),v.LFG(Y0,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C=(()=>{class n{constructor(){Bx.Z.registerVersion("angularfire",vr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:u,useValue:!0},{provide:c,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[w]}),n})();function S(n){return!!n&&(n instanceof mn.y||"function"==typeof n.lift&&"function"==typeof n.subscribe)}var N=F(1555);function j(n,e){return new mn.y(t=>{const s=n.length;if(0===s)return void t.complete();const a=new Array(s);let l=0,p=0;for(let _=0;_<s;_++){const b=(0,Dn.D)(n[_]);let A=!1;t.add(b.subscribe({next:M=>{A||(A=!0,p++),a[_]=M},error:M=>t.error(M),complete:()=>{l++,(l===s||!A)&&(p===s&&t.next(e?e.reduce((M,O,q)=>(M[O]=a[q],M),{}):a),t.complete())}}))}})}class z{}let se=(()=>{class n extends z{getTranslation(t){return(0,Qe.of)({})}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class J{}let Re=(()=>{class n{handle(t){return t.key}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function ye(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;let a,l,p,t=typeof n;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(l in p=Object.create(null),n){if(!ye(n[l],e[l]))return!1;p[l]=!0}for(l in e)if(!(l in p)&&void 0!==e[l])return!1;return!0}if(!Array.isArray(e))return!1;if((a=n.length)==e.length){for(l=0;l<a;l++)if(!ye(n[l],e[l]))return!1;return!0}}return!1}function Ke(n){return null!=n}function it(n){return n&&"object"==typeof n&&!Array.isArray(n)}function Rt(n,e){let t=Object.assign({},n);return it(n)&&it(e)&&Object.keys(e).forEach(s=>{it(e[s])?s in n?t[s]=Rt(n[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}class Gn{}let Ss=(()=>{class n extends Gn{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,s){let a;return a="string"==typeof t?this.interpolateString(t,s):"function"==typeof t?this.interpolateFunction(t,s):t,a}getValue(t,s){let a="string"==typeof s?s.split("."):[s];s="";do{s+=a.shift(),!Ke(t)||!Ke(t[s])||"object"!=typeof t[s]&&a.length?a.length?s+=".":t=void 0:(t=t[s],s="")}while(a.length);return t}interpolateFunction(t,s){return t(s)}interpolateString(t,s){return s?t.replace(this.templateMatcher,(a,l)=>{let p=this.getValue(s,l);return Ke(p)?p:a}):t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class zc{}let Cd=(()=>{class n extends zc{compile(t,s){return t}compileTranslations(t,s){return t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Dd{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new v.vpe,this.onLangChange=new v.vpe,this.onDefaultLangChange=new v.vpe}}const Wc=new v.OlP("USE_STORE"),nm=new v.OlP("USE_DEFAULT_LANG"),rm=new v.OlP("DEFAULT_LANGUAGE"),im=new v.OlP("USE_EXTEND");let kf=(()=>{class n{constructor(t,s,a,l,p,_=!0,b=!1,A=!1,M){this.store=t,this.currentLoader=s,this.compiler=a,this.parser=l,this.missingTranslationHandler=p,this.useDefaultLang=_,this.isolate=b,this.extend=A,this.pending=!1,this._onTranslationChange=new v.vpe,this._onLangChange=new v.vpe,this._onDefaultLangChange=new v.vpe,this._langs=[],this._translations={},this._translationRequests={},M&&this.setDefaultLang(M)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let s=this.retrieveTranslations(t);void 0!==s?(null==this.defaultLang&&(this.defaultLang=t),s.pipe(Yi(1)).subscribe(a=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return(0,Qe.of)(this.translations[t]);let s=this.retrieveTranslations(t);return void 0!==s?(this.currentLang||(this.currentLang=t),s.pipe(Yi(1)).subscribe(a=>{this.changeLang(t)}),s):(this.changeLang(t),(0,Qe.of)(this.translations[t]))}retrieveTranslations(t){let s;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),s=this._translationRequests[t]),s}getTranslation(t){this.pending=!0;const s=this.currentLoader.getTranslation(t).pipe(N0(1),Yi(1));return this.loadingTranslations=s.pipe((0,st.U)(a=>this.compiler.compileTranslations(a,t)),N0(1),Yi(1)),this.loadingTranslations.subscribe({next:a=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},a),this.translations[t]):a,this.updateLangs(),this.pending=!1},error:a=>{this.pending=!1}}),s}setTranslation(t,s,a=!1){s=this.compiler.compileTranslations(s,t),this.translations[t]=(a||this.extend)&&this.translations[t]?Rt(this.translations[t],s):s,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(s=>{-1===this.langs.indexOf(s)&&this.langs.push(s)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,s,a){let l;if(s instanceof Array){let p={},_=!1;for(let b of s)p[b]=this.getParsedResult(t,b,a),S(p[b])&&(_=!0);return _?function(...n){if(1===n.length){const e=n[0];if((0,I.k)(e))return j(e,null);if((0,N.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return j(t.map(s=>e[s]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return j(n=1===n.length&&(0,I.k)(n[0])?n[0]:n,null).pipe((0,st.U)(t=>e(...t)))}return j(n,null)}(s.map(A=>S(p[A])?p[A]:(0,Qe.of)(p[A]))).pipe((0,st.U)(A=>{let M={};return A.forEach((O,q)=>{M[s[q]]=O}),M})):p}if(t&&(l=this.parser.interpolate(this.parser.getValue(t,s),a)),void 0===l&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(l=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],s),a)),void 0===l){let p={key:s,translateService:this};void 0!==a&&(p.interpolateParams=a),l=this.missingTranslationHandler.handle(p)}return void 0!==l?l:s}get(t,s){if(!Ke(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(ci(a=>S(a=this.getParsedResult(a,t,s))?a:(0,Qe.of)(a)));{let a=this.getParsedResult(this.translations[this.currentLang],t,s);return S(a)?a:(0,Qe.of)(a)}}getStreamOnTranslationChange(t,s){if(!Ke(t)||!t.length)throw new Error('Parameter "key" required');return di(Wr(()=>this.get(t,s)),this.onTranslationChange.pipe(_n(a=>{const l=this.getParsedResult(a.translations,t,s);return"function"==typeof l.subscribe?l:(0,Qe.of)(l)})))}stream(t,s){if(!Ke(t)||!t.length)throw new Error('Parameter "key" required');return di(Wr(()=>this.get(t,s)),this.onLangChange.pipe(_n(a=>{const l=this.getParsedResult(a.translations,t,s);return S(l)?l:(0,Qe.of)(l)})))}instant(t,s){if(!Ke(t)||!t.length)throw new Error('Parameter "key" required');let a=this.getParsedResult(this.translations[this.currentLang],t,s);if(S(a)){if(t instanceof Array){let l={};return t.forEach((p,_)=>{l[t[_]]=t[_]}),l}return t}return a}set(t,s,a=this.currentLang){this.translations[a][t]=this.compiler.compile(s,a),this.updateLangs(),this.onTranslationChange.emit({lang:a,translations:this.translations[a]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Dd),v.LFG(z),v.LFG(zc),v.LFG(Gn),v.LFG(J),v.LFG(nm),v.LFG(Wc),v.LFG(im),v.LFG(rm))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),fN=(()=>{class n{constructor(t,s){this.translate=t,this._ref=s,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(t,s,a){let l=p=>{this.value=void 0!==p?p:t,this.lastKey=t,this._ref.markForCheck()};if(a){let p=this.translate.getParsedResult(a,t,s);S(p.subscribe)?p.subscribe(l):l(p)}this.translate.get(t,s).subscribe(l)}transform(t,...s){if(!t||!t.length)return t;if(ye(t,this.lastKey)&&ye(s,this.lastParams))return this.value;let a;if(Ke(s[0])&&s.length)if("string"==typeof s[0]&&s[0].length){let l=s[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{a=JSON.parse(l)}catch(p){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${s[0]}`)}}else"object"==typeof s[0]&&!Array.isArray(s[0])&&(a=s[0]);return this.lastKey=t,this.lastParams=s,this.updateValue(t,a),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(l=>{this.lastKey&&l.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,a,l.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(l=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,a,l.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,a))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(kf,16),v.Y36(v.sBO,16))},n.\u0275pipe=v.Yjl({name:"translate",type:n,pure:!1}),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Zx=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:z,useClass:se},t.compiler||{provide:zc,useClass:Cd},t.parser||{provide:Gn,useClass:Ss},t.missingTranslationHandler||{provide:J,useClass:Re},Dd,{provide:Wc,useValue:t.isolate},{provide:nm,useValue:t.useDefaultLang},{provide:im,useValue:t.extend},{provide:rm,useValue:t.defaultLanguage},kf]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:z,useClass:se},t.compiler||{provide:zc,useClass:Cd},t.parser||{provide:Gn,useClass:Ss},t.missingTranslationHandler||{provide:J,useClass:Re},{provide:Wc,useValue:t.isolate},{provide:nm,useValue:t.useDefaultLang},{provide:im,useValue:t.extend},{provide:rm,useValue:t.defaultLanguage},kf]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})(),pN=(()=>{class n{constructor(t){this.translateService=t}setDefaultLang(t=Tl.ENGLISH){this.translateService.setDefaultLang(t)}switchLanguage(t){this.translateService.use(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(kf))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gN(n,e){if(1&n&&(v.TgZ(0,"div"),v.TgZ(1,"p"),v._uU(2),v.qZA(),v.qZA()),2&n){const t=e.$implicit;v.xp6(2),v.Oqu(t.name)}}let mN=(()=>{class n{constructor(t,s){this.fire=t,this.lang=s,this.languages=Tl,this.users=t.collection("users").valueChanges(),this.lang.setDefaultLang()}ngOnInit(){this.getAll()}removeUser(t){this.fire.collection("users").doc(t).delete().then(s=>console.log("res",s))}getAll(){this.fire.collection("users").valueChanges({idField:"userId"}).subscribe(t=>{console.log("resp",t),this.user=t[0]})}updateUser(){return this.fire.collection("users").doc("J3xgclPHQPLnVmQz2ifk").set({name:"Alex"}).then(console.log)}getUsers(){this.fire.collection("users").snapshotChanges().subscribe(t=>{console.log("snapshot",t)})}postUser(){this.fire.collection("users").add({name:"Max",personalInfo:"some info"})}switch(t){this.lang.switchLanguage(t)}buildTranslationKey(t){return`${t}`}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(w),v.Y36(pN))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:6,consts:[[4,"ngFor","ngForOf"],[1,"tw-text-xl"],[1,"container"],[1,"row"],[1,"col"],[3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,s){1&t&&(v.YNc(0,gN,3,1,"div",0),v.ALo(1,"async"),v.TgZ(2,"p",1),v._uU(3),v.ALo(4,"translate"),v.qZA(),v.TgZ(5,"div",2),v.TgZ(6,"div",3),v.TgZ(7,"div",4),v.TgZ(8,"button",5),v.NdJ("click",function(){return s.switch(s.languages.RUSSIAN)}),v._uU(9,"ru"),v.qZA(),v.qZA(),v.TgZ(10,"div",4),v.TgZ(11,"button",5),v.NdJ("click",function(){return s.switch(s.languages.ENGLISH)}),v._uU(12,"en"),v.qZA(),v.qZA(),v.TgZ(13,"div",4),v.TgZ(14,"button",6),v.NdJ("click",function(){return s.switch(s.languages.UKRAINIAN)}),v._uU(15,"ua"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t&&(v.Q6J("ngForOf",v.lcZ(1,2,s.users)),v.xp6(3),v.Oqu(v.lcZ(4,4,s.buildTranslationKey("test"))))},directives:[Bi],pipes:[xu,fN],styles:[""]}),n})();class yN{constructor(e,t="/assets/i18n/",s=".json"){this.http=e,this.prefix=t,this.suffix=s}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function aN(n){return new yN(n,"assets/i18n/",".json")}let _N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[[hs,Zx.forChild({loader:{provide:z,useFactory:aN,deps:[Yd]}}),Ai],Zx,Ai]}),n})(),vN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[mN]}),n.\u0275inj=v.cJS({providers:[],imports:[[Ya,Cb,C,xo.hO.initializeApp(ol),_N,Zx.forRoot({loader:{provide:z,useFactory:aN,deps:[Yd]},isolate:!1})]]}),n})();(0,v.G48)(),Wu().bootstrapModule(vN).catch(n=>console.error(n))},3394:(Je,Ee,F)=>{"use strict";F.d(Ee,{Z:()=>we});var v=F(3854),X=F(3910),k=F(8026),ce=F(5422);class te{constructor(K,me){this._delegate=K,this.firebase=me,(0,k._addComponent)(K,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(K,me=k._DEFAULT_ENTRY_NAME){var pe;this._delegate.checkDestroyed();const fe=this._delegate.container.getProvider(K);return!fe.isInitialized()&&"EXPLICIT"===(null===(pe=fe.getComponent())||void 0===pe?void 0:pe.instantiationMode)&&fe.initialize(),fe.getImmediate({identifier:me})}_removeServiceInstance(K,me=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(me)}_addComponent(K){(0,k._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,k._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ee(){const he=function(he){const K={},me={__esModule:!0,initializeApp:function(pt,ln={}){const mt=k.initializeApp(pt,ln);if((0,v.r3)(K,mt.name))return K[mt.name];const _t=new he(mt,me);return K[mt.name]=_t,_t},app:fe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(pt){const ln=pt.name,mt=ln.replace("-compat","");if(k._registerComponent(pt)&&"PUBLIC"===pt.type){const _t=(lt=fe())=>{if("function"!=typeof lt[mt])throw ge.create("invalid-app-argument",{appName:ln});return lt[mt]()};void 0!==pt.serviceProps&&(0,v.ZB)(_t,pt.serviceProps),me[mt]=_t,he.prototype[mt]=function(...lt){return this._getService.bind(this,ln).apply(this,pt.multipleInstances?lt:[])}}return"PUBLIC"===pt.type?me[mt]:null},removeApp:function(pt){delete K[pt]},useAsService:function(pt,ln){return"serverAuth"===ln?null:ln},modularAPIs:k}};function fe(pt){if(!(0,v.r3)(K,pt=pt||k._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:pt});return K[pt]}return me.default=me,Object.defineProperty(me,"apps",{get:function(){return Object.keys(K).map(pt=>K[pt])}}),fe.App=he,me}(te);return he.INTERNAL=Object.assign(Object.assign({},he.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(me){(0,v.ZB)(he,me)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),he}(),V=new ce.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const he=self.firebase.SDK_VERSION;he&&he.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=L;(0,k.registerVersion)("@firebase/app-compat","0.1.11",undefined)},8026:(Je,Ee,F)=>{"use strict";F.r(Ee),F.d(Ee,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ma,_DEFAULT_ENTRY_NAME:()=>ao,_addComponent:()=>us,_addOrOverwriteComponent:()=>Rs,_apps:()=>xn,_clearComponents:()=>zn,_components:()=>xs,_getProvider:()=>on,_registerComponent:()=>cs,_removeServiceInstance:()=>$t,deleteApp:()=>er,getApp:()=>pr,getApps:()=>Ce,initializeApp:()=>Tr,onLog:()=>Mt,registerVersion:()=>wi,setLogLevel:()=>$r});var v=F(8239),X=F(3910),k=F(5422),ce=F(3854);class te{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function(et){const De=et.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Ut)){const Xt=Ut.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(Ut=>Ut).join(" ")}}const ge="@firebase/app",ee=new k.Yd("@firebase/app"),ao="[DEFAULT]",Tu={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xn=new Map,xs=new Map;function us(et,De){try{et.container.addComponent(De)}catch(Ut){ee.debug(`Component ${De.name} failed to register with FirebaseApp ${et.name}`,Ut)}}function Rs(et,De){et.container.addOrOverwriteComponent(De)}function cs(et){const De=et.name;if(xs.has(De))return ee.debug(`There were multiple attempts to register component ${De}.`),!1;xs.set(De,et);for(const Ut of xn.values())us(Ut,et);return!0}function on(et,De){return et.container.getProvider(De)}function $t(et,De,Ut=ao){on(et,De).clearInstance(Ut)}function zn(){xs.clear()}const Vt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Et{constructor(De,Ut,Xt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Vt.create("app-deleted",{appName:this._name})}}const Ma="9.6.0";function Tr(et,De={}){"object"!=typeof De&&(De={name:De});const Ut=Object.assign({name:ao,automaticDataCollectionEnabled:!1},De),Xt=Ut.name;if("string"!=typeof Xt||!Xt)throw Vt.create("bad-app-name",{appName:String(Xt)});const dn=xn.get(Xt);if(dn){if((0,ce.vZ)(et,dn.options)&&(0,ce.vZ)(Ut,dn.config))return dn;throw Vt.create("duplicate-app",{appName:Xt})}const Lt=new X.H0(Xt);for(const We of xs.values())Lt.addComponent(We);const Ye=new Et(et,Ut,Lt);return xn.set(Xt,Ye),Ye}function pr(et=ao){const De=xn.get(et);if(!De)throw Vt.create("no-app",{appName:et});return De}function Ce(){return Array.from(xn.values())}function er(et){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,v.Z)(function*(et){const De=et.name;xn.has(De)&&(xn.delete(De),yield Promise.all(et.container.getProviders().map(Ut=>Ut.delete())),et.isDeleted=!0)})).apply(this,arguments)}function wi(et,De,Ut){var Xt;let dn=null!==(Xt=Tu[et])&&void 0!==Xt?Xt:et;Ut&&(dn+=`-${Ut}`);const Lt=dn.match(/\s|\//),Ye=De.match(/\s|\//);if(Lt||Ye){const We=[`Unable to register library "${dn}" with version "${De}":`];return Lt&&We.push(`library name "${dn}" contains illegal characters (whitespace or "/")`),Lt&&Ye&&We.push("and"),Ye&&We.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ee.warn(We.join(" "))}cs(new X.wA(`${dn}-version`,()=>({library:dn,version:De}),"VERSION"))}function Mt(et,De){if(null!==et&&"function"!=typeof et)throw Vt.create("invalid-log-argument");(0,k.Am)(et,De)}function $r(et){(0,k.Ub)(et)}cs(new X.wA("platform-logger",De=>new te(De),"PRIVATE")),wi(ge,"0.7.10",""),wi(ge,"0.7.10","esm2017"),wi("fire-js","")},3910:(Je,Ee,F)=>{"use strict";F.d(Ee,{wA:()=>k,H0:()=>ae});var v=F(8239),X=F(3854);class k{constructor(L,V,Q){this.name=L,this.instanceFactory=V,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const ce="[DEFAULT]";class te{constructor(L,V){this.name=L,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const V=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(V)){const Q=new X.BH;if(this.instancesDeferred.set(V,Q),this.isInitialized(V)||this.shouldAutoInitialize())try{const Z=this.getOrInitializeService({instanceIdentifier:V});Z&&Q.resolve(Z)}catch(Z){}}return this.instancesDeferred.get(V).promise}getImmediate(L){var V;const Q=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),Z=null!==(V=null==L?void 0:L.optional)&&void 0!==V&&V;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Z)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(oe){if(Z)return null;throw oe}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if("EAGER"===L.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(V){}for(const[V,Q]of this.instancesDeferred.entries()){const Z=this.normalizeInstanceIdentifier(V);try{const oe=this.getOrInitializeService({instanceIdentifier:Z});Q.resolve(oe)}catch(oe){}}}}clearInstance(L=ce){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,v.Z)(function*(){const V=Array.from(L.instances.values());yield Promise.all([...V.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...V.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=ce){return this.instances.has(L)}getOptions(L=ce){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:V={}}=L,Q=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Z=this.getOrInitializeService({instanceIdentifier:Q,options:V});for(const[oe,we]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(oe)&&we.resolve(Z);return Z}onInit(L,V){var Q;const Z=this.normalizeInstanceIdentifier(V),oe=null!==(Q=this.onInitCallbacks.get(Z))&&void 0!==Q?Q:new Set;oe.add(L),this.onInitCallbacks.set(Z,oe);const we=this.instances.get(Z);return we&&L(we,Z),()=>{oe.delete(L)}}invokeOnInitCallbacks(L,V){const Q=this.onInitCallbacks.get(V);if(Q)for(const Z of Q)try{Z(L,V)}catch(oe){}}getOrInitializeService({instanceIdentifier:L,options:V={}}){let Q=this.instances.get(L);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=L,ee===ce?void 0:ee),options:V}),this.instances.set(L,Q),this.instancesOptions.set(L,V),this.invokeOnInitCallbacks(Q,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,Q)}catch(Z){}var ee;return Q||null}normalizeInstanceIdentifier(L=ce){return this.component?this.component.multipleInstances?L:ce:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const V=this.getProvider(L.name);if(V.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);V.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const V=new te(L,this);return this.providers.set(L,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(Je,Ee,F)=>{"use strict";F.d(Ee,{in:()=>X,Yd:()=>ge,Ub:()=>ae,Am:()=>ee});const v=[];var X=(()=>{return(L=X||(X={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",X;var L})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ce=X.INFO,te={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},re=(L,V,...Q)=>{if(V<L.logLevel)return;const Z=(new Date).toISOString(),oe=te[V];if(!oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[oe](`[${Z}]  ${L.name}:`,...Q)};class ge{constructor(V){this.name=V,this._logLevel=ce,this._logHandler=re,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in X))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?k[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...V),this._logHandler(this,X.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...V),this._logHandler(this,X.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,X.INFO,...V),this._logHandler(this,X.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,X.WARN,...V),this._logHandler(this,X.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...V),this._logHandler(this,X.ERROR,...V)}}function ae(L){v.forEach(V=>{V.setLogLevel(L)})}function ee(L,V){for(const Q of v){let Z=null;V&&V.level&&(Z=k[V.level]),Q.userLogHandler=null===L?null:(oe,we,...he)=>{const K=he.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch(pe){return null}}).filter(me=>me).join(" ");we>=(null!=Z?Z:oe.logLevel)&&L({level:X[we].toLowerCase(),message:K,args:he,type:oe.name})}}}},8239:(Je,Ee,F)=>{"use strict";function v(k,ce,te,re,ge,ae,ee){try{var L=k[ae](ee),V=L.value}catch(Q){return void te(Q)}L.done?ce(V):Promise.resolve(V).then(re,ge)}function X(k){return function(){var ce=this,te=arguments;return new Promise(function(re,ge){var ae=k.apply(ce,te);function ee(V){v(ae,re,ge,ee,L,"next",V)}function L(V){v(ae,re,ge,ee,L,"throw",V)}ee(void 0)})}}F.d(Ee,{Z:()=>X})}},Je=>{Je(Je.s=1778)}]);